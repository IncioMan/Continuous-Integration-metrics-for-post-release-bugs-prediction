{"e3d566bbf2436a4bec3a8048f97f5ccca97936c9":{"changes":{"sonar-scanner-engine\/src\/test\/java\/org\/sonar\/scanner\/report\/ReportPublisherTest.java":"MODIFY","tests\/src\/test\/java\/org\/sonarqube\/tests\/analysis\/ScannerTest.java":"MODIFY","sonar-scanner-engine\/src\/main\/java\/org\/sonar\/scanner\/report\/ReportPublisher.java":"MODIFY"},"diff":{"sonar-scanner-engine\/src\/test\/java\/org\/sonar\/scanner\/report\/ReportPublisherTest.java":[{"add":["87","    root = new DefaultInputModule(ProjectDefinition.create().setKey(\"org.sonarsource.sonarqube:sonarqube\").setBaseDir(temp.newFolder()).setWorkDir(temp.getRoot()));","102","      .contains(\"ANALYSIS SUCCESSFUL, you can browse https:\/\/localhost\/dashboard?id=org.sonarsource.sonarqube%3Asonarqube\")","109","        \"projectKey=org.sonarsource.sonarqube:sonarqube\\n\" +","112","        \"dashboardUrl=https:\/\/localhost\/dashboard?id=org.sonarsource.sonarqube%3Asonarqube\\n\" +","140","      .contains(\"ANALYSIS SUCCESSFUL, you can browse https:\/\/publicserver\/sonarqube\/dashboard?id=org.sonarsource.sonarqube%3Asonarqube\")","145","      \"projectKey=org.sonarsource.sonarqube:sonarqube\\n\" +","148","        \"dashboardUrl=https:\/\/publicserver\/sonarqube\/dashboard?id=org.sonarsource.sonarqube%3Asonarqube\\n\" +","154","  public void fail_if_public_url_malformed() {","231","      entry(\"projectKey\", \"org.sonarsource.sonarqube:sonarqube\"));","265","    assertThat(wsRequest.getParameters().getValues(\"projectKey\")).containsExactly(\"org.sonarsource.sonarqube:sonarqube\");","303","    assertThat(wsRequest.getParameters().getValues(\"projectKey\")).containsExactly(\"org.sonarsource.sonarqube:sonarqube\");"],"delete":["87","    root = new DefaultInputModule(ProjectDefinition.create().setKey(\"struts\").setBaseDir(temp.newFolder()).setWorkDir(temp.getRoot()));","102","      .contains(\"ANALYSIS SUCCESSFUL, you can browse https:\/\/localhost\/dashboard\/index\/struts\")","109","        \"projectKey=struts\\n\" +","112","        \"dashboardUrl=https:\/\/localhost\/dashboard\/index\/struts\\n\" +","140","      .contains(\"ANALYSIS SUCCESSFUL, you can browse https:\/\/publicserver\/sonarqube\/dashboard\/index\/struts\")","145","      \"projectKey=struts\\n\" +","148","        \"dashboardUrl=https:\/\/publicserver\/sonarqube\/dashboard\/index\/struts\\n\" +","154","  public void fail_if_public_url_malformed() throws IOException {","231","      entry(\"projectKey\", \"struts\"));","265","    assertThat(wsRequest.getParameters().getValues(\"projectKey\")).containsExactly(\"struts\");","303","    assertThat(wsRequest.getParameters().getValues(\"projectKey\")).containsExactly(\"struts\");"]}],"tests\/src\/test\/java\/org\/sonarqube\/tests\/analysis\/ScannerTest.java":[{"add":["285","    assertThat(result.getLogs()).contains(\"\/dashboard?id=com.sonarsource.it.samples%3Amulti-modules-sample\");","290","    assertThat(result.getLogs()).contains(\"\/dashboard?id=com.sonarsource.it.samples%3Amulti-modules-sample%3Amybranch\");","294","    assertThat(result.getLogs()).contains(\"http:\/\/foo:123\/sonar\/dashboard?id=com.sonarsource.it.samples%3Amulti-modules-sample\");"],"delete":["285","    assertThat(result.getLogs()).contains(\"\/dashboard\/index\/com.sonarsource.it.samples:multi-modules-sample\");","290","    assertThat(result.getLogs()).contains(\"\/dashboard\/index\/com.sonarsource.it.samples:multi-modules-sample:mybranch\");","294","    assertThat(result.getLogs()).contains(\"http:\/\/foo:123\/sonar\/dashboard\/index\/com.sonarsource.it.samples:multi-modules-sample\");"]}],"sonar-scanner-engine\/src\/main\/java\/org\/sonar\/scanner\/report\/ReportPublisher.java":[{"add":["26","import java.io.UnsupportedEncodingException;","57","import static java.net.URLEncoder.encode;","226","      URL dashboardUrl;","227","      try {","228","        dashboardUrl = httpUrl.newBuilder()","229","          .addPathSegment(\"dashboard\")","230","          .addEncodedQueryParameter(\"id\", encode(effectiveKey, \"UTF-8\"))","231","          .build()","232","          .url();","233","      } catch (UnsupportedEncodingException e) {","234","        throw new IllegalStateException(\"Unable to urlencode \" + effectiveKey, e);","235","      }"],"delete":["224","      URL dashboardUrl = httpUrl.newBuilder()","225","        .addPathSegment(\"dashboard\").addPathSegment(\"index\").addPathSegment(effectiveKey)","226","        .build()","227","        .url();"]}]}},"2248da623eef31f86d057c29e6886ea2dc6b8cd9":{"changes":{"server\/sonar-web\/src\/main\/js\/apps\/projectActivity\/components\/forms\/AddGraphMetricPopup.tsx":"MODIFY","server\/sonar-web\/src\/main\/js\/apps\/projectActivity\/components\/forms\/__tests__\/AddGraphMetricPopup-test.tsx":"ADD","server\/sonar-web\/src\/main\/js\/apps\/projectActivity\/components\/forms\/__tests__\/__snapshots__\/AddGraphMetricPopup-test.tsx.snap":"ADD"},"diff":{"server\/sonar-web\/src\/main\/js\/apps\/projectActivity\/components\/forms\/AddGraphMetricPopup.tsx":[{"add":["24","export interface AddGraphMetricPopupProps {","36","export default function AddGraphMetricPopup({","37","  elements,","38","  metricsTypeFilter,","39","  ...props","40","}: AddGraphMetricPopupProps) {","72","        onSelect={(item: string) => elements.includes(item) && props.onSelect(item)}"],"delete":["24","interface Props {","36","export default function AddGraphMetricPopup({ elements, metricsTypeFilter, ...props }: Props) {","68","        onSelect={props.onSelect}"]}],"server\/sonar-web\/src\/main\/js\/apps\/projectActivity\/components\/forms\/__tests__\/AddGraphMetricPopup-test.tsx":[{"add":[],"delete":[]}],"server\/sonar-web\/src\/main\/js\/apps\/projectActivity\/components\/forms\/__tests__\/__snapshots__\/AddGraphMetricPopup-test.tsx.snap":[{"add":[],"delete":[]}]}},"b115df733b619d9d5ebc1cdb783e06da48f14a59":{"changes":{"server\/sonar-web\/src\/main\/js\/apps\/api-documentation\/item-view.js":"MODIFY","server\/sonar-web\/src\/main\/js\/apps\/api-documentation\/action-view.js":"MODIFY","server\/sonar-web\/src\/main\/js\/apps\/api-documentation\/controller.js":"MODIFY","server\/sonar-web\/src\/main\/js\/apps\/api-documentation\/app.js":"MODIFY"},"diff":{"server\/sonar-web\/src\/main\/js\/apps\/api-documentation\/item-view.js":[{"add":["27","          return that.options.state.match(test, action.internal);"],"delete":["27","          return that.options.state.match(test);"]}],"server\/sonar-web\/src\/main\/js\/apps\/api-documentation\/action-view.js":[{"add":["18","    this.listenTo(this.options.state, 'change', this.toggleHidden);","49","    this.$el.toggleClass('hidden', !this.options.state.match(test, this.model.get('internal')));"],"delete":["18","    this.listenTo(this.options.state, 'change:query', this.toggleHidden);","49","    this.$el.toggleClass('hidden', !this.options.state.match(test));"]}],"server\/sonar-web\/src\/main\/js\/apps\/api-documentation\/controller.js":[{"add":["64","      var model = actions.findWhere({ key: opts.action });","65","      if (model) {","66","        if (model.get('internal')) {","67","          this.options.state.set({ internal: true });","68","        }","69","        actionsView.scrollToAction(opts.action);","70","      }"],"delete":["64","      actionsView.scrollToAction(opts.action);"]}],"server\/sonar-web\/src\/main\/js\/apps\/api-documentation\/app.js":[{"add":["18","      this.state.match = function (test, internal) {","20","        var internalCheck = !this.get('internal') && internal;","21","        return test.search(pattern) !== -1 && !internalCheck;"],"delete":["18","      this.state.match = function (test) {","20","        return test.search(pattern) !== -1;"]}]}},"13f6e5ae548ebf531db529353bd29d4aeef9d2a8":{"changes":{"sonar-core\/src\/main\/resources\/org\/sonar\/l10n\/core.properties":"MODIFY"},"diff":{"sonar-core\/src\/main\/resources\/org\/sonar\/l10n\/core.properties":[{"add":["3225","onboarding.create_project.zero_alm_instances.gitlab=You must first configure a GitLab instance."],"delete":[]}]}},"ee23b84886f5dcf199165f4590d9705d07a60567":{"changes":{"server\/sonar-ce-task-projectanalysis\/src\/main\/java\/org\/sonar\/ce\/task\/projectanalysis\/measure\/Measure.java":"MODIFY"},"diff":{"server\/sonar-ce-task-projectanalysis\/src\/main\/java\/org\/sonar\/ce\/task\/projectanalysis\/measure\/Measure.java":[{"add":["42","    ERROR(\"Red\"),","43","","44","    \/**","45","     * @deprecated since 7.6, warning quality gates doesn't exist anymore on new analysis","46","     *\/","47","    @Deprecated","48","    WARN(\"Orange\");"],"delete":["42","    ERROR(\"Red\");"]}]}},"c93d2bf659c5fc869b05752789e2bb267a9decc5":{"changes":{"sonar-plugin-api-deps\/pom.xml":"MODIFY"},"diff":{"sonar-plugin-api-deps\/pom.xml":[{"add":["1","<project xmlns=\"http:\/\/maven.apache.org\/POM\/4.0.0\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\"","2","         xsi:schemaLocation=\"http:\/\/maven.apache.org\/POM\/4.0.0 http:\/\/maven.apache.org\/xsd\/maven-4.0.0.xsd\">","15","","135","      <exclusions>","136","        <exclusion>","137","          <groupId>org.codehaus.sonar<\/groupId>","138","          <artifactId>sonar-deprecated<\/artifactId>","139","        <\/exclusion>","140","        <exclusion>","141","          <groupId>org.codehaus.sonar<\/groupId>","142","          <artifactId>sonar-plugin-api<\/artifactId>","143","        <\/exclusion>","144","      <\/exclusions>"],"delete":["1","<project xmlns=\"http:\/\/maven.apache.org\/POM\/4.0.0\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" xsi:schemaLocation=\"http:\/\/maven.apache.org\/POM\/4.0.0 http:\/\/maven.apache.org\/xsd\/maven-4.0.0.xsd\">","14","  "]}]}},"7a421e5ba7a6a9fedcb89e110632f249df17895b":{"changes":{"server\/sonar-server\/src\/main\/java\/org\/sonar\/server\/qualityprofile\/RuleActivator.java":"MODIFY"},"diff":{"server\/sonar-server\/src\/main\/java\/org\/sonar\/server\/qualityprofile\/RuleActivator.java":[{"add":["132","    if (!changes.isEmpty()) {","133","      updateProfileDates(dbSession, context);","134","    }","135",""],"delete":["136","    if (!changes.isEmpty()) {","137","      updateProfileDates(dbSession, context);","138","    }"]}]}},"baa8e99e2e78f026c8389352e8a1be8b2fd574d6":{"changes":{"server\/sonar-web\/src\/main\/js\/apps\/security-hotspots\/components\/status\/Status.tsx":"MODIFY","server\/sonar-web\/src\/main\/js\/apps\/security-hotspots\/components\/status\/__tests__\/__snapshots__\/Status-test.tsx.snap":"MODIFY"},"diff":{"server\/sonar-web\/src\/main\/js\/apps\/security-hotspots\/components\/status\/Status.tsx":[{"add":["97","          {trigger}"],"delete":["97","          {actionableTrigger}"]}],"server\/sonar-web\/src\/main\/js\/apps\/security-hotspots\/components\/status\/__tests__\/__snapshots__\/Status-test.tsx.snap":[{"add":["299","    <div","300","      aria-expanded={false}","301","      aria-haspopup={true}","302","      className=\"padded bordered display-flex-column display-flex-justify-center readonly\"","303","      id=\"status-trigger\"","304","      onClick={[Function]}","305","      role=\"button\"","306","      tabIndex={0}","309","        className=\"display-flex-center display-flex-space-between\"","311","        <StatusDescription","312","          showTitle={true}","313","          statusOption=\"FIXED\"","314","        \/>","316","    <\/div>"],"delete":["299","    <Toggler","300","      closeOnClickOutside={true}","301","      closeOnEscape={true}","302","      onRequestClose={[Function]}","303","      open={false}","304","      overlay={","305","        <DropdownOverlay","306","          noPadding={true}","307","          placement=\"bottom\"","308","        >","309","          <StatusSelection","310","            hotspot={","311","              Object {","312","                \"assignee\": \"assignee\",","313","                \"assigneeUser\": Object {","314","                  \"active\": true,","315","                  \"local\": true,","316","                  \"login\": \"assignee\",","317","                  \"name\": \"John Doe\",","318","                },","319","                \"author\": \"author\",","320","                \"authorUser\": Object {","321","                  \"active\": true,","322","                  \"local\": true,","323","                  \"login\": \"author\",","324","                  \"name\": \"John Doe\",","325","                },","326","                \"canChangeStatus\": false,","327","                \"changelog\": Array [],","328","                \"comment\": Array [],","329","                \"component\": Object {","330","                  \"breadcrumbs\": Array [],","331","                  \"key\": \"my-project\",","332","                  \"name\": \"MyProject\",","333","                  \"organization\": \"foo\",","334","                  \"qualifier\": \"FIL\",","335","                  \"qualityGate\": Object {","336","                    \"isDefault\": true,","337","                    \"key\": \"30\",","338","                    \"name\": \"Sonar way\",","339","                  },","340","                  \"qualityProfiles\": Array [","341","                    Object {","342","                      \"deleted\": false,","343","                      \"key\": \"my-qp\",","344","                      \"language\": \"ts\",","345","                      \"name\": \"Sonar way\",","346","                    },","347","                  ],","348","                  \"tags\": Array [],","349","                },","350","                \"creationDate\": \"2013-05-13T17:55:41+0200\",","351","                \"key\": \"01fc972e-2a3c-433e-bcae-0bd7f88f5123\",","352","                \"line\": 142,","353","                \"message\": \"'3' is a magic number.\",","354","                \"project\": Object {","355","                  \"breadcrumbs\": Array [],","356","                  \"key\": \"my-project\",","357","                  \"name\": \"MyProject\",","358","                  \"organization\": \"foo\",","359","                  \"qualifier\": \"TRK\",","360","                  \"qualityGate\": Object {","361","                    \"isDefault\": true,","362","                    \"key\": \"30\",","363","                    \"name\": \"Sonar way\",","364","                  },","365","                  \"qualityProfiles\": Array [","366","                    Object {","367","                      \"deleted\": false,","368","                      \"key\": \"my-qp\",","369","                      \"language\": \"ts\",","370","                      \"name\": \"Sonar way\",","371","                    },","372","                  ],","373","                  \"tags\": Array [],","374","                },","375","                \"resolution\": \"FIXED\",","376","                \"rule\": Object {","377","                  \"fixRecommendations\": \"<p>This a <strong>strong<\/strong> message about fixing !<\/p>\",","378","                  \"key\": \"squid:S2077\",","379","                  \"name\": \"That rule\",","380","                  \"riskDescription\": \"<p>This a <strong>strong<\/strong> message about risk !<\/p>\",","381","                  \"securityCategory\": \"sql-injection\",","382","                  \"vulnerabilityDescription\": \"<p>This a <strong>strong<\/strong> message about vulnerability !<\/p>\",","383","                  \"vulnerabilityProbability\": \"HIGH\",","384","                },","385","                \"status\": \"REVIEWED\",","386","                \"textRange\": Object {","387","                  \"endLine\": 142,","388","                  \"endOffset\": 83,","389","                  \"startLine\": 142,","390","                  \"startOffset\": 26,","391","                },","392","                \"updateDate\": \"2013-05-13T17:55:42+0200\",","393","                \"users\": Array [","394","                  Object {","395","                    \"active\": true,","396","                    \"local\": true,","397","                    \"login\": \"assignee\",","398","                    \"name\": \"John Doe\",","399","                  },","400","                  Object {","401","                    \"active\": true,","402","                    \"local\": true,","403","                    \"login\": \"author\",","404","                    \"name\": \"John Doe\",","405","                  },","406","                ],","407","              }","408","            }","409","            onStatusOptionChange={[Function]}","410","          \/>","411","        <\/DropdownOverlay>","412","      }","415","        aria-expanded={false}","416","        aria-haspopup={true}","417","        className=\"padded bordered display-flex-column display-flex-justify-center readonly\"","418","        id=\"status-trigger\"","419","        onClick={[Function]}","420","        role=\"button\"","421","        tabIndex={0}","423","        <div","424","          className=\"display-flex-center display-flex-space-between\"","425","        >","426","          <StatusDescription","427","            showTitle={true}","428","            statusOption=\"FIXED\"","429","          \/>","430","        <\/div>","432","    <\/Toggler>"]}]}},"4882ea80f8b10706fef9d6b9a325f8820dde75e3":{"changes":{"server\/sonar-ce-task-projectanalysis\/src\/test\/java\/org\/sonar\/ce\/task\/projectanalysis\/step\/BuildComponentTreeStepTest.java":"MODIFY","server\/sonar-ce-task-projectanalysis\/src\/main\/java\/org\/sonar\/ce\/task\/projectanalysis\/component\/ComponentTreeBuilder.java":"MODIFY"},"diff":{"server\/sonar-ce-task-projectanalysis\/src\/test\/java\/org\/sonar\/ce\/task\/projectanalysis\/step\/BuildComponentTreeStepTest.java":[{"add":["42","import org.sonar.db.component.BranchType;","83","  private static final String REPORT_UNCHANGED_FILE_PATH = \"src\/main\/File3.java\";","138","  public void verify_tree_is_correctly_built_in_prs() {","139","    setAnalysisMetadataHolder(true);","140","    reportReader.putComponent(component(ROOT_REF, PROJECT, REPORT_PROJECT_KEY, FILE_1_REF, FILE_2_REF, FILE_3_REF, UNCHANGED_FILE_REF));","141","    reportReader.putComponent(componentWithPath(FILE_1_REF, FILE, REPORT_FILE_PATH_1));","142","    reportReader.putComponent(componentWithPath(FILE_2_REF, FILE, REPORT_FILE_PATH_2));","143","    reportReader.putComponent(componentWithPath(FILE_3_REF, FILE, REPORT_FILE_PATH_3));","144","    reportReader.putComponent(unchangedComponentWithPath(UNCHANGED_FILE_REF, FILE, REPORT_UNCHANGED_FILE_PATH));","145","","146","    TestComputationStepContext context = new TestComputationStepContext();","147","    underTest.execute(context);","148","","149","    \/\/ modified root","150","    Component mRoot = treeRootHolder.getRoot();","151","    verifyComponent(mRoot, Component.Type.PROJECT, ROOT_REF, 1);","152","","153","    Component mDir = mRoot.getChildren().get(0);","154","    assertThat(mDir.getName()).isEqualTo(\"src\/main\/java\");","155","    verifyComponent(mDir, Component.Type.DIRECTORY, null, 2);","156","","157","    Component mDir1 = mDir.getChildren().get(0);","158","    assertThat(mDir1.getName()).isEqualTo(\"src\/main\/java\/dir1\");","159","    verifyComponent(mDir1, Component.Type.DIRECTORY, null, 1);","160","    verifyComponent(mDir1.getChildren().get(0), Component.Type.FILE, FILE_1_REF, 0);","161","","162","    Component mDir2 = mDir.getChildren().get(1);","163","    assertThat(mDir2.getName()).isEqualTo(\"src\/main\/java\/dir2\");","164","    verifyComponent(mDir2, Component.Type.DIRECTORY, null, 2);","165","    verifyComponent(mDir2.getChildren().get(0), Component.Type.FILE, FILE_2_REF, 0);","166","    verifyComponent(mDir2.getChildren().get(1), Component.Type.FILE, FILE_3_REF, 0);","167","","168","    \/\/ root","169","    Component root = treeRootHolder.getReportTreeRoot();","170","    verifyComponent(root, Component.Type.PROJECT, ROOT_REF, 1);","171","","172","    Component dir = root.getChildren().get(0);","173","    assertThat(dir.getName()).isEqualTo(\"src\/main\");","174","    verifyComponent(dir, Component.Type.DIRECTORY, null, 2);","175","","176","    Component dir1 = dir.getChildren().get(0);","177","    assertThat(dir1.getName()).isEqualTo(\"src\/main\/java\");","178","    verifyComponent(dir1, Component.Type.DIRECTORY, null, 2);","179","    verifyComponent(dir1.getChildren().get(0), Component.Type.DIRECTORY, null, 1);","180","    verifyComponent(dir1.getChildren().get(1), Component.Type.DIRECTORY, null, 2);","181","","182","    Component dir2 = dir1.getChildren().get(0);","183","    assertThat(dir2.getName()).isEqualTo(\"src\/main\/java\/dir1\");","184","    verifyComponent(dir2, Component.Type.DIRECTORY, null, 1);","185","    verifyComponent(dir2.getChildren().get(0), Component.Type.FILE, FILE_1_REF, 0);","186","","187","    Component dir3 = dir1.getChildren().get(1);","188","    assertThat(dir3.getName()).isEqualTo(\"src\/main\/java\/dir2\");","189","    verifyComponent(dir3, Component.Type.DIRECTORY, null, 2);","190","    verifyComponent(dir3.getChildren().get(0), Component.Type.FILE, FILE_2_REF, 0);","191","    verifyComponent(dir3.getChildren().get(1), Component.Type.FILE, FILE_3_REF, 0);","192","","193","    context.getStatistics().assertValue(\"components\", 7);","194","  }","195","","196","  @Test","485","    return component(componentRef, componentType, key, FileStatus.CHANGED, null, children);","486","  }","487","","488","  private static ScannerReport.Component unchangedComponentWithPath(int componentRef, ComponentType componentType, String path, int... children) {","489","    return component(componentRef, componentType, REPORT_PROJECT_KEY + \":\" + path, FileStatus.SAME, path, children);","493","    return component(componentRef, componentType, REPORT_PROJECT_KEY + \":\" + path, FileStatus.CHANGED, path, children);","496","  private static ScannerReport.Component component(int componentRef, ComponentType componentType, String key, FileStatus status, @Nullable String path, int... children) {","500","      .setStatus(status)","553","    setAnalysisMetadataHolder(false);","554","  }","555","","556","  private void setAnalysisMetadataHolder(boolean isPr) {","557","    Branch branch = isPr ? new PrBranch() : new DefaultBranchImpl();","560","      .setBranch(branch)","573","  private static class PrBranch extends DefaultBranchImpl {","574","    @Override","575","    public BranchType getType() {","576","      return BranchType.PULL_REQUEST;","577","    }","578","  }"],"delete":["76","  private static final String REPORT_MODULE_KEY = \"MODULE_KEY\";","83","  private static final String REPORT_LEAFLESS_MODULE_KEY = \"LEAFLESS_MODULE_KEY\";","84","  private static final String REPORT_LEAFLESS_DIR_PATH = \"src\/main\/java\/leafless\";","85","  private static final String REPORT_UNCHANGED_FILE_PATH = \"src\/main\/java\/leafless\/File3.java\";","428","    return component(componentRef, componentType, key, null, children);","432","    return component(componentRef, componentType, REPORT_PROJECT_KEY + \":\" + path, path, children);","435","  private static ScannerReport.Component component(int componentRef, ComponentType componentType, String key, @Nullable String path, int... children) {","439","      .setStatus(FileStatus.UNAVAILABLE)","494","      .setBranch(new DefaultBranchImpl())"]}],"server\/sonar-ce-task-projectanalysis\/src\/main\/java\/org\/sonar\/ce\/task\/projectanalysis\/component\/ComponentTreeBuilder.java":[{"add":["43","import static org.sonar.scanner.protocol.output.ScannerReport.Component.ComponentType.FILE;","98","    checkArgument(rootComponent.getType() == ScannerReport.Component.ComponentType.PROJECT, \"Expected root component of type 'PROJECT'\");","101","    rootComponent.getChildRefList().stream()","110","      checkArgument(component.getType() == FILE, \"Unsupported component type '%s'\", component.getType());","111","      addFile(root, component);","117","    checkArgument(!StringUtils.isEmpty(file.getProjectRelativePath()), \"Files should have a project relative path: \" + file);","132","      if (component.getType() == FILE) {","215","    return buildChangedComponentTree(project, \"\");","218","  @Nullable","219","  private static Component buildChangedComponentTree(Component component, String parentPath) {","220","    switch (component.getType()) {","221","      case PROJECT:","222","        return buildChangedProject(component);","223","      case DIRECTORY:","224","        return buildChangedDirectory(component, parentPath);","225","      case FILE:","226","        return buildChangedFile(component);","227","      default:","228","        throw new IllegalArgumentException(format(\"Unsupported component type '%s'\", component.getType()));","229","    }","230","  }","231","","232","  private static Component buildChangedProject(Component component) {","233","    return changedComponentBuilder(component, \"\", \"\")","234","      .setProjectAttributes(new ProjectAttributes(component.getProjectAttributes()))","235","      .addChildren(buildChangedComponentChildren(component))","236","      .build();","237","  }","238","","239","  @Nullable","240","  private static Component buildChangedDirectory(Component component, String parentPath) {","241","    List<Component> children = buildChangedComponentChildren(component);","242","    if (children.isEmpty()) {","243","      return null;","244","    }","245","","246","    if (children.size() == 1 && children.get(0).getType() == Component.Type.DIRECTORY) {","247","      Component child = children.get(0);","248","      return changedComponentBuilder(child, parentPath, child.getName())","249","        .addChildren(child.getChildren())","250","        .build();","251","    } else {","252","      return changedComponentBuilder(component, parentPath, component.getName())","253","        .addChildren(children)","254","        .build();","255","    }","256","  }","257","","258","  private static List<Component> buildChangedComponentChildren(Component component) {","259","    return component.getChildren().stream()","260","      .map(c -> ComponentTreeBuilder.buildChangedComponentTree(c, component.getName()))","261","      .filter(Objects::nonNull)","262","      .collect(MoreCollectors.toList());","263","  }","264","","265","  private static ComponentImpl.Builder changedComponentBuilder(Component component, String parentPath, String path) {","273","      .setShortName(removeStart(removeStart(path, parentPath), \"\/\"))","282","    return component;","339","    checkArgument(component.getType() == FILE);"],"delete":["21","import com.google.common.base.Preconditions;","66","  @Nullable","99","    Preconditions.checkArgument(rootComponent.getType() == ScannerReport.Component.ComponentType.PROJECT, \"Expected root component of type 'PROJECT'\");","102","    rootComponent.getChildRefList()","103","      .stream()","112","      switch (component.getType()) {","113","        case FILE:","114","          addFile(root, component);","115","          break;","116","        default:","117","          throw new IllegalArgumentException(format(\"Unsupported component type '%s'\", component.getType()));","118","      }","124","    Preconditions.checkArgument(!StringUtils.isEmpty(file.getProjectRelativePath()), \"Files should have a project relative path: \" + file);","139","      if (component.getType() == ScannerReport.Component.ComponentType.FILE) {","222","    return buildChangedComponentTree(project);","225","  private static ComponentImpl.Builder changedComponentBuilder(Component component) {","233","      .setShortName(component.getShortName())","238","  private static Component buildChangedComponentTree(Component component) {","239","    switch (component.getType()) {","240","      case PROJECT:","241","        return buildChangedProject(component);","242","      case DIRECTORY:","243","        return buildChangedIntermediate(component);","244","      case FILE:","245","        return buildChangedFile(component);","246","","247","      default:","248","        throw new IllegalArgumentException(format(\"Unsupported component type '%s'\", component.getType()));","249","    }","250","  }","251","","252","  private static Component buildChangedProject(Component component) {","253","    return changedComponentBuilder(component)","254","      .setProjectAttributes(new ProjectAttributes(component.getProjectAttributes()))","255","      .addChildren(buildChangedComponentChildren(component))","256","      .build();","257","  }","258","","259","  @Nullable","260","  private static Component buildChangedIntermediate(Component component) {","261","    List<Component> children = buildChangedComponentChildren(component);","262","    if (children.isEmpty()) {","263","      return null;","264","    }","265","    return changedComponentBuilder(component)","266","      .addChildren(children)","267","      .build();","268","  }","269","","270","  @Nullable","275","    return changedComponentBuilder(component)","276","      .setFileAttributes(component.getFileAttributes())","277","      .build();","278","  }","279","","280","  private static List<Component> buildChangedComponentChildren(Component component) {","281","    return component.getChildren()","282","      .stream()","283","      .map(ComponentTreeBuilder::buildChangedComponentTree)","284","      .filter(Objects::nonNull)","285","      .collect(MoreCollectors.toList());","342","    checkArgument(component.getType() == ScannerReport.Component.ComponentType.FILE);"]}]}},"46a60dac2e0603911843f85298745dbfa7e079ac":{"changes":{"server\/sonar-web\/src\/main\/js\/apps\/component-measures\/components\/MeasureContent.tsx":"MODIFY","server\/sonar-web\/src\/main\/js\/components\/hoc\/withKeyboardNavigation.tsx":"MODIFY","\/dev\/null":"DELETE","server\/sonar-web\/src\/main\/js\/apps\/component-measures\/style.css":"MODIFY","server\/sonar-web\/src\/main\/js\/components\/ui\/PageActions.tsx":"MODIFY","server\/sonar-web\/src\/main\/js\/components\/ui\/__tests__\/__snapshots__\/PageActions-test.tsx.snap":"MODIFY","server\/sonar-web\/src\/main\/js\/components\/hoc\/__tests__\/withKeyboardNavigation-test.tsx":"MODIFY","server\/sonar-docs\/src\/pages\/user-guide\/keyboard-shortcuts.md":"MODIFY","server\/sonar-web\/src\/main\/js\/apps\/component-measures\/components\/MeasureOverview.tsx":"MODIFY","server\/sonar-web\/src\/main\/js\/components\/ui\/__tests__\/PageActions-test.tsx":"MODIFY","server\/sonar-web\/src\/main\/js\/helpers\/testUtils.ts":"MODIFY"},"diff":{"server\/sonar-web\/src\/main\/js\/apps\/component-measures\/components\/MeasureContent.tsx":[{"add":["27","import SourceViewer from '..\/..\/..\/components\/SourceViewer\/SourceViewer';","305","    const { baseComponent, measure, metric, paging, secondaryMeasure } = this.state;","336","                        <>","337","                          <MeasureViewSelect","338","                            className=\"measure-view-select big-spacer-right\"","339","                            handleViewChange={this.updateView}","340","                            metric={metric}","341","                            view={view}","342","                          \/>","343","","344","                          <PageActions","345","                            current={","346","                              selectedIdx !== undefined && view !== 'treemap'","347","                                ? selectedIdx + 1","348","                                : undefined","349","                            }","350","                            showShortcuts={['list', 'tree'].includes(view)}","351","                            total={paging && paging.total}","352","                          \/>","353","                        <\/>","371","          {isFile ? (","372","            <div className=\"measure-details-viewer\">","373","              <SourceViewer branchLike={branchLike} component={baseComponent.key} \/>","374","            <\/div>","375","          ) : (","376","            this.renderMeasure()","377","          )}"],"delete":["27","import CodeView from '..\/drilldown\/CodeView';","265","  renderCode() {","266","    return (","267","      <div className=\"measure-details-viewer\">","268","        <CodeView","269","          branchLike={this.props.branchLike}","270","          component={this.state.baseComponent!}","271","          components={this.state.components}","272","          leakPeriod={this.props.leakPeriod}","273","          selectedIdx={this.getSelectedIndex()}","274","          updateSelected={this.updateSelected}","275","        \/>","276","      <\/div>","277","    );","278","  }","279","","320","    const { baseComponent, measure, metric, secondaryMeasure } = this.state;","351","                        <MeasureViewSelect","352","                          className=\"measure-view-select big-spacer-right\"","353","                          handleViewChange={this.updateView}","354","                          metric={metric}","355","                          view={view}","356","                        \/>","358","                    <PageActions","359","                      current={","360","                        selectedIdx !== undefined && view !== 'treemap'","361","                          ? selectedIdx + 1","362","                          : undefined","363","                      }","364","                      isFile={isFile}","365","                      paging={this.state.paging}","366","                      showShortcuts={['list', 'tree'].includes(view)}","367","                      totalLoadedComponents={this.state.components.length}","368","                    \/>","385","          {isFile ? this.renderCode() : this.renderMeasure()}"]}],"server\/sonar-web\/src\/main\/js\/components\/hoc\/withKeyboardNavigation.tsx":[{"add":["161","          <PageActions showShortcuts={!this.props.isFile} \/>"],"delete":["66","      key('k', KEY_SCOPE, () => {","67","        return this.skipIfNotFile(this.handleSelectPrevious);","68","      });","69","      key('j', KEY_SCOPE, () => {","70","        return this.skipIfNotFile(this.handleSelectNext);","71","      });","92","    skipIfNotFile = (handler: () => void) => {","93","      if (this.props.isFile) {","94","        handler();","95","        return false;","96","      } else {","97","        return true;","98","      }","99","    };","100","","174","      const { components = [], isFile } = this.props;","175","      const index = this.getCurrentIndex();","176","","179","          <PageActions","180","            current={index > -1 ? index + 1 : undefined}","181","            isFile={isFile}","182","            showPaging={isFile && index > -1}","183","            showShortcuts={true}","184","            totalLoadedComponents={components.length}","185","          \/>"]}],"\/dev\/null":[{"add":[],"delete":[]}],"server\/sonar-web\/src\/main\/js\/apps\/component-measures\/style.css":[{"add":[],"delete":["66",".measure-details-page-actions {","67","  display: inline-block;","68","  text-align: right;","69","}","70","","71",".measure-details-page-actions .spinner {","72","  vertical-align: text-bottom;","73","}","74",""]}],"server\/sonar-web\/src\/main\/js\/components\/ui\/PageActions.tsx":[{"add":["23","export interface Props {","26","  total?: number;","30","  const { current, showShortcuts, total = 0 } = props;","34","      {showShortcuts && (","35","        <span className=\"note nowrap\">","36","          <span className=\"big-spacer-right\">","37","            <span className=\"shortcut-button little-spacer-right\">↑<\/span>","38","            <span className=\"shortcut-button little-spacer-right\">↓<\/span>","39","            {translate('component_measures.to_select_files')}","40","          <\/span>","41","","42","          <span>","43","            <span className=\"shortcut-button little-spacer-right\">←<\/span>","44","            <span className=\"shortcut-button little-spacer-right\">→<\/span>","45","            {translate('component_measures.to_navigate')}","46","          <\/span>","47","        <\/span>","48","      )}","50","        <div className=\"nowrap\">","51","          <FilesCounter className=\"big-spacer-left\" current={current} total={total} \/>"],"delete":["23","interface Props {","25","  isFile?: boolean;","26","  paging?: T.Paging;","27","  showPaging?: boolean;","29","  totalLoadedComponents?: number;","33","  const { isFile, paging, showPaging, showShortcuts, totalLoadedComponents } = props;","34","  let total = 0;","35","","36","  if (showPaging && totalLoadedComponents) {","37","    total = totalLoadedComponents;","38","  } else if (paging !== undefined) {","39","    total = isFile && totalLoadedComponents ? totalLoadedComponents : paging.total;","40","  }","44","      {!isFile && showShortcuts && renderShortcuts()}","45","      {isFile && (paging || showPaging) && renderFileShortcuts()}","47","        <div className=\"measure-details-page-actions nowrap\">","48","          <FilesCounter className=\"big-spacer-left\" current={props.current} total={total} \/>","54","","55","function renderShortcuts() {","56","  return (","57","    <span className=\"note nowrap\">","58","      <span className=\"big-spacer-right\">","59","        <span className=\"shortcut-button little-spacer-right\">↑<\/span>","60","        <span className=\"shortcut-button little-spacer-right\">↓<\/span>","61","        {translate('component_measures.to_select_files')}","62","      <\/span>","63","","64","      <span>","65","        <span className=\"shortcut-button little-spacer-right\">←<\/span>","66","        <span className=\"shortcut-button little-spacer-right\">→<\/span>","67","        {translate('component_measures.to_navigate')}","68","      <\/span>","69","    <\/span>","70","  );","71","}","72","","73","function renderFileShortcuts() {","74","  return (","75","    <span className=\"note nowrap\">","76","      <span>","77","        <span className=\"shortcut-button little-spacer-right\">j<\/span>","78","        <span className=\"shortcut-button little-spacer-right\">k<\/span>","79","        {translate('component_measures.to_navigate_files')}","80","      <\/span>","81","    <\/span>","82","  );","83","}"]}],"server\/sonar-web\/src\/main\/js\/components\/ui\/__tests__\/__snapshots__\/PageActions-test.tsx.snap":[{"add":["2","exports[`should render correctly 1`] = `","41","exports[`should render correctly 2`] = `","42","<div","43","  className=\"page-actions display-flex-center\"","44",">","45","  <span","46","    className=\"note nowrap\"","47","  >","48","    <span","49","      className=\"big-spacer-right\"","50","    >","51","      <span","52","        className=\"shortcut-button little-spacer-right\"","53","      >","54","        ↑","55","      <\/span>","56","      <span","57","        className=\"shortcut-button little-spacer-right\"","58","      >","59","        ↓","60","      <\/span>","61","      component_measures.to_select_files","62","    <\/span>","63","    <span>","64","      <span","65","        className=\"shortcut-button little-spacer-right\"","66","      >","67","        ←","68","      <\/span>","69","      <span","70","        className=\"shortcut-button little-spacer-right\"","71","      >","72","        →","73","      <\/span>","74","      component_measures.to_navigate","75","    <\/span>","76","  <\/span>","77","  <div","78","    className=\"nowrap\"","79","  >","80","    <FilesCounter","81","      className=\"big-spacer-left\"","82","      total={10}","83","    \/>","84","  <\/div>","85","<\/div>","86","`;","87","","88","exports[`should render correctly 3`] = `","93","    className=\"nowrap\""],"delete":["2","exports[`should display correctly for a file 1`] = `","3","<div","4","  className=\"page-actions display-flex-center\"","5","\/>","6","`;","7","","8","exports[`should display correctly for a file 2`] = `","9","<div","10","  className=\"page-actions display-flex-center\"","11",">","12","  <span","13","    className=\"note nowrap\"","14","  >","15","    <span>","16","      <span","17","        className=\"shortcut-button little-spacer-right\"","18","      >","19","        j","20","      <\/span>","21","      <span","22","        className=\"shortcut-button little-spacer-right\"","23","      >","24","        k","25","      <\/span>","26","      component_measures.to_navigate_files","27","    <\/span>","28","  <\/span>","29","  <div","30","    className=\"measure-details-page-actions nowrap\"","31","  >","32","    <FilesCounter","33","      className=\"big-spacer-left\"","34","      total={10}","35","    \/>","36","  <\/div>","37","<\/div>","38","`;","39","","40","exports[`should display correctly for a project 1`] = `","79","exports[`should display the total of files 1`] = `","84","    className=\"measure-details-page-actions nowrap\"","94","","95","exports[`should display the total of files 2`] = `","96","<div","97","  className=\"page-actions display-flex-center\"","98",">","99","  <span","100","    className=\"note nowrap\"","101","  >","102","    <span>","103","      <span","104","        className=\"shortcut-button little-spacer-right\"","105","      >","106","        j","107","      <\/span>","108","      <span","109","        className=\"shortcut-button little-spacer-right\"","110","      >","111","        k","112","      <\/span>","113","      component_measures.to_navigate_files","114","    <\/span>","115","  <\/span>","116","  <div","117","    className=\"measure-details-page-actions nowrap\"","118","  >","119","    <FilesCounter","120","      className=\"big-spacer-left\"","121","      current={12}","122","      total={20}","123","    \/>","124","  <\/div>","125","<\/div>","126","`;","127","","128","exports[`should not display shortcuts for treemap 1`] = `","129","<div","130","  className=\"page-actions display-flex-center\"","131","\/>","132","`;"]}],"server\/sonar-web\/src\/main\/js\/components\/hoc\/__tests__\/withKeyboardNavigation-test.tsx":[{"add":["132","it('should correctly bind key events for codeview navigation', () => {"],"delete":["132","it('should correctly bind key events for sibling navigation', () => {","151","  expect(onSelect).not.toBeCalled();","155","  expect(onSelect).not.toBeCalled();","158","  expect(onHighlight).not.toBeCalled();","162","  expect(onHighlight).not.toBeCalled();","165","  keydown('j');","166","  expect(onSelect).toBeCalledWith(COMPONENTS[2]);","167","","168","  keydown('k');","169","  expect(onSelect).toBeCalledWith(COMPONENTS[0]);","170",""]}],"server\/sonar-docs\/src\/pages\/user-guide\/keyboard-shortcuts.md":[{"add":[],"delete":["44","| `j` `k`  | switch between files                          |"]}],"server\/sonar-web\/src\/main\/js\/apps\/component-measures\/components\/MeasureOverview.tsx":[{"add":["136","    const { paging } = this.state;","156","                    total={paging && paging.total}"],"delete":["136","    const isFile = isFileType(component);","156","                    isFile={isFile}","157","                    paging={this.state.paging}"]}],"server\/sonar-web\/src\/main\/js\/components\/ui\/__tests__\/PageActions-test.tsx":[{"add":["21","import PageActions, { Props } from '..\/PageActions';","23","it('should render correctly', () => {","24","  expect(shallowRender()).toMatchSnapshot();","25","  expect(shallowRender({ total: 10 })).toMatchSnapshot();","26","  expect(shallowRender({ current: 12, showShortcuts: false, total: 120 })).toMatchSnapshot();","29","function shallowRender(props: Partial<Props> = {}) {","30","  return shallow(<PageActions showShortcuts={true} {...props} \/>);","31","}"],"delete":["21","import PageActions from '..\/PageActions';","23","const PAGING = {","24","  pageIndex: 1,","25","  pageSize: 100,","26","  total: 120","27","};","28","","29","it('should display correctly for a project', () => {","30","  expect(","31","    shallow(<PageActions isFile={false} showShortcuts={true} totalLoadedComponents={20} \/>)","32","  ).toMatchSnapshot();","35","it('should display correctly for a file', () => {","36","  const wrapper = shallow(","37","    <PageActions isFile={true} showShortcuts={true} totalLoadedComponents={10} \/>","38","  );","39","  expect(wrapper).toMatchSnapshot();","40","  wrapper.setProps({ paging: { total: 100 } });","41","  expect(wrapper).toMatchSnapshot();","42","});","43","","44","it('should not display shortcuts for treemap', () => {","45","  expect(","46","    shallow(<PageActions isFile={false} showShortcuts={false} totalLoadedComponents={20} \/>)","47","  ).toMatchSnapshot();","48","});","49","","50","it('should display the total of files', () => {","51","  expect(","52","    shallow(","53","      <PageActions","54","        current={12}","55","        isFile={false}","56","        paging={PAGING}","57","        showShortcuts={false}","58","        totalLoadedComponents={20}","59","      \/>","60","    )","61","  ).toMatchSnapshot();","62","  expect(","63","    shallow(","64","      <PageActions","65","        current={12}","66","        isFile={true}","67","        paging={PAGING}","68","        showShortcuts={true}","69","        totalLoadedComponents={20}","70","      \/>","71","    )","72","  ).toMatchSnapshot();","73","});"]}],"server\/sonar-web\/src\/main\/js\/helpers\/testUtils.ts":[{"add":["75","  40: 'down'"],"delete":["75","  40: 'down',","76","  74: 'j',","77","  75: 'k'"]}]}},"8d3059a3f0b2d64261b44a55189348f0f54e7da8":{"changes":{"\/dev\/null":"DELETE","server\/sonar-web\/src\/main\/js\/apps\/quality-gates\/components\/Conditions.js":"MODIFY","sonar-core\/src\/main\/resources\/org\/sonar\/l10n\/core.properties":"MODIFY"},"diff":{"\/dev\/null":[{"add":[],"delete":[]}],"server\/sonar-web\/src\/main\/js\/apps\/quality-gates\/components\/Conditions.js":[{"add":["90","      <div className=\"quality-gate-section\" id=\"quality-gate-conditions\">","93","        <div className=\"big-spacer-bottom\">{translate('quality_gates.introduction')}<\/div>","109","          <table className=\"data zebra zebra-hover\" id=\"quality-gate-conditions\">"],"delete":["21","import ConditionsAlert from '.\/ConditionsAlert';","91","      <div id=\"quality-gate-conditions\" className=\"quality-gate-section\">","94","        <ConditionsAlert \/>","110","          <table id=\"quality-gate-conditions\" className=\"data zebra zebra-hover\">"]}],"sonar-core\/src\/main\/resources\/org\/sonar\/l10n\/core.properties":[{"add":[],"delete":["1358","alerts.notes.ok=at least one threshold is defined, no threshold is reached.","1359","alerts.notes.warn=at least one warning threshold is reached, no error threshold is reached.","1360","alerts.notes.error=at least one error threshold is reached."]}]}},"4b95ba35055b4177816a4857fad6413ea12def73":{"changes":{"server\/sonar-db-dao\/src\/main\/resources\/org\/sonar\/db\/purge\/PurgeMapper.xml":"MODIFY","server\/sonar-db-dao\/src\/main\/java\/org\/sonar\/db\/purge\/PurgeMapper.java":"MODIFY","server\/sonar-db-dao\/src\/test\/java\/org\/sonar\/db\/purge\/PurgeDaoTest.java":"MODIFY","server\/sonar-db-dao\/src\/main\/java\/org\/sonar\/db\/purge\/PurgeDao.java":"MODIFY"},"diff":{"server\/sonar-db-dao\/src\/main\/resources\/org\/sonar\/db\/purge\/PurgeMapper.xml":[{"add":["48","    <select id=\"selectStaleShortLivingBranchesAndPullRequests\" parameterType=\"map\" resultType=\"String\">","55","        and (pb.branch_type='SHORT' or pb.branch_type='PULL_REQUEST')"],"delete":["48","    <select id=\"selectStaleShortLivingBranches\" parameterType=\"map\" resultType=\"String\">","55","        and pb.branch_type='SHORT'"]}],"server\/sonar-db-dao\/src\/main\/java\/org\/sonar\/db\/purge\/PurgeMapper.java":[{"add":["82","  List<String> selectStaleShortLivingBranchesAndPullRequests(@Param(\"mainBranchProjectUuid\") String mainBranchProjectUuid, @Param(\"toDate\") Long toDate);"],"delete":["82","  List<String> selectStaleShortLivingBranches(@Param(\"mainBranchProjectUuid\") String mainBranchProjectUuid, @Param(\"toDate\") Long toDate);"]}],"server\/sonar-db-dao\/src\/test\/java\/org\/sonar\/db\/purge\/PurgeDaoTest.java":[{"add":["139","  public void purge_inactive_pull_request() {","140","    when(system2.now()).thenReturn(new Date().getTime());","141","    RuleDefinitionDto rule = dbTester.rules().insert();","142","    ComponentDto project = dbTester.components().insertMainBranch();","143","    ComponentDto longBranch = dbTester.components().insertProjectBranch(project);","144","    ComponentDto recentPullRequest = dbTester.components().insertProjectBranch(project, b -> b.setBranchType(BranchType.PULL_REQUEST));","145","","146","    \/\/ pull request with other components and issues, updated 31 days ago","147","    when(system2.now()).thenReturn(DateUtils.addDays(new Date(), -31).getTime());","148","    ComponentDto pullRequest = dbTester.components().insertProjectBranch(project, b -> b.setBranchType(BranchType.PULL_REQUEST));","149","    ComponentDto module = dbTester.components().insertComponent(newModuleDto(pullRequest));","150","    ComponentDto subModule = dbTester.components().insertComponent(newModuleDto(module));","151","    ComponentDto file = dbTester.components().insertComponent(newFileDto(subModule));","152","    dbTester.issues().insert(rule, pullRequest, file);","153","    dbTester.issues().insert(rule, pullRequest, subModule);","154","    dbTester.issues().insert(rule, pullRequest, module);","155","","156","    \/\/ back to present","157","    when(system2.now()).thenReturn(new Date().getTime());","158","    underTest.purge(dbSession, newConfigurationWith30Days(system2, project.uuid()), PurgeListener.EMPTY, new PurgeProfiler());","159","    dbSession.commit();","160","","161","    assertThat(getUuidsInTableProjects()).containsOnly(project.uuid(), longBranch.uuid(), recentPullRequest.uuid());","162","  }","163","","164","  @Test"],"delete":[]}],"server\/sonar-db-dao\/src\/main\/java\/org\/sonar\/db\/purge\/PurgeDao.java":[{"add":["80","    List<String> branchUuids = mapper.selectStaleShortLivingBranchesAndPullRequests(rootUuid, dateToLong(maxDate.get()));"],"delete":["80","    List<String> branchUuids = mapper.selectStaleShortLivingBranches(rootUuid, dateToLong(maxDate.get()));"]}]}},"497c52c32eec22b058284e3d51ff775f3be2cbcc":{"changes":{"server\/sonar-web\/src\/main\/js\/apps\/quality-profiles\/home\/PageHeader.tsx":"MODIFY","server\/sonar-web\/src\/main\/js\/apps\/quality-profiles\/home\/__tests__\/PageHeader-test.tsx":"ADD","server\/sonar-web\/src\/main\/js\/apps\/quality-profiles\/home\/__tests__\/__snapshots__\/PageHeader-test.tsx.snap":"ADD","sonar-core\/src\/main\/resources\/org\/sonar\/l10n\/core.properties":"MODIFY","server\/sonar-web\/src\/main\/js\/app\/styles\/components\/page.css":"MODIFY"},"diff":{"server\/sonar-web\/src\/main\/js\/apps\/quality-profiles\/home\/PageHeader.tsx":[{"add":["26","import { Alert } from '..\/..\/..\/components\/ui\/Alert';","45","export class PageHeader extends React.PureComponent<Props, State> {","79","    const { actions, languages, organization, profiles } = this.props;","84","        {actions.create && (","86","            <Button","87","              disabled={languages.length === 0}","88","              id=\"quality-profiles-create\"","89","              onClick={this.handleCreateClick}>","98","            {languages.length === 0 && (","99","              <Alert className=\"spacer-top\" variant=\"warning\">","100","                {translate('quality_profiles.no_languages_available')}","101","              <\/Alert>","102","            )}","124","            organization={organization}","130","            languages={languages}","133","            organization={organization}","134","            profiles={profiles}"],"delete":["44","class PageHeader extends React.PureComponent<Props, State> {","82","        {this.props.actions.create && (","84","            <Button id=\"quality-profiles-create\" onClick={this.handleCreateClick}>","114","            organization={this.props.organization}","120","            languages={this.props.languages}","123","            organization={this.props.organization}","124","            profiles={this.props.profiles}"]}],"server\/sonar-web\/src\/main\/js\/apps\/quality-profiles\/home\/__tests__\/PageHeader-test.tsx":[{"add":[],"delete":[]}],"server\/sonar-web\/src\/main\/js\/apps\/quality-profiles\/home\/__tests__\/__snapshots__\/PageHeader-test.tsx.snap":[{"add":[],"delete":[]}],"sonar-core\/src\/main\/resources\/org\/sonar\/l10n\/core.properties":[{"add":["1143","quality_profiles.no_languages_available=There are no languages available. You cannot create a new profile."],"delete":[]}],"server\/sonar-web\/src\/main\/js\/app\/styles\/components\/page.css":[{"add":["111","  text-align: right;"],"delete":[]}]}},"251688c71106c7dd8c58a04be9a6f4e3e42ca37d":{"changes":{"\/dev\/null":"DELETE","server\/sonar-ce-task-projectanalysis\/src\/test\/java\/org\/sonar\/ce\/task\/projectanalysis\/step\/PersistDuplicationDataStepTest.java":"ADD","server\/sonar-ce-task-projectanalysis\/src\/main\/java\/org\/sonar\/ce\/task\/projectanalysis\/step\/ReportComputationSteps.java":"MODIFY","server\/sonar-ce-task-projectanalysis\/src\/main\/java\/org\/sonar\/ce\/task\/projectanalysis\/step\/PersistDuplicationDataStep.java":"ADD"},"diff":{"\/dev\/null":[{"add":[],"delete":[]}],"server\/sonar-ce-task-projectanalysis\/src\/test\/java\/org\/sonar\/ce\/task\/projectanalysis\/step\/PersistDuplicationDataStepTest.java":[{"add":[],"delete":[]}],"server\/sonar-ce-task-projectanalysis\/src\/main\/java\/org\/sonar\/ce\/task\/projectanalysis\/step\/ReportComputationSteps.java":[{"add":["95","    PersistDuplicationDataStep.class,"],"delete":["69","    DuplicationDataMeasuresStep.class,"]}],"server\/sonar-ce-task-projectanalysis\/src\/main\/java\/org\/sonar\/ce\/task\/projectanalysis\/step\/PersistDuplicationDataStep.java":[{"add":[],"delete":[]}]}},"3c1453a726a753e9f8e15a43d70d7e7ee1d835a8":{"changes":{"server\/sonar-db-migration\/src\/main\/java\/org\/sonar\/server\/platform\/db\/migration\/version\/v72\/AddUniqueIndexOnRulesParameters.java":"ADD","server\/sonar-db-migration\/src\/main\/java\/org\/sonar\/server\/platform\/db\/migration\/version\/v72\/PurgeDuplicateRulesParameters.java":"ADD","server\/sonar-db-migration\/src\/test\/java\/org\/sonar\/server\/platform\/db\/migration\/version\/v72\/PurgeDuplicateRulesParametersTest.java":"ADD","server\/sonar-db-migration\/src\/test\/resources\/org\/sonar\/server\/platform\/db\/migration\/version\/v72\/AddUniqueIndexOnRulesParametersTest\/rules_parameters.sql":"ADD","server\/sonar-server\/src\/test\/java\/org\/sonar\/server\/qualityprofile\/ws\/CompareActionTest.java":"MODIFY","server\/sonar-db-migration\/src\/main\/java\/org\/sonar\/server\/platform\/db\/migration\/version\/v72\/DbVersion72.java":"MODIFY","server\/sonar-db-migration\/src\/test\/resources\/org\/sonar\/server\/platform\/db\/migration\/version\/v72\/PurgeDuplicateRulesParametersTest\/rules_parameters_etc.sql":"ADD","server\/sonar-db-dao\/src\/test\/java\/org\/sonar\/db\/rule\/RuleDaoTest.java":"MODIFY","server\/sonar-db-migration\/src\/test\/java\/org\/sonar\/server\/platform\/db\/migration\/version\/v72\/AddUniqueIndexOnRulesParametersTest.java":"ADD","server\/sonar-db-core\/src\/main\/resources\/org\/sonar\/db\/version\/schema-h2.ddl":"MODIFY","server\/sonar-db-migration\/src\/test\/java\/org\/sonar\/server\/platform\/db\/migration\/version\/v72\/DbVersion72Test.java":"MODIFY"},"diff":{"server\/sonar-db-migration\/src\/main\/java\/org\/sonar\/server\/platform\/db\/migration\/version\/v72\/AddUniqueIndexOnRulesParameters.java":[{"add":[],"delete":[]}],"server\/sonar-db-migration\/src\/main\/java\/org\/sonar\/server\/platform\/db\/migration\/version\/v72\/PurgeDuplicateRulesParameters.java":[{"add":[],"delete":[]}],"server\/sonar-db-migration\/src\/test\/java\/org\/sonar\/server\/platform\/db\/migration\/version\/v72\/PurgeDuplicateRulesParametersTest.java":[{"add":[],"delete":[]}],"server\/sonar-db-migration\/src\/test\/resources\/org\/sonar\/server\/platform\/db\/migration\/version\/v72\/AddUniqueIndexOnRulesParametersTest\/rules_parameters.sql":[{"add":[],"delete":[]}],"server\/sonar-server\/src\/test\/java\/org\/sonar\/server\/qualityprofile\/ws\/CompareActionTest.java":[{"add":[],"delete":["210","    RuleParamDto param = RuleParamDto.createFor(ruleDefinition).setName(\"param_\" + id).setType(RuleParamType.STRING.toString());","211","    db.ruleDao().insertRuleParam(session, ruleDefinition, param);"]}],"server\/sonar-db-migration\/src\/main\/java\/org\/sonar\/server\/platform\/db\/migration\/version\/v72\/DbVersion72.java":[{"add":["57","      .add(2128, \"Purge duplicate rules_parameters and their orphans\", PurgeDuplicateRulesParameters.class)","58","      .add(2129, \"Add unique index on rule_id + name on rules_parameters\", AddUniqueIndexOnRulesParameters.class)"],"delete":[]}],"server\/sonar-db-migration\/src\/test\/resources\/org\/sonar\/server\/platform\/db\/migration\/version\/v72\/PurgeDuplicateRulesParametersTest\/rules_parameters_etc.sql":[{"add":[],"delete":[]}],"server\/sonar-db-dao\/src\/test\/java\/org\/sonar\/db\/rule\/RuleDaoTest.java":[{"add":["747","    RuleDefinitionDto ruleDefinitionDto = db.rules().insert();","749","    RuleParamDto orig = RuleParamDto.createFor(ruleDefinitionDto)","755","    underTest.insertRuleParam(db.getSession(), ruleDefinitionDto, orig);","757","    List<RuleParamDto> ruleParamDtos = underTest.selectRuleParamsByRuleKey(db.getSession(), ruleDefinitionDto.getKey());","758","    assertThat(ruleParamDtos).hasSize(1);","759","","760","    RuleParamDto loaded = ruleParamDtos.get(0);","761","    assertThat(loaded.getRuleId()).isEqualTo(orig.getRuleId());","762","    assertThat(loaded.getName()).isEqualTo(orig.getName());","763","    assertThat(loaded.getType()).isEqualTo(orig.getType());","764","    assertThat(loaded.getDefaultValue()).isEqualTo(orig.getDefaultValue());","765","    assertThat(loaded.getDescription()).isEqualTo(orig.getDescription());","766","  }","767","","768","  @Test","769","  public void should_fail_to_insert_duplicate_parameter() {","770","    RuleDefinitionDto ruleDefinitionDto = db.rules().insert();","771","","772","    RuleParamDto param = RuleParamDto.createFor(ruleDefinitionDto)","773","      .setName(\"max\")","774","      .setType(\"INTEGER\")","775","      .setDefaultValue(\"30\")","776","      .setDescription(\"My Parameter\");","777","","778","    underTest.insertRuleParam(db.getSession(), ruleDefinitionDto, param);","779","","780","    thrown.expect(PersistenceException.class);","781","    underTest.insertRuleParam(db.getSession(), ruleDefinitionDto, param);"],"delete":["747","    db.prepareDbUnit(getClass(), \"insert_parameter.xml\");","748","    RuleDefinitionDto rule1 = underTest.selectOrFailDefinitionByKey(db.getSession(), RuleKey.of(\"plugin\", \"NewRuleKey\"));","750","    RuleParamDto param = RuleParamDto.createFor(rule1)","756","    underTest.insertRuleParam(db.getSession(), rule1, param);","757","    db.getSession().commit();","759","    db.assertDbUnit(getClass(), \"insert_parameter-result.xml\", \"rules_parameters\");"]}],"server\/sonar-db-migration\/src\/test\/java\/org\/sonar\/server\/platform\/db\/migration\/version\/v72\/AddUniqueIndexOnRulesParametersTest.java":[{"add":[],"delete":[]}],"server\/sonar-db-core\/src\/main\/resources\/org\/sonar\/db\/version\/schema-h2.ddl":[{"add":["45","CREATE UNIQUE INDEX \"RULES_PARAMETERS_UNIQUE\" ON \"RULES_PARAMETERS\" (\"RULE_ID\", \"NAME\");"],"delete":[]}],"server\/sonar-db-migration\/src\/test\/java\/org\/sonar\/server\/platform\/db\/migration\/version\/v72\/DbVersion72Test.java":[{"add":["36","    verifyMigrationCount(underTest, 30);"],"delete":["36","    verifyMigrationCount(underTest, 28);"]}]}},"57ec3d37f7420a262b2724b1e7bbe958ad13b5d6":{"changes":{"server\/sonar-server\/src\/main\/java\/org\/sonar\/server\/es\/EsClient.java":"MODIFY","server\/sonar-server\/src\/test\/java\/org\/sonar\/server\/search\/SearchClientMediumTest.java":"MODIFY","server\/sonar-server\/src\/test\/java\/org\/sonar\/server\/es\/EsTester.java":"MODIFY","server\/sonar-server\/src\/main\/java\/org\/sonar\/server\/search\/SearchClient.java":"MODIFY","server\/sonar-server\/src\/main\/java\/org\/sonar\/server\/app\/TomcatContexts.java":"MODIFY","server\/sonar-server\/src\/test\/java\/org\/sonar\/server\/search\/BaseIndexTest.java":"MODIFY"},"diff":{"server\/sonar-server\/src\/main\/java\/org\/sonar\/server\/es\/EsClient.java":[{"add":["80","  private final SearchClient deprecatedClient;","83","    this.deprecatedClient = deprecatedClient;","87","    return new ProxyRefreshRequestBuilder(deprecatedClient.nativeClient()).setIndices(indices);","91","    return new ProxyFlushRequestBuilder(deprecatedClient.nativeClient()).setIndices(indices);","95","    return new ProxyIndicesStatsRequestBuilder(deprecatedClient.nativeClient()).setIndices(indices);","99","    return new ProxyNodesStatsRequestBuilder(deprecatedClient.nativeClient()).setNodesIds(nodesIds);","103","    return new ProxyClusterStatsRequestBuilder(deprecatedClient.nativeClient());","107","    return new ProxyClusterStateRequestBuilder(deprecatedClient.nativeClient());","111","    return new ProxyClusterHealthRequestBuilder(deprecatedClient.nativeClient()).setIndices(indices);","119","    return new ProxyIndicesExistsRequestBuilder(deprecatedClient.nativeClient(), indices);","123","    return new ProxyCreateIndexRequestBuilder(deprecatedClient.nativeClient(), index);","127","    return new ProxyPutMappingRequestBuilder(deprecatedClient.nativeClient()).setIndices(indices);","131","    return new ProxySearchRequestBuilder(deprecatedClient.nativeClient()).setIndices(indices);","135","    return new ProxySearchScrollRequestBuilder(scrollId, deprecatedClient.nativeClient());","139","    return new ProxyGetRequestBuilder(deprecatedClient.nativeClient());","143","    return new ProxyGetRequestBuilder(deprecatedClient.nativeClient()).setIndex(index).setType(type).setId(id);","147","    return new ProxyMultiGetRequestBuilder(deprecatedClient.nativeClient());","151","    return new ProxyCountRequestBuilder(deprecatedClient.nativeClient()).setIndices(indices);","155","    return new ProxyBulkRequestBuilder(deprecatedClient.nativeClient());","159","    return new ProxyDeleteRequestBuilder(deprecatedClient.nativeClient(), index).setType(type).setId(id);","163","    return new ProxyDeleteByQueryRequestBuilder(deprecatedClient.nativeClient()).setIndices(indices);","167","    return new ProxyIndexRequestBuilder(deprecatedClient.nativeClient()).setIndex(index).setType(type);","177","    return new ProxyClearCacheRequestBuilder(deprecatedClient.nativeClient()).setIndices(indices);","203","    return deprecatedClient.nativeClient();"],"delete":["80","  private final Client client;","83","    this.client = deprecatedClient;","84","  }","85","","86","  EsClient(Client client) {","87","    this.client = client;","91","    return new ProxyRefreshRequestBuilder(client).setIndices(indices);","95","    return new ProxyFlushRequestBuilder(client).setIndices(indices);","99","    return new ProxyIndicesStatsRequestBuilder(client).setIndices(indices);","103","    return new ProxyNodesStatsRequestBuilder(client).setNodesIds(nodesIds);","107","    return new ProxyClusterStatsRequestBuilder(client);","111","    return new ProxyClusterStateRequestBuilder(client);","115","    return new ProxyClusterHealthRequestBuilder(client).setIndices(indices);","123","    return new ProxyIndicesExistsRequestBuilder(client, indices);","127","    return new ProxyCreateIndexRequestBuilder(client, index);","131","    return new ProxyPutMappingRequestBuilder(client).setIndices(indices);","135","    return new ProxySearchRequestBuilder(client).setIndices(indices);","139","    return new ProxySearchScrollRequestBuilder(scrollId, client);","143","    return new ProxyGetRequestBuilder(client);","147","    return new ProxyGetRequestBuilder(client).setIndex(index).setType(type).setId(id);","151","    return new ProxyMultiGetRequestBuilder(client);","155","    return new ProxyCountRequestBuilder(client).setIndices(indices);","159","    return new ProxyBulkRequestBuilder(client);","163","    return new ProxyDeleteRequestBuilder(client, index).setType(type).setId(id);","167","    return new ProxyDeleteByQueryRequestBuilder(client).setIndices(indices);","171","    return new ProxyIndexRequestBuilder(client).setIndex(index).setType(type);","181","    return new ProxyClearCacheRequestBuilder(client).setIndices(indices);","207","    return client;"]}],"server\/sonar-server\/src\/test\/java\/org\/sonar\/server\/search\/SearchClientMediumTest.java":[{"add":["35",""],"delete":["47","  public void prepare_multi_search_is_not_yet_implemented() {","48","    try {","49","      searchClient.prepareMultiSearch();","50","      fail();","51","    } catch (Exception e) {","52","      assertThat(e).isInstanceOf(IllegalStateException.class).hasMessage(\"Not yet implemented\");","53","    }","54","  }","55","","56","  @Test","57","  public void prepare_update_is_not_yet_implemented() {","58","    try {","59","      searchClient.prepareUpdate();","60","      fail();","61","    } catch (Exception e) {","62","      assertThat(e).isInstanceOf(IllegalStateException.class).hasMessage(\"Not yet implemented\");","63","    }","64","","65","    try {","66","      searchClient.prepareUpdate(\"index\", \"type\", \"id\");","67","      fail();","68","    } catch (Exception e) {","69","      assertThat(e).isInstanceOf(IllegalStateException.class).hasMessage(\"Not yet implemented\");","70","    }","71","  }","72","","73","  @Test","74","  public void prepare_delete_is_not_yet_implemented() {","75","    try {","76","      searchClient.prepareDelete();","77","      fail();","78","    } catch (Exception e) {","79","      assertThat(e).isInstanceOf(IllegalStateException.class).hasMessage(\"Not yet implemented\");","80","    }","81","  }","82","","83","  @Test","93","  @Test","94","  public void prepare_percolate_is_not_yet_implemented() {","95","    try {","96","      searchClient.preparePercolate();","97","      fail();","98","    } catch (IllegalStateException e) {","99","      assertThat(e).hasMessage(\"Not yet implemented\");","100","    }","101","  }","102","","103","  @Test","104","  public void prepare_multi_percolate_is_not_yet_implemented() {","105","    try {","106","      searchClient.prepareMultiPercolate();","107","      fail();","108","    } catch (Exception e) {","109","      assertThat(e).isInstanceOf(IllegalStateException.class).hasMessage(\"Not yet implemented\");","110","    }","111","  }","112","","113","  @Test","114","  public void prepare_suggest_is_not_yet_implemented() {","115","    try {","116","      searchClient.prepareSuggest(\"index\");","117","      fail();","118","    } catch (Exception e) {","119","      assertThat(e).isInstanceOf(IllegalStateException.class).hasMessage(\"Not yet implemented\");","120","    }","121","  }","122","","123","  @Test","124","  public void prepare_more_like_this_is_not_yet_implemented() {","125","    try {","126","      searchClient.prepareMoreLikeThis(\"index\", \"tpye\", \"id\");","127","      fail();","128","    } catch (Exception e) {","129","      assertThat(e).isInstanceOf(IllegalStateException.class).hasMessage(\"Not yet implemented\");","130","    }","131","  }","132","","133","  @Test","134","  public void prepare_term_vector_is_not_yet_implemented() {","135","    try {","136","      searchClient.prepareTermVector(\"index\", \"tpye\", \"id\");","137","      fail();","138","    } catch (Exception e) {","139","      assertThat(e).isInstanceOf(IllegalStateException.class).hasMessage(\"Not yet implemented\");","140","    }","141","  }","142","","143","  @Test","144","  public void prepare_multi_term_vectors_is_not_yet_implemented() {","145","    try {","146","      searchClient.prepareMultiTermVectors();","147","      fail();","148","    } catch (Exception e) {","149","      assertThat(e).isInstanceOf(IllegalStateException.class).hasMessage(\"Not yet implemented\");","150","    }","151","  }","152","","153","  @Test","154","  public void prepare_explain_is_not_yet_implemented() {","155","    try {","156","      searchClient.prepareExplain(\"index\", \"tpye\", \"id\");","157","      fail();","158","    } catch (Exception e) {","159","      assertThat(e).isInstanceOf(IllegalStateException.class).hasMessage(\"Not yet implemented\");","160","    }","161","  }","162","","163","  @Test","164","  public void prepare_clear_scroll_is_not_yet_implemented() {","165","    try {","166","      searchClient.prepareClearScroll();","167","      fail();","168","    } catch (Exception e) {","169","      assertThat(e).isInstanceOf(IllegalStateException.class).hasMessage(\"Not yet implemented\");","170","    }","171","  }"]}],"server\/sonar-server\/src\/test\/java\/org\/sonar\/server\/es\/EsTester.java":[{"add":["46","import org.sonar.server.search.SearchClient;","100","    client = new EsClient(new SearchClient(new Settings(), node.client()));"],"delete":["99","    client = new EsClient(node.client());"]}],"server\/sonar-server\/src\/main\/java\/org\/sonar\/server\/search\/SearchClient.java":[{"add":["21","import com.google.common.annotations.VisibleForTesting;","34","import org.elasticsearch.client.Client;","58","public class SearchClient implements Startable {","59","","60","  private final Settings settings;","61","  private Client nativeClient;","64","    this.settings = settings;","67","  @VisibleForTesting","68","  public SearchClient(Settings settings, Client nativeClient) {","69","    this.settings = settings;","70","    this.nativeClient = nativeClient;","71","  }","72","","73","  public Client nativeClient() {","74","    if (nativeClient == null) {","75","      throw new IllegalStateException();","76","    }","77","    return nativeClient;","81","    return new ProxyRefreshRequestBuilder(nativeClient).setIndices(indices);","85","    return new ProxyIndicesExistsRequestBuilder(nativeClient, indices);","89","    return new ProxyCreateIndexRequestBuilder(nativeClient, index);","93","    return new ProxyPutMappingRequestBuilder(nativeClient).setIndices(indices);","97","    return new ProxySearchRequestBuilder(nativeClient).setIndices(indices);","101","    return new ProxySearchScrollRequestBuilder(scrollId, nativeClient);","105","    return new ProxyGetRequestBuilder(nativeClient);","109","    return new ProxyMultiGetRequestBuilder(nativeClient);","113","    return new ProxyCountRequestBuilder(nativeClient).setIndices(indices);","117","    return new ProxyBulkRequestBuilder(nativeClient);","125","  public synchronized void start() {","126","    if (nativeClient == null) {","127","      ESLoggerFactory.setDefaultFactory(new Slf4jESLoggerFactory());","128","      org.elasticsearch.common.settings.Settings esSettings = ImmutableSettings.settingsBuilder()","129","        .put(\"node.name\", StringUtils.defaultIfEmpty(settings.getString(ProcessProperties.CLUSTER_NODE_NAME), \"sq_local_client\"))","130","        .put(\"network.bind_host\", StringUtils.defaultIfEmpty(settings.getString(ProcessProperties.SEARCH_HOST), \"localhost\"))","131","        .put(\"node.rack_id\", StringUtils.defaultIfEmpty(settings.getString(ProcessProperties.CLUSTER_NODE_NAME), \"unknown\"))","132","        .put(\"cluster.name\", StringUtils.defaultIfBlank(settings.getString(ProcessProperties.CLUSTER_NAME), \"sonarqube\"))","133","        .build();","134","      nativeClient = new TransportClient(esSettings);","135","      ((TransportClient) nativeClient).addTransportAddress(new InetSocketTransportAddress(StringUtils.defaultIfEmpty(settings.getString(ProcessProperties.SEARCH_HOST),","136","        LoopbackAddress.get()","137","          .getHostAddress()),","138","        settings.getInt(ProcessProperties.SEARCH_PORT)));","139","    }","144","    if (nativeClient != null) {","145","      nativeClient.close();","146","    }"],"delete":["28","import org.elasticsearch.action.delete.DeleteRequestBuilder;","30","import org.elasticsearch.action.explain.ExplainRequestBuilder;","33","import org.elasticsearch.action.index.IndexRequestBuilder;","34","import org.elasticsearch.action.mlt.MoreLikeThisRequestBuilder;","35","import org.elasticsearch.action.percolate.MultiPercolateRequestBuilder;","36","import org.elasticsearch.action.percolate.PercolateRequestBuilder;","37","import org.elasticsearch.action.search.ClearScrollRequestBuilder;","38","import org.elasticsearch.action.search.MultiSearchRequestBuilder;","41","import org.elasticsearch.action.suggest.SuggestRequestBuilder;","42","import org.elasticsearch.action.termvector.MultiTermVectorsRequestBuilder;","43","import org.elasticsearch.action.termvector.TermVectorRequestBuilder;","44","import org.elasticsearch.action.update.UpdateRequestBuilder;","46","import org.elasticsearch.common.Nullable;","58","import org.sonar.server.es.request.ProxyDeleteRequestBuilder;","70","public class SearchClient extends TransportClient implements Startable {","73","    super(ImmutableSettings.settingsBuilder()","74","      .put(\"node.name\", StringUtils.defaultIfEmpty(settings.getString(ProcessProperties.CLUSTER_NODE_NAME), \"sq_local_client\"))","75","      .put(\"network.bind_host\", StringUtils.defaultIfEmpty(settings.getString(ProcessProperties.SEARCH_HOST), \"localhost\"))","76","      .put(\"node.rack_id\", StringUtils.defaultIfEmpty(settings.getString(ProcessProperties.CLUSTER_NODE_NAME), \"unknown\"))","77","      .put(\"cluster.name\", StringUtils.defaultIfBlank(settings.getString(ProcessProperties.CLUSTER_NAME), \"sonarqube\"))","78","      .build());","79","    initLogging();","80","    this.addTransportAddress(new InetSocketTransportAddress(StringUtils.defaultIfEmpty(settings.getString(ProcessProperties.SEARCH_HOST), LoopbackAddress.get().getHostAddress()),","81","      settings.getInt(ProcessProperties.SEARCH_PORT)));","84","  private void initLogging() {","85","    ESLoggerFactory.setDefaultFactory(new Slf4jESLoggerFactory());","89","    return new ProxyRefreshRequestBuilder(this).setIndices(indices);","93","    return new ProxyIndicesExistsRequestBuilder(this, indices);","97","    return new ProxyCreateIndexRequestBuilder(this, index);","101","    return new ProxyPutMappingRequestBuilder(this).setIndices(indices);","104","  @Override","106","    return new ProxySearchRequestBuilder(this).setIndices(indices);","109","  @Override","111","    return new ProxySearchScrollRequestBuilder(scrollId, this);","114","  @Override","116","    return new ProxyGetRequestBuilder(this);","119","  @Override","121","    return new ProxyMultiGetRequestBuilder(this);","124","  @Override","126","    return new ProxyCountRequestBuilder(this).setIndices(indices);","129","  @Override","131","    return new ProxyBulkRequestBuilder(this);","134","  @Override","139","  \/\/ ****************************************************************************************************************","140","  \/\/ Not yet implemented methods","141","  \/\/ ****************************************************************************************************************","142","","144","  public GetRequestBuilder prepareGet(String index, String type, String id) {","145","    throw throwNotYetImplemented();","146","  }","147","","148","  @Override","149","  public IndexRequestBuilder prepareIndex() {","150","    throw throwNotYetImplemented();","151","  }","152","","153","  @Override","154","  public IndexRequestBuilder prepareIndex(String index, String type) {","155","    throw throwNotYetImplemented();","156","  }","157","","158","  @Override","159","  public IndexRequestBuilder prepareIndex(String index, String type, @Nullable String id) {","160","    throw throwNotYetImplemented();","161","  }","162","","163","  @Override","164","  public MultiSearchRequestBuilder prepareMultiSearch() {","165","    throw throwNotYetImplemented();","166","  }","167","","168","  @Override","169","  public UpdateRequestBuilder prepareUpdate() {","170","    throw throwNotYetImplemented();","171","  }","172","","173","  @Override","174","  public UpdateRequestBuilder prepareUpdate(String index, String type, String id) {","175","    throw throwNotYetImplemented();","176","  }","177","","178","  @Override","179","  public DeleteRequestBuilder prepareDelete() {","180","    throw throwNotYetImplemented();","181","  }","182","","183","  @Override","184","  public DeleteRequestBuilder prepareDelete(String index, String type, String id) {","185","    return new ProxyDeleteRequestBuilder(this, index).setType(type).setId(id);","186","  }","187","","188","  @Override","189","  public PercolateRequestBuilder preparePercolate() {","190","    throw throwNotYetImplemented();","191","  }","192","","193","  @Override","194","  public MultiPercolateRequestBuilder prepareMultiPercolate() {","195","    throw throwNotYetImplemented();","196","  }","197","","198","  @Override","199","  public SuggestRequestBuilder prepareSuggest(String... indices) {","200","    throw throwNotYetImplemented();","201","  }","202","","203","  @Override","204","  public MoreLikeThisRequestBuilder prepareMoreLikeThis(String index, String type, String id) {","205","    throw throwNotYetImplemented();","206","  }","207","","208","  @Override","209","  public TermVectorRequestBuilder prepareTermVector(String index, String type, String id) {","210","    throw throwNotYetImplemented();","211","  }","212","","213","  @Override","214","  public MultiTermVectorsRequestBuilder prepareMultiTermVectors() {","215","    throw throwNotYetImplemented();","216","  }","217","","218","  @Override","219","  public ExplainRequestBuilder prepareExplain(String index, String type, String id) {","220","    throw throwNotYetImplemented();","221","  }","222","","223","  @Override","224","  public ClearScrollRequestBuilder prepareClearScroll() {","225","    throw throwNotYetImplemented();","226","  }","227","","228","  private static IllegalStateException throwNotYetImplemented() {","229","    return new IllegalStateException(\"Not yet implemented\");","230","  }","231","","232","  @Override","233","  public void start() {","234","    \/\/ nothing to do","239","    close();"]}],"server\/sonar-server\/src\/main\/java\/org\/sonar\/server\/app\/TomcatContexts.java":[{"add":["85","  private static StandardContext addContext(Tomcat tomcat, String contextPath, File dir) {"],"delete":["85","  private StandardContext addContext(Tomcat tomcat, String contextPath, File dir) {"]}],"server\/sonar-server\/src\/test\/java\/org\/sonar\/server\/search\/BaseIndexTest.java":[{"add":["54","    searchClient.start();","74","    IndicesExistsResponse indexExistsResponse = index.getClient().nativeClient().admin().indices()"],"delete":["73","    IndicesExistsResponse indexExistsResponse = index.getClient().admin().indices()"]}]}},"2c42bcd7e4a998c9ee8c795b9945cc02da58b21c":{"changes":{"server\/sonar-web\/src\/main\/js\/apps\/projects\/components\/__tests__\/__snapshots__\/AllProjects-test.tsx.snap":"MODIFY","server\/sonar-web\/src\/main\/js\/apps\/projects\/components\/AllProjects.tsx":"MODIFY"},"diff":{"server\/sonar-web\/src\/main\/js\/apps\/projects\/components\/__tests__\/__snapshots__\/AllProjects-test.tsx.snap":[{"add":["113","    <div","114","      className=\"layout-page-main-inner\"","116","      <ProjectsList","117","        cardType=\"overall\"","118","        currentUser={","119","          Object {","120","            \"isLoggedIn\": true,","121","          }","122","        }","123","        handleFavorite={[Function]}","124","        isFavorite={false}","125","        isFiltered={false}","126","        projects={","127","          Array [","129","              \"key\": \"foo\",","130","              \"measures\": Object {},","131","              \"name\": \"Foo\",","132","              \"tags\": Array [],","133","              \"visibility\": \"public\",","134","            },","135","          ]","136","        }","137","        query={","138","          Object {","139","            \"coverage\": undefined,","140","            \"duplications\": undefined,","141","            \"gate\": undefined,","142","            \"languages\": undefined,","143","            \"maintainability\": undefined,","144","            \"new_coverage\": undefined,","145","            \"new_duplications\": undefined,","146","            \"new_lines\": undefined,","147","            \"new_maintainability\": undefined,","148","            \"new_reliability\": undefined,","149","            \"new_security\": undefined,","150","            \"reliability\": undefined,","151","            \"search\": undefined,","152","            \"security\": undefined,","153","            \"size\": undefined,","154","            \"sort\": undefined,","155","            \"tags\": undefined,","156","            \"view\": undefined,","157","            \"visualization\": undefined,","159","        }","160","      \/>","161","      <ListFooter","162","        count={1}","163","        loadMore={[Function]}","164","        loading={false}","165","        ready={true}","166","        total={0}","167","      \/>","168","    <\/div>","241","    <div","242","      className=\"layout-page-main-inner\"","244","      <Visualizations","245","        displayOrganizations={false}","246","        projects={","247","          Array [","248","            Object {","249","              \"key\": \"foo\",","250","              \"measures\": Object {},","251","              \"name\": \"Foo\",","252","              \"tags\": Array [],","253","              \"visibility\": \"public\",","254","            },","255","          ]","256","        }","257","        total={0}","258","        visualization=\"risk\"","259","      \/>","260","    <\/div>","404","    <div","405","      className=\"layout-page-main-inner\"","407","      <ProjectsList","408","        cardType=\"overall\"","409","        currentUser={","410","          Object {","411","            \"isLoggedIn\": true,","413","        }","414","        handleFavorite={[Function]}","415","        isFavorite={false}","416","        isFiltered={false}","417","        organization={","418","          Object {","419","            \"key\": \"foo\",","420","            \"name\": \"Foo\",","421","          }","422","        }","423","        projects={","424","          Array [","427","              \"measures\": Object {},","429","            },","430","          ]","431","        }","432","        query={","433","          Object {","434","            \"coverage\": undefined,","435","            \"duplications\": undefined,","436","            \"gate\": undefined,","437","            \"languages\": undefined,","438","            \"maintainability\": undefined,","439","            \"new_coverage\": undefined,","440","            \"new_duplications\": undefined,","441","            \"new_lines\": undefined,","442","            \"new_maintainability\": undefined,","443","            \"new_reliability\": undefined,","444","            \"new_security\": undefined,","445","            \"reliability\": undefined,","446","            \"search\": undefined,","447","            \"security\": undefined,","448","            \"size\": undefined,","449","            \"sort\": undefined,","450","            \"tags\": undefined,","451","            \"view\": undefined,","452","            \"visualization\": undefined,","454","        }","455","      \/>","456","      <ListFooter","457","        count={1}","458","        loadMore={[Function]}","459","        loading={false}","460","        ready={true}","461","        total={0}","462","      \/>","463","    <\/div>"],"delete":["113","    <DeferredSpinner","114","      loading={false}","115","      timeout={100}","117","      <div","118","        className=\"layout-page-main-inner\"","119","      >","120","        <ProjectsList","121","          cardType=\"overall\"","122","          currentUser={","124","              \"isLoggedIn\": true,","125","            }","127","          handleFavorite={[Function]}","128","          isFavorite={false}","129","          isFiltered={false}","130","          projects={","131","            Array [","132","              Object {","133","                \"key\": \"foo\",","134","                \"measures\": Object {},","135","                \"name\": \"Foo\",","136","                \"tags\": Array [],","137","                \"visibility\": \"public\",","138","              },","139","            ]","140","          }","141","          query={","142","            Object {","143","              \"coverage\": undefined,","144","              \"duplications\": undefined,","145","              \"gate\": undefined,","146","              \"languages\": undefined,","147","              \"maintainability\": undefined,","148","              \"new_coverage\": undefined,","149","              \"new_duplications\": undefined,","150","              \"new_lines\": undefined,","151","              \"new_maintainability\": undefined,","152","              \"new_reliability\": undefined,","153","              \"new_security\": undefined,","154","              \"reliability\": undefined,","155","              \"search\": undefined,","156","              \"security\": undefined,","157","              \"size\": undefined,","158","              \"sort\": undefined,","159","              \"tags\": undefined,","160","              \"view\": undefined,","161","              \"visualization\": undefined,","162","            }","163","          }","164","        \/>","165","        <ListFooter","166","          count={1}","167","          loadMore={[Function]}","168","          ready={true}","169","          total={0}","170","        \/>","171","      <\/div>","172","    <\/DeferredSpinner>","245","    <DeferredSpinner","246","      loading={false}","247","      timeout={100}","249","      <div","250","        className=\"layout-page-main-inner\"","251","      >","252","        <Visualizations","253","          displayOrganizations={false}","254","          projects={","255","            Array [","256","              Object {","257","                \"key\": \"foo\",","258","                \"measures\": Object {},","259","                \"name\": \"Foo\",","260","                \"tags\": Array [],","261","                \"visibility\": \"public\",","262","              },","263","            ]","264","          }","265","          total={0}","266","          visualization=\"risk\"","267","        \/>","268","      <\/div>","269","    <\/DeferredSpinner>","413","    <DeferredSpinner","414","      loading={false}","415","      timeout={100}","417","      <div","418","        className=\"layout-page-main-inner\"","419","      >","420","        <ProjectsList","421","          cardType=\"overall\"","422","          currentUser={","423","            Object {","424","              \"isLoggedIn\": true,","425","            }","427","          handleFavorite={[Function]}","428","          isFavorite={false}","429","          isFiltered={false}","430","          organization={","434","            }","436","          projects={","437","            Array [","438","              Object {","439","                \"key\": \"foo\",","440","                \"measures\": Object {},","441","                \"name\": \"Foo\",","442","              },","443","            ]","444","          }","445","          query={","446","            Object {","447","              \"coverage\": undefined,","448","              \"duplications\": undefined,","449","              \"gate\": undefined,","450","              \"languages\": undefined,","451","              \"maintainability\": undefined,","452","              \"new_coverage\": undefined,","453","              \"new_duplications\": undefined,","454","              \"new_lines\": undefined,","455","              \"new_maintainability\": undefined,","456","              \"new_reliability\": undefined,","457","              \"new_security\": undefined,","458","              \"reliability\": undefined,","459","              \"search\": undefined,","460","              \"security\": undefined,","461","              \"size\": undefined,","462","              \"sort\": undefined,","463","              \"tags\": undefined,","464","              \"view\": undefined,","465","              \"visualization\": undefined,","466","            }","467","          }","468","        \/>","469","        <ListFooter","470","          count={1}","471","          loadMore={[Function]}","472","          ready={true}","473","          total={0}","474","        \/>","475","      <\/div>","476","    <\/DeferredSpinner>"]}],"server\/sonar-web\/src\/main\/js\/apps\/projects\/components\/AllProjects.tsx":[{"add":["311","    if (this.state.loading && this.state.projects === undefined) {","312","      return <DeferredSpinner \/>;","313","    }","314","","315","    return this.getView() === 'visualizations' ? (","316","      <div className=\"layout-page-main-inner\">","317","        {this.state.projects && (","318","          <Visualizations","319","            displayOrganizations={!this.props.organization && isSonarCloud()}","320","            projects={this.state.projects}","321","            sort={this.state.query.sort}","322","            total={this.state.total}","323","            visualization={this.getVisualization()}","324","          \/>","326","      <\/div>","327","    ) : (","328","      <div className=\"layout-page-main-inner\">","329","        {this.state.projects && (","330","          <ProjectsList","331","            cardType={this.getView()}","332","            currentUser={this.props.currentUser}","333","            handleFavorite={this.handleFavorite}","334","            isFavorite={this.props.isFavorite}","335","            isFiltered={hasFilterParams(this.state.query)}","336","            organization={this.props.organization}","337","            projects={this.state.projects}","338","            query={this.state.query}","339","          \/>","340","        )}","341","        <ListFooter","342","          count={this.state.projects !== undefined ? this.state.projects.length : 0}","343","          loading={this.state.loading}","344","          loadMore={this.fetchMoreProjects}","345","          ready={!this.state.loading}","346","          total={this.state.total !== undefined ? this.state.total : 0}","347","        \/>","348","      <\/div>"],"delete":["311","    return (","312","      <DeferredSpinner loading={this.state.loading}>","313","        {this.getView() === 'visualizations' ? (","314","          <div className=\"layout-page-main-inner\">","315","            {this.state.projects && (","316","              <Visualizations","317","                displayOrganizations={!this.props.organization && isSonarCloud()}","318","                projects={this.state.projects}","319","                sort={this.state.query.sort}","320","                total={this.state.total}","321","                visualization={this.getVisualization()}","322","              \/>","323","            )}","324","          <\/div>","325","        ) : (","326","          <div className=\"layout-page-main-inner\">","327","            {this.state.projects && (","328","              <ProjectsList","329","                cardType={this.getView()}","330","                currentUser={this.props.currentUser}","331","                handleFavorite={this.handleFavorite}","332","                isFavorite={this.props.isFavorite}","333","                isFiltered={hasFilterParams(this.state.query)}","334","                organization={this.props.organization}","335","                projects={this.state.projects}","336","                query={this.state.query}","337","              \/>","338","            )}","339","            <ListFooter","340","              count={this.state.projects !== undefined ? this.state.projects.length : 0}","341","              loadMore={this.fetchMoreProjects}","342","              ready={!this.state.loading}","343","              total={this.state.total !== undefined ? this.state.total : 0}","344","            \/>","345","          <\/div>","347","      <\/DeferredSpinner>"]}]}},"1cb0cb0a38cf5c82b85aec5b59e52db13338d060":{"changes":{"sonar-scanner-engine\/src\/test\/java\/org\/sonar\/scanner\/mediumtest\/coverage\/CoverageMediumTest.java":"MODIFY"},"diff":{"sonar-scanner-engine\/src\/test\/java\/org\/sonar\/scanner\/mediumtest\/coverage\/CoverageMediumTest.java":[{"add":["284","  \/\/ SONAR-11641","285","  @Test","286","  public void dontFallbackOnExecutableLinesIfNoCoverageSaved() throws IOException {","287","","288","    File baseDir = temp.getRoot();","289","    File srcDir = new File(baseDir, \"src\");","290","    srcDir.mkdir();","291","","292","    File xooFile = new File(srcDir, \"sample.xoo\");","293","    File measuresFile = new File(srcDir, \"sample.xoo.measures\");","294","    File coverageFile = new File(srcDir, \"sample.xoo.coverage\");","295","    FileUtils.write(xooFile, \"function foo() {\\n  if (a && b) {\\nalert('hello');\\n}\\n}\", StandardCharsets.UTF_8);","296","    FileUtils.write(measuresFile, \"# The code analyzer disagree with the coverage tool and consider some lines to be executable\\nexecutable_lines_data:2=1;3=1;4=0\", StandardCharsets.UTF_8);","297","    FileUtils.write(coverageFile, \"# No lines to cover in this file according to the coverage tool\", StandardCharsets.UTF_8);","298","","299","    AnalysisResult result = tester.newAnalysis()","300","      .properties(ImmutableMap.<String, String>builder()","301","        .put(\"sonar.projectBaseDir\", baseDir.getAbsolutePath())","302","        .put(\"sonar.projectKey\", \"com.foo.project\")","303","        .put(\"sonar.sources\", \"src\")","304","        .build())","305","      .execute();","306","","307","    InputFile file = result.inputFile(\"src\/sample.xoo\");","308","    assertThat(result.coverageFor(file, 1)).isNull();","309","    assertThat(result.coverageFor(file, 2)).isNull();","310","    assertThat(result.coverageFor(file, 3)).isNull();","311","    assertThat(result.coverageFor(file, 4)).isNull();","312","  }","313",""],"delete":[]}]}},"c01e10ac1000017f3930193d42222e257155fc42":{"changes":{"server\/sonar-server\/src\/test\/java\/org\/sonar\/server\/component\/ws\/SuggestionsActionTest.java":"MODIFY","sonar-plugin-api\/src\/main\/java\/org\/sonar\/api\/resources\/ResourceTypes.java":"MODIFY","server\/sonar-db-dao\/src\/test\/java\/org\/sonar\/db\/component\/ResourceTypesRule.java":"MODIFY","server\/sonar-server\/src\/main\/java\/org\/sonar\/server\/component\/ws\/SuggestionsAction.java":"MODIFY"},"diff":{"server\/sonar-server\/src\/test\/java\/org\/sonar\/server\/component\/ws\/SuggestionsActionTest.java":[{"add":["34","import org.sonar.core.util.stream.MoreCollectors;","38","import org.sonar.db.component.ResourceTypesRule;","69","import static org.sonar.api.resources.Qualifiers.FILE;","70","import static org.sonar.api.resources.Qualifiers.MODULE;","71","import static org.sonar.api.resources.Qualifiers.PROJECT;","72","import static org.sonar.api.resources.Qualifiers.SUBVIEW;","73","import static org.sonar.api.resources.Qualifiers.VIEW;","86","  private static final String[] SUGGESTION_QUALIFIERS = Stream.of(SuggestionCategory.values())","87","    .map(SuggestionCategory::getQualifier)","88","    .collect(MoreCollectors.toList()).toArray(new String[0]);","96","  public ResourceTypesRule resourceTypes = new ResourceTypesRule();","101","  private SuggestionsAction underTest = new SuggestionsAction(db.getDbClient(), index, favoriteFinder, userSessionRule, resourceTypes);","109","    resourceTypes.setAllQualifiers(SUGGESTION_QUALIFIERS);","174","      .containsExactly(PROJECT);","198","      .containsExactly(PROJECT);","239","      .containsExactly(PROJECT);","355","  public void suggestions_should_filter_allowed_qualifiers() {","356","    resourceTypes.setAllQualifiers(PROJECT, MODULE, FILE);","357","    ComponentDto project = db.components().insertComponent(newPrivateProjectDto(organization));","358","    componentIndexer.indexProject(project.projectUuid(), ProjectIndexer.Cause.PROJECT_CREATION);","359","    userSessionRule.addProjectPermission(USER, project);","360","","361","    SuggestionsWsResponse response = ws.newRequest()","362","      .setMethod(\"POST\")","363","      .setParam(PARAM_RECENTLY_BROWSED, project.key())","364","      .executeProtobuf(SuggestionsWsResponse.class);","365","","366","    assertThat(response.getResultsList())","367","      .extracting(Category::getQ)","368","      .containsExactlyInAnyOrder(PROJECT, MODULE, FILE);","369","  }","370","","371","  @Test","387","      .containsExactly(PROJECT);","690","  @Test","691","  public void show_more_results_filter_out_if_non_allowed_qualifiers() {","692","    resourceTypes.setAllQualifiers(VIEW, SUBVIEW);","693","","694","    check_proposal_to_show_more_results(10, 0, 0L, SuggestionCategory.PROJECT, true);","695","  }","696",""],"delete":["90","  private SuggestionsAction underTest = new SuggestionsAction(db.getDbClient(), index, favoriteFinder, userSessionRule);","162","      .containsExactly(Qualifiers.PROJECT);","186","      .containsExactly(Qualifiers.PROJECT);","227","      .containsExactly(Qualifiers.PROJECT);","358","      .containsExactly(Qualifiers.PROJECT);"]}],"sonar-plugin-api\/src\/main\/java\/org\/sonar\/api\/resources\/ResourceTypes.java":[{"add":["49","  public static final Predicate<ResourceType> AVAILABLE_FOR_FILTERS = input -> input != null && input.getBooleanProperty(\"supportsMeasureFilters\");"],"delete":["49","  public static final Predicate<ResourceType> AVAILABLE_FOR_FILTERS = new Predicate<ResourceType>() {","50","    @Override","51","    public boolean apply(@Nullable ResourceType input) {","52","      return input != null && input.getBooleanProperty(\"supportsMeasureFilters\");","53","    }","54","  };"]}],"server\/sonar-db-dao\/src\/test\/java\/org\/sonar\/db\/component\/ResourceTypesRule.java":[{"add":["88","    return allResourceTypes.stream()","89","      .filter(resourceType -> qualifier.equals(resourceType.getQualifier()))","90","      .findAny().orElse(null);"],"delete":["88","    throw new UnsupportedOperationException();"]}],"server\/sonar-server\/src\/main\/java\/org\/sonar\/server\/component\/ws\/SuggestionsAction.java":[{"add":["35","import org.sonar.api.resources.ResourceType;","36","import org.sonar.api.resources.ResourceTypes;","63","import static java.util.Collections.emptyList;","90","  private final ResourceTypes resourceTypes;","94","  public SuggestionsAction(DbClient dbClient, ComponentIndex index, FavoriteFinder favoriteFinder, UserSession userSession, ResourceTypes resourceTypes) {","99","    this.resourceTypes = resourceTypes;","254","  private List<String> getQualifiers(@Nullable String more) {","255","    Set<String> availableQualifiers = resourceTypes.getAll().stream().map(ResourceType::getQualifier).collect(MoreCollectors.toSet());","257","      return stream(SuggestionCategory.values())","258","        .map(SuggestionCategory::getQualifier)","259","        .filter(availableQualifiers::contains)","260","        .collect(Collectors.toList());","262","","263","    String qualifier = SuggestionCategory.getByName(more).getQualifier();","264","    return availableQualifiers.contains(qualifier) ?","265","      singletonList(qualifier)","266","      : emptyList();"],"delete":["90","  public SuggestionsAction(DbClient dbClient, ComponentIndex index, FavoriteFinder favoriteFinder, UserSession userSession) {","249","  private static List<String> getQualifiers(@Nullable String more) {","251","      return stream(SuggestionCategory.values()).map(SuggestionCategory::getQualifier).collect(Collectors.toList());","253","    return singletonList(SuggestionCategory.getByName(more).getQualifier());"]}]}},"15dcaa5c3a0f87c71bebf03cb5bf0e6e6cccc2ab":{"changes":{"sonar-scanner-engine\/src\/main\/resources\/org\/sonar\/batch\/scan\/report\/issuesreport_files\/sonar.css":"MODIFY"},"diff":{"sonar-scanner-engine\/src\/main\/resources\/org\/sonar\/batch\/scan\/report\/issuesreport_files\/sonar.css":[{"add":[],"delete":["217","  height: 2.2em;"]}]}},"88bdd17e11b618321f7fee543e08e363fdb5763b":{"changes":{"server\/sonar-process-monitor\/src\/main\/java\/org\/sonar\/application\/cluster\/HazelcastCluster.java":"MODIFY","server\/sonar-process-monitor\/src\/main\/java\/org\/sonar\/application\/cluster\/AppStateClusterImpl.java":"MODIFY","server\/sonar-server\/src\/main\/java\/org\/sonar\/server\/platform\/web\/PlatformServletContextListener.java":"MODIFY"},"diff":{"server\/sonar-process-monitor\/src\/main\/java\/org\/sonar\/application\/cluster\/HazelcastCluster.java":[{"add":["31","import com.hazelcast.core.HazelcastInstanceNotActiveException;","42","import org.slf4j.Logger;","43","import org.slf4j.LoggerFactory;","56","  private static final Logger LOGGER = LoggerFactory.getLogger(HazelcastCluster.class);","57","","152","      try {","153","        \/\/ Removing listeners","154","        operationalProcesses.removeEntryListener(operationalProcessListenerUUID);","155","        hzInstance.getClientService().removeClientListener(clientListenerUUID);","157","        \/\/ Removing the operationalProcess from the replicated map","158","        operationalProcesses.keySet().forEach(","159","          clusterNodeProcess -> {","160","            if (clusterNodeProcess.getNodeUuid().equals(getLocalUUID())) {","161","              operationalProcesses.remove(clusterNodeProcess);","162","            }","163","          });","165","        \/\/ Shutdown Hazelcast properly","166","        hzInstance.shutdown();","167","      } catch (HazelcastInstanceNotActiveException e) {","168","        \/\/ hazelcastCluster may be already closed by the shutdown hook","169","        LOGGER.debug(\"Unable to close Hazelcast cluster\", e);","170","      }"],"delete":["147","      \/\/ Removing listeners","148","      operationalProcesses.removeEntryListener(operationalProcessListenerUUID);","149","      hzInstance.getClientService().removeClientListener(clientListenerUUID);","151","      \/\/ Removing the operationalProcess from the replicated map","152","      operationalProcesses.keySet().forEach(","153","        clusterNodeProcess -> {","154","          if (clusterNodeProcess.getNodeUuid().equals(getLocalUUID())) {","155","            operationalProcesses.remove(clusterNodeProcess);","156","          }","157","        });","159","      \/\/ Shutdown Hazelcast properly","160","      hzInstance.shutdown();"]}],"server\/sonar-process-monitor\/src\/main\/java\/org\/sonar\/application\/cluster\/AppStateClusterImpl.java":[{"add":["89","    hazelcastCluster.close();"],"delete":["22","import com.hazelcast.core.HazelcastInstanceNotActiveException;","90","    try {","91","      hazelcastCluster.close();","92","    } catch (HazelcastInstanceNotActiveException e) {","93","      \/\/ hazelcastCluster may be already closed by the shutdown hook","94","      LOGGER.debug(\"Unable to close Hazelcast cluster\", e);","95","    }"]}],"server\/sonar-server\/src\/main\/java\/org\/sonar\/server\/platform\/web\/PlatformServletContextListener.java":[{"add":["21","import ch.qos.logback.classic.LoggerContext;","27","import org.slf4j.LoggerFactory;","68","    LoggerContext loggerContext = (LoggerContext) LoggerFactory.getILoggerFactory();","69","    loggerContext.stop();"],"delete":[]}]}},"7031c2ae9d1a5caefd9c27cc302624e01403687b":{"changes":{"sonar-scanner-engine\/src\/test\/java\/org\/sonar\/scanner\/report\/AnalysisContextReportPublisherTest.java":"MODIFY","sonar-scanner-engine\/src\/main\/java\/org\/sonar\/scanner\/report\/AnalysisContextReportPublisher.java":"MODIFY"},"diff":{"sonar-scanner-engine\/src\/test\/java\/org\/sonar\/scanner\/report\/AnalysisContextReportPublisherTest.java":[{"add":["22","import java.io.File;","23","import java.nio.charset.StandardCharsets;","24","import java.util.Collections;","29","import org.apache.commons.lang.StringUtils;","75","  public void prepare() {","87","    when(pluginRepo.getPluginInfos()).thenReturn(Collections.singletonList(new PluginInfo(\"xoo\").setName(\"Xoo\").setVersion(Version.create(\"1.0\"))));","93","    assertThat(FileUtils.readFileToString(writer.getFileStructure().analysisLog(), StandardCharsets.UTF_8)).contains(\"Xoo 1.0 (xoo)\");","117","    String content = FileUtils.readFileToString(writer.getFileStructure().analysisLog(), StandardCharsets.UTF_8);","133","    String content = FileUtils.readFileToString(writer.getFileStructure().analysisLog(), StandardCharsets.UTF_8);","148","    String content = FileUtils.readFileToString(writer.getFileStructure().analysisLog(), StandardCharsets.UTF_8);","159","    content = FileUtils.readFileToString(writer.getFileStructure().analysisLog(), StandardCharsets.UTF_8);","175","    String content = FileUtils.readFileToString(writer.getFileStructure().analysisLog(), StandardCharsets.UTF_8);","186","    content = FileUtils.readFileToString(writer.getFileStructure().analysisLog(), StandardCharsets.UTF_8);","208","    assertThat(FileUtils.readFileToString(writer.getFileStructure().analysisLog(), StandardCharsets.UTF_8)).containsSubsequence(","215","  @Test","216","  public void shouldShortenModuleProperties() throws Exception {","217","    File baseDir = temp.newFolder();","218","    ScannerReportWriter writer = new ScannerReportWriter(temp.newFolder());","219","    publisher.init(writer);","220","","221","    assertThat(writer.getFileStructure().analysisLog()).exists();","222","","223","    publisher.dumpModuleSettings(new DefaultInputModule(ProjectDefinition.create()","224","      .setBaseDir(baseDir)","225","      .setWorkDir(temp.newFolder())","226","      .setProperty(\"sonar.projectKey\", \"foo\")","227","      .setProperty(\"sonar.projectBaseDir\", baseDir.toString())","228","      .setProperty(\"sonar.aVeryLongProp\", StringUtils.repeat(\"abcde\", 1000))));","229","","230","    assertThat(FileUtils.readFileToString(writer.getFileStructure().analysisLog(), StandardCharsets.UTF_8)).containsSubsequence(","231","      \"sonar.aVeryLongProp=\" + StringUtils.repeat(\"abcde\", 199) + \"ab...\",","232","      \"sonar.projectBaseDir=\" + baseDir.toString(),","233","      \"sonar.projectKey=foo\");","234","  }","235","","244","    assertThat(FileUtils.readFileToString(writer.getFileStructure().analysisLog(), StandardCharsets.UTF_8)).containsSubsequence(","273","    String content = FileUtils.readFileToString(writer.getFileStructure().analysisLog(), StandardCharsets.UTF_8);"],"delete":["22","import java.util.Arrays;","72","  public void prepare() throws Exception {","84","    when(pluginRepo.getPluginInfos()).thenReturn(Arrays.asList(new PluginInfo(\"xoo\").setName(\"Xoo\").setVersion(Version.create(\"1.0\"))));","90","    assertThat(FileUtils.readFileToString(writer.getFileStructure().analysisLog())).contains(\"Xoo 1.0 (xoo)\");","114","    String content = FileUtils.readFileToString(writer.getFileStructure().analysisLog());","130","    String content = FileUtils.readFileToString(writer.getFileStructure().analysisLog());","145","    String content = FileUtils.readFileToString(writer.getFileStructure().analysisLog());","156","    content = FileUtils.readFileToString(writer.getFileStructure().analysisLog());","172","    String content = FileUtils.readFileToString(writer.getFileStructure().analysisLog());","183","    content = FileUtils.readFileToString(writer.getFileStructure().analysisLog());","205","    assertThat(FileUtils.readFileToString(writer.getFileStructure().analysisLog())).containsSubsequence(","220","    assertThat(FileUtils.readFileToString(writer.getFileStructure().analysisLog())).containsSubsequence(","249","    String content = FileUtils.readFileToString(writer.getFileStructure().analysisLog());"]}],"sonar-scanner-engine\/src\/main\/java\/org\/sonar\/scanner\/report\/AnalysisContextReportPublisher.java":[{"add":["31","import org.apache.commons.lang.StringUtils;","55","  private static final int MAX_WIDTH = 1000;","148","    fileWriter.append(String.format(KEY_VALUE_FORMAT, prop, sensitive(prop) ? \"******\" : StringUtils.abbreviate(value, MAX_WIDTH))).append('\\n');"],"delete":["31","","147","    fileWriter.append(String.format(KEY_VALUE_FORMAT, prop, sensitive(prop) ? \"******\" : value)).append('\\n');"]}]}},"11b5185acd1215b4eec4243caab19e4c14004e89":{"changes":{"sonar-plugin-api\/src\/main\/java\/org\/sonar\/api\/server\/ws\/internal\/ValidatingRequest.java":"MODIFY","sonar-plugin-api\/src\/test\/java\/org\/sonar\/api\/server\/ws\/RequestTest.java":"MODIFY","sonar-plugin-api\/src\/test\/java\/org\/sonar\/api\/server\/ws\/internal\/SimpleGetRequestTest.java":"MODIFY"},"diff":{"sonar-plugin-api\/src\/main\/java\/org\/sonar\/api\/server\/ws\/internal\/ValidatingRequest.java":[{"add":["218","      throw new IllegalArgumentException(format(\"'%s' value '%s' cannot be parsed as an integer\", key, value), exception);"],"delete":["218","      throw new IllegalStateException(format(\"'%s' value '%s' cannot be parsed as an integer\", key, value), exception);"]}],"sonar-plugin-api\/src\/test\/java\/org\/sonar\/api\/server\/ws\/RequestTest.java":[{"add":["62","  private FakeRequest underTest = new FakeRequest();","147","  public void paramAsInt_throws_IAE_if_maximum_defined_and_value_not_a_number() {","148","    String param = \"maximum_value_param\";","149","    defineParameterTestAction(newParam -> newParam.setMaximumValue(10), param);","150","","151","    expectedException.expect(IllegalArgumentException.class);","152","    expectedException.expectMessage(\"'maximum_value_param' value 'foo' cannot be parsed as an integer\");","153","","154","    underTest.setParam(param, \"foo\").paramAsInt(param);","155","  }","156","","157","  @Test","227","  public void paramAsInt() {","622","  public void param_as_part() {","634","  public void mandatory_param_as_part() {"],"delete":["62","  FakeRequest underTest = new FakeRequest();","216","  public void param_as_int() {","611","  public void param_as_part() throws Exception {","623","  public void mandatory_param_as_part() throws Exception {"]}],"sonar-plugin-api\/src\/test\/java\/org\/sonar\/api\/server\/ws\/internal\/SimpleGetRequestTest.java":[{"add":["52","  public void get_part() {"],"delete":["52","  public void get_part() throws Exception {"]}]}},"4939863d74224188de391caf19a955322dc3f0b9":{"changes":{"server\/sonar-db-dao\/src\/main\/resources\/org\/sonar\/db\/component\/ComponentMapper.xml":"MODIFY"},"diff":{"server\/sonar-db-dao\/src\/main\/resources\/org\/sonar\/db\/component\/ComponentMapper.xml":[{"add":["394","    select p.copy_component_uuid","395","    from projects p","397","      p.enabled = ${_true}","398","      and p.project_uuid = #{projectViewUuid,jdbcType=VARCHAR}","399","      and p.module_uuid_path like #{viewUuidLikeQuery,jdbcType=VARCHAR}","400","      and p.qualifier = 'TRK'","401","      and p.copy_component_uuid is not null"],"delete":["394","    SELECT p.uuid FROM projects technical_projects","395","    INNER JOIN projects p on p.uuid=technical_projects.copy_component_uuid AND p.enabled=${_true}","397","      technical_projects.enabled=${_true}","398","      AND technical_projects.project_uuid = #{projectViewUuid,jdbcType=VARCHAR}","399","      AND technical_projects.module_uuid_path LIKE #{viewUuidLikeQuery,jdbcType=VARCHAR}"]}]}},"fc8e38bb33581bba60be1ef1403488051c0686fb":{"changes":{"server\/sonar-server\/src\/main\/java\/org\/sonar\/server\/issue\/workflow\/State.java":"MODIFY","server\/sonar-server\/src\/test\/java\/org\/sonar\/server\/issue\/workflow\/StateTest.java":"MODIFY"},"diff":{"server\/sonar-server\/src\/main\/java\/org\/sonar\/server\/issue\/workflow\/State.java":[{"add":["23","import java.util.Arrays;","24","import java.util.HashSet;","27","import java.util.stream.Collectors;","46","    Set<String> keys = new HashSet<>();","47","","48","    Arrays.stream(transitions)","49","      .filter(transition -> !keys.add(transition.key()))","50","      .findAny()","51","      .ifPresent(transition -> {","54","      });","58","    return Arrays.stream(outTransitions)","59","      .filter(transition -> !transition.automatic())","60","      .filter(transition -> transition.supports(issue))","61","      .collect(Collectors.toList());","66","    final Transition[] result = new Transition[1];","67","    Set<String> keys = new HashSet<>();","68","","69","    Arrays.stream(outTransitions)","70","      .filter(Transition::automatic)","71","      .filter(transition -> transition.supports(issue))","72","      .peek(transition -> result[0] = transition)","73","      .filter(transition -> !keys.add(transition.key()))","74","      .findAny()","75","      .ifPresent(transition -> {","76","        throw new IllegalArgumentException(\"Several automatic transitions are available for issue: \" + issue);","77","      });","78","","79","    return result[0];","83","    return Arrays.stream(outTransitions)","84","      .filter(transition -> transitionKey.equals(transition.key()))","85","      .findAny()","86","      .orElseThrow(() -> new IllegalArgumentException(\"Transition from state \" + key + \" does not exist: \" + transitionKey));"],"delete":["23","import com.google.common.collect.Lists;","24","import com.google.common.collect.Sets;","45","    Set<String> keys = Sets.newHashSet();","46","    for (Transition transition : transitions) {","47","      if (keys.contains(transition.key())) {","50","      }","51","      keys.add(transition.key());","52","    }","56","    List<Transition> result = Lists.newArrayList();","57","    for (Transition transition : outTransitions) {","58","      if (!transition.automatic() && transition.supports(issue)) {","59","        result.add(transition);","60","      }","61","    }","62","    return result;","67","    Transition result = null;","68","    for (Transition transition : outTransitions) {","69","      if (transition.automatic() && transition.supports(issue)) {","70","        if (result == null) {","71","          result = transition;","72","        } else {","73","          throw new IllegalStateException(\"Several automatic transitions are available for issue: \" + issue);","74","        }","75","      }","76","    }","77","    return result;","81","    for (Transition transition : outTransitions) {","82","      if (transitionKey.equals(transition.key())) {","83","        return transition;","84","      }","85","    }","86","    throw new IllegalStateException(\"Transition from state \" + key + \" does not exist: \" + transitionKey);"]}],"server\/sonar-server\/src\/test\/java\/org\/sonar\/server\/issue\/workflow\/StateTest.java":[{"add":["21","import org.junit.Rule;","23","import org.junit.rules.ExpectedException;","27","  @Rule","28","  public ExpectedException expectedException = ExpectedException.none();","29","","34","    expectedException.expect(IllegalArgumentException.class);","35","    expectedException.expectMessage(\"State key must be set\");","36","","37","    new State(\"\", new Transition[0]);","42","    expectedException.expect(IllegalArgumentException.class);","43","    expectedException.expectMessage(\"State key must be upper-case\");","44","","45","    new State(\"close\", new Transition[0]);","50","    expectedException.expect(IllegalArgumentException.class);","51","    expectedException.expectMessage(\"Transition 'close' is declared several times from the originating state 'CLOSE'\");","52","","53","    new State(\"CLOSE\", new Transition[] {t1, t1});","54","  }","55","","56","  @Test","57","  public void fail_when_transition_is_unknown() {","58","    State state = new State(\"VALIDATED\", new Transition[0]);","59","","60","    expectedException.expect(IllegalArgumentException.class);","61","    expectedException.expectMessage(\"Transition from state VALIDATED does not exist: Unknown Transition\");","62","","63","    state.transition(\"Unknown Transition\");"],"delete":["22","","23","import static org.assertj.core.api.Assertions.assertThat;","24","import static org.junit.Assert.fail;","32","    try {","33","      new State(\"\", new Transition[0]);","34","      fail();","35","    } catch (IllegalArgumentException e) {","36","      assertThat(e).hasMessage(\"State key must be set\");","37","    }","42","    try {","43","      new State(\"close\", new Transition[0]);","44","      fail();","45","    } catch (IllegalArgumentException e) {","46","      assertThat(e).hasMessage(\"State key must be upper-case\");","47","    }","52","    try {","53","      new State(\"CLOSE\", new Transition[] {t1, t1});","54","      fail();","55","    } catch (IllegalArgumentException e) {","56","      assertThat(e).hasMessage(\"Transition 'close' is declared several times from the originating state 'CLOSE'\");","57","    }"]}]}},"c8afbfd7e00b8f27ce097efab84e186b3afebe6e":{"changes":{"tests\/src\/test\/java\/org\/sonarqube\/tests\/qualityProfile\/BuiltInQualityProfilesNotificationTest.java":"MODIFY","server\/sonar-server\/src\/main\/java\/org\/sonar\/server\/platform\/platformlevel\/PlatformLevel4.java":"MODIFY","server\/sonar-server\/src\/main\/java\/org\/sonar\/server\/platform\/platformlevel\/PlatformLevelStartup.java":"MODIFY"},"diff":{"tests\/src\/test\/java\/org\/sonarqube\/tests\/qualityProfile\/BuiltInQualityProfilesNotificationTest.java":[{"add":["91","      .setServerProperty(\"sonar.notifications.delay\", \"1\")"],"delete":[]}],"server\/sonar-server\/src\/main\/java\/org\/sonar\/server\/platform\/platformlevel\/PlatformLevel4.java":[{"add":["152","import org.sonar.server.qualityprofile.BuiltInQualityProfilesNotificationDispatcher;","153","import org.sonar.server.qualityprofile.BuiltInQualityProfilesNotificationTemplate;","459","      \/\/ Those class are required in order to be able to send emails during startup","460","      \/\/ Without having two NotificationModule (one in StartupLevel and one in Level4)","461","      BuiltInQualityProfilesNotificationTemplate.class,","462","      BuiltInQualityProfilesNotificationDispatcher.class,","463",""],"delete":[]}],"server\/sonar-server\/src\/main\/java\/org\/sonar\/server\/platform\/platformlevel\/PlatformLevelStartup.java":[{"add":["40","import org.sonar.server.startup.RenameDeprecatedPropertyKeys;"],"delete":["23","import org.sonar.server.notification.NotificationModule;","31","import org.sonar.server.qualityprofile.BuiltInQualityProfilesNotificationDispatcher;","32","import org.sonar.server.qualityprofile.BuiltInQualityProfilesNotificationTemplate;","42","import org.sonar.server.startup.RenameDeprecatedPropertyKeys;","66","      \/\/ TODO Should we put it in level 2 ?","67","      NotificationModule.class,","68","      BuiltInQualityProfilesNotificationDispatcher.class,","69","      BuiltInQualityProfilesNotificationTemplate.class,"]}]}},"6b32b6acfc429c66d837b4176b97727340c5bdba":{"changes":{"server\/sonar-web\/src\/main\/js\/app\/components\/ComponentContainer.tsx":"MODIFY"},"diff":{"server\/sonar-web\/src\/main\/js\/app\/components\/ComponentContainer.tsx":[{"add":["102","    const onError = (param?: any) => {","104","        let response: Response;","105","","106","        if (param && param.response) {","107","          response = param.response;","108","        } else {","109","          response = param;","110","        }","111",""],"delete":["102","    const onError = (response?: Response) => {"]}]}},"ee6d1e906736f988dc399d3ea7e9562014027084":{"changes":{"server\/sonar-web\/src\/main\/js\/apps\/projects\/styles.css":"MODIFY"},"diff":{"server\/sonar-web\/src\/main\/js\/apps\/projects\/styles.css":[{"add":[],"delete":["38",".projects-topbar-item.is-loading {","39","  padding-left: 0;","40","}","41",""]}]}},"1a90571a65a3042633ebf3d6412932ff79142d98":{"changes":{"server\/sonar-db-dao\/src\/main\/resources\/org\/sonar\/db\/purge\/PurgeMapper.xml":"MODIFY","server\/sonar-db-dao\/src\/test\/java\/org\/sonar\/db\/purge\/PurgeDaoTest.java":"MODIFY"},"diff":{"server\/sonar-db-dao\/src\/main\/resources\/org\/sonar\/db\/purge\/PurgeMapper.xml":[{"add":["53","    left join snapshots s","54","    on","55","        s.component_uuid = pb.uuid","56","        and s.islast=${_true}","60","        and (s.created_at is null or s.created_at &lt; #{toDate})","61",""],"delete":["56","        and pb.updated_at &lt; #{toDate}"]}],"server\/sonar-db-dao\/src\/test\/java\/org\/sonar\/db\/purge\/PurgeDaoTest.java":[{"add":["143","    db.components().insertSnapshot(branch1);","144","    db.components().insertSnapshot(branch2);","146","    \/\/ branch with other components and issues, last analysed 31 days ago","148","    db.components().insertSnapshot(branch3, dto -> dto.setCreatedAt(DateUtils.addDays(new Date(), -31).getTime()));","149","","157","    \/\/ branch with no analysis","158","    ComponentDto branch4 = db.components().insertProjectBranch(project, b -> b.setBranchType(BranchType.BRANCH));","159","","172","    db.components().insertSnapshot(nonMainBranch);","174","    db.components().insertSnapshot(recentPullRequest);","178","    db.components().insertSnapshot(pullRequest, dto -> dto.setCreatedAt(DateUtils.addDays(new Date(), -31).getTime()));","198","    db.components().insertSnapshot(nonMainBranch);","202","    db.components().insertSnapshot(branch1, dto -> dto.setCreatedAt(DateUtils.addDays(new Date(), -31).getTime()));","206","    db.components().insertSnapshot(branch2, dto -> dto.setCreatedAt(DateUtils.addDays(new Date(), -31).getTime()));","211","    underTest.purge(dbSession, newConfigurationWith30Days(System2.INSTANCE, branch1.uuid(), branch1.getMainBranchProjectUuid()), PurgeListener.EMPTY, new PurgeProfiler());"],"delete":["144","    \/\/ branch with other components and issues, updated 31 days ago","145","    when(system2.now()).thenReturn(DateUtils.addDays(new Date(), -31).getTime());","163","    when(system2.now()).thenReturn(new Date().getTime());","170","    when(system2.now()).thenReturn(DateUtils.addDays(new Date(), -31).getTime());","188","    when(system2.now()).thenReturn(new Date().getTime());","192","","193","    when(system2.now()).thenReturn(DateUtils.addDays(new Date(), -31).getTime());","203","    \/\/ back to present","204","    when(system2.now()).thenReturn(new Date().getTime());","206","    underTest.purge(dbSession, newConfigurationWith30Days(system2, branch1.uuid(), branch1.getMainBranchProjectUuid()), PurgeListener.EMPTY, new PurgeProfiler());"]}]}},"80b9bc017cda9ead3ca0e3ad5c4aeb3a2b1407c0":{"changes":{"server\/sonar-web\/src\/main\/js\/apps\/issues\/components\/IssuesSourceViewer.tsx":"MODIFY"},"diff":{"server\/sonar-web\/src\/main\/js\/apps\/issues\/components\/IssuesSourceViewer.tsx":[{"add":["92","    if (locations.length > 0) {"],"delete":["92","    if (locations.length > 1) {"]}]}},"263563d03a3a8b5171345f972c6308c0b6efb2cf":{"changes":{"sonar-plugin-api\/src\/main\/java\/org\/sonar\/api\/measures\/CoreMetrics.java":"MODIFY"},"diff":{"sonar-plugin-api\/src\/main\/java\/org\/sonar\/api\/measures\/CoreMetrics.java":[{"add":["1285","  public static final Metric<String> NEW_DEVELOPMENT_COST = new Metric.Builder(NEW_DEVELOPMENT_COST_KEY, \"Development Cost on New Code\", Metric.ValueType.FLOAT)"],"delete":["1285","  public static final Metric<String> NEW_DEVELOPMENT_COST = new Metric.Builder(NEW_DEVELOPMENT_COST_KEY, \"Development Cost on New Code\", Metric.ValueType.STRING)"]}]}},"72170b891ef224779a42622be5a619fc20e8e276":{"changes":{"server\/sonar-server\/src\/main\/resources\/org\/sonar\/server\/user\/ws\/example-deactivate.json":"ADD","\/dev\/null":"DELETE","server\/sonar-server\/src\/test\/java\/org\/sonar\/server\/user\/ws\/DeactivateActionTest.java":"MODIFY","server\/sonar-server\/src\/main\/java\/org\/sonar\/server\/user\/ws\/DeactivateAction.java":"MODIFY"},"diff":{"server\/sonar-server\/src\/main\/resources\/org\/sonar\/server\/user\/ws\/example-deactivate.json":[{"add":[],"delete":[]}],"\/dev\/null":[{"add":[],"delete":[]}],"server\/sonar-server\/src\/test\/java\/org\/sonar\/server\/user\/ws\/DeactivateActionTest.java":[{"add":["98","    UserDto user = insertUser(newUserDto()","99","      .setLogin(\"ada.lovelace\")","100","      .setEmail(\"ada.lovelace@noteg.com\")","101","      .setName(\"Ada Lovelace\")","102","      .setScmAccounts(singletonList(\"al\")));","107","    \/\/ scm accounts, groups and email are deleted","108","    assertJson(json).isSimilarTo(ws.getDef().responseExampleAsString());","250","    assertThat(user.get().getEmail()).isNull();","251","    assertThat(user.get().getScmAccountsAsList()).isEmpty();"],"delete":["98","    UserDto user = insertUser(newUserDto().setEmail(\"john@email.com\")","99","      .setLogin(\"john\")","100","      .setName(\"John\")","101","      .setScmAccounts(singletonList(\"jn\")));","106","    assertJson(json).isSimilarTo(getClass().getResource(\"DeactivateActionTest\/deactivate_user.json\"));"]}],"server\/sonar-server\/src\/main\/java\/org\/sonar\/server\/user\/ws\/DeactivateAction.java":[{"add":["71","      .setResponseExample(getClass().getResource(\"example-deactivate.json\"))"],"delete":[]}]}},"c58ff4caa54f4d1da9e3103afc01d64a211aef66":{"changes":{"server\/sonar-server\/src\/main\/java\/org\/sonar\/server\/project\/ws\/UpdateKeyAction.java":"MODIFY","server\/sonar-server\/src\/main\/java\/org\/sonar\/server\/computation\/queue\/ReportSubmitter.java":"MODIFY","tests\/src\/test\/java\/org\/sonarqube\/tests\/component\/ComponentSuite.java":"MODIFY","server\/sonar-db-dao\/src\/main\/resources\/org\/sonar\/db\/component\/ComponentKeyUpdaterMapper.xml":"MODIFY","server\/sonar-db-dao\/src\/main\/java\/org\/sonar\/db\/component\/ComponentKeyUpdaterMapper.java":"MODIFY","tests\/src\/test\/java\/util\/XooProjectBuilder.java":"ADD","server\/sonar-db-dao\/src\/main\/java\/org\/sonar\/db\/component\/ComponentKeyUpdaterDao.java":"MODIFY","tests\/src\/test\/java\/org\/sonarqube\/tests\/project\/ProjectKeyUpdateTest.java":"MODIFY","tests\/src\/test\/java\/org\/sonarqube\/tests\/component\/ModuleTest.java":"ADD","server\/sonar-server\/src\/test\/java\/org\/sonar\/server\/project\/ws\/UpdateKeyActionTest.java":"MODIFY"},"diff":{"server\/sonar-server\/src\/main\/java\/org\/sonar\/server\/project\/ws\/UpdateKeyAction.java":[{"add":["21","import com.google.common.base.Optional;","30","import org.sonar.server.exceptions.NotFoundException;","43","  public UpdateKeyAction(DbClient dbClient, ComponentService componentService) {","56","          \"Either '%s' or '%s' must be provided.<br> \" +","57","          \"Requires one of the following permissions: \" +","58","          \"<ul>\" +","59","          \"<li>'Administer System'<\/li>\" +","60","          \"<li>'Administer' rights on the specified project<\/li>\" +","61","          \"<\/ul>\",","68","      new Change(\"6.4\", \"Move from api\/components\/update_key to api\/projects\/update_key\"),","69","      new Change(\"7.1\", \"Ability to update key of a disabled module\"));","93","    String uuid = request.param(PARAM_PROJECT_ID);","94","    String key = request.param(PARAM_FROM);","95","    String newKey = request.mandatoryParam(PARAM_TO);","96","    checkArgument(uuid != null ^ key != null, \"Either '%s' or '%s' must be provided\", PARAM_PROJECT_ID, PARAM_FROM);","99","      Optional<ComponentDto> component;","100","      if (uuid != null) {","101","        component = dbClient.componentDao().selectByUuid(dbSession, uuid);","102","      } else {","103","        component = dbClient.componentDao().selectByKey(dbSession, key);","104","      }","105","      if (!component.isPresent() || component.get().getMainBranchProjectUuid() != null) {","106","        throw new NotFoundException(\"Component not found\");","107","      }","108","","109","      componentService.updateKey(dbSession, component.get(), newKey);","111","    response.noContent();"],"delete":["28","import org.sonar.server.component.ComponentFinder;","29","import org.sonar.server.component.ComponentFinder.ParamNames;","31","","32","import javax.annotation.CheckForNull;","33","import javax.annotation.Nullable;","44","  private final ComponentFinder componentFinder;","47","  public UpdateKeyAction(DbClient dbClient, ComponentFinder componentFinder, ComponentService componentService) {","49","    this.componentFinder = componentFinder;","61","        \"Either '%s' or '%s' must be provided.<br> \" +","62","        \"Requires one of the following permissions: \" +","63","        \"<ul>\" +","64","        \"<li>'Administer System'<\/li>\" +","65","        \"<li>'Administer' rights on the specified project<\/li>\" +","66","        \"<\/ul>\",","73","      new Change(\"6.4\", \"Move from api\/components\/update_key to api\/projects\/update_key\"));","97","    doHandle(toWsRequest(request));","98","    response.noContent();","99","  }","101","  private void doHandle(UpdateKeyRequest request) {","103","      ComponentDto projectOrModule = componentFinder.getByUuidOrKey(dbSession, request.getId(), request.getKey(), ParamNames.PROJECT_ID_AND_FROM);","104","      componentService.updateKey(dbSession, projectOrModule, request.getNewKey());","106","  }","107","","108","  private static UpdateKeyRequest toWsRequest(Request request) {","109","    return UpdateKeyRequest.builder()","110","      .setId(request.param(PARAM_PROJECT_ID))","111","      .setKey(request.param(PARAM_FROM))","112","      .setNewKey(request.mandatoryParam(PARAM_TO))","113","      .build();","114","  }","115","","116","  private static class UpdateKeyRequest {","117","    private final String id;","118","    private final String key;","119","    private final String newKey;","120","","121","    public UpdateKeyRequest(Builder builder) {","122","      this.id = builder.id;","123","      this.key = builder.key;","124","      this.newKey = builder.newKey;","125","    }","126","","127","    @CheckForNull","128","    public String getId() {","129","      return id;","130","    }","131","","132","    @CheckForNull","133","    public String getKey() {","134","      return key;","135","    }","136","","137","    public String getNewKey() {","138","      return newKey;","139","    }","140","","141","    public static Builder builder() {","142","      return new Builder();","143","    }","144","  }","145","","146","  private static class Builder {","147","    private String id;","148","    private String key;","149","    private String newKey;","150","","151","    private Builder() {","152","      \/\/ enforce method constructor","153","    }","154","","155","    public Builder setId(@Nullable String id) {","156","      this.id = id;","157","      return this;","158","    }","159","","160","    public Builder setKey(@Nullable String key) {","161","      this.key = key;","162","      return this;","163","    }","164","","165","    public Builder setNewKey(String newKey) {","166","      this.newKey = newKey;","167","      return this;","168","    }","169","","170","    public UpdateKeyRequest build() {","171","      checkArgument(newKey != null && !newKey.isEmpty(), \"The new key must not be empty\");","172","      return new UpdateKeyRequest(this);","173","    }"]}],"server\/sonar-server\/src\/main\/java\/org\/sonar\/server\/computation\/queue\/ReportSubmitter.java":[{"add":["127","    if (!component.projectUuid().equals(component.uuid())) {","129","      ComponentDto anotherBaseProject = dbClient.componentDao().selectOrFailByUuid(dbSession, component.projectUuid());"],"delete":["127","    if (!project.get().projectUuid().equals(project.get().uuid())) {","129","      ComponentDto anotherBaseProject = dbClient.componentDao().selectOrFailByUuid(dbSession, project.get().projectUuid());"]}],"tests\/src\/test\/java\/org\/sonarqube\/tests\/component\/ComponentSuite.java":[{"add":["33","  ComponentsWsTest.class,","34","  ModuleTest.class"],"delete":["33","  ComponentsWsTest.class","39","","41",""]}],"server\/sonar-db-dao\/src\/main\/resources\/org\/sonar\/db\/component\/ComponentKeyUpdaterMapper.xml":[{"add":["21","  <select id=\"selectProjectByUuid\" parameterType=\"String\" resultMap=\"resourceResultMap\">"],"delete":["21","  <select id=\"selectProject\" parameterType=\"String\" resultMap=\"resourceResultMap\">"]}],"server\/sonar-db-dao\/src\/main\/java\/org\/sonar\/db\/component\/ComponentKeyUpdaterMapper.java":[{"add":["28","  ResourceDto selectProjectByUuid(@Param(\"uuid\") String uuid);"],"delete":["24","\/**","25"," * @since 3.2","26"," *\/","31","  ResourceDto selectProject(@Param(\"uuid\") String uuid);"]}],"tests\/src\/test\/java\/util\/XooProjectBuilder.java":[{"add":[],"delete":[]}],"server\/sonar-db-dao\/src\/main\/java\/org\/sonar\/db\/component\/ComponentKeyUpdaterDao.java":[{"add":["58","    ResourceDto project = mapper.selectProjectByUuid(projectOrModuleUuid);","69","        resources.add(mapper.selectProjectByUuid(branch.getUuid()));","168","    ResourceDto project = mapper.selectProjectByUuid(projectUuid);"],"delete":["58","    ResourceDto project = mapper.selectProject(projectOrModuleUuid);","69","        resources.add(mapper.selectProject(branch.getUuid()));","168","    ResourceDto project = mapper.selectProject(projectUuid);"]}],"tests\/src\/test\/java\/org\/sonarqube\/tests\/project\/ProjectKeyUpdateTest.java":[{"add":["51","import util.XooProjectBuilder;"],"delete":["25","import java.io.OutputStream;","26","import java.util.ArrayList;","30","import java.util.Properties;","33","import org.apache.commons.io.FileUtils;","34","import org.apache.commons.lang.StringUtils;","400","  private static class XooProjectBuilder {","401","    private final String key;","402","    private final List<String> moduleKeys = new ArrayList<>();","403","    private int filesPerModule = 1;","404","","405","    XooProjectBuilder(String projectKey) {","406","      this.key = projectKey;","407","    }","408","","409","    XooProjectBuilder addModules(String key, String... otherKeys) {","410","      this.moduleKeys.add(key);","411","      this.moduleKeys.addAll(asList(otherKeys));","412","      return this;","413","    }","414","","415","    XooProjectBuilder setFilesPerModule(int i) {","416","      this.filesPerModule = i;","417","      return this;","418","    }","419","","420","    File build(File dir) {","421","      for (String moduleKey : moduleKeys) {","422","        generateModule(moduleKey, new File(dir, moduleKey), new Properties());","423","      }","424","      Properties additionalProps = new Properties();","425","      additionalProps.setProperty(\"sonar.modules\", StringUtils.join(moduleKeys, \",\"));","426","      generateModule(key, dir, additionalProps);","427","      return dir;","428","    }","429","","430","    private void generateModule(String key, File dir, Properties additionalProps) {","431","      try {","432","        File sourceDir = new File(dir, \"src\");","433","        FileUtils.forceMkdir(sourceDir);","434","        for (int i = 0; i < filesPerModule; i++) {","435","          File sourceFile = new File(sourceDir, \"File\" + i + \".xoo\");","436","          FileUtils.write(sourceFile, \"content of \" + sourceFile.getName());","437","        }","438","        Properties props = new Properties();","439","        props.setProperty(\"sonar.projectKey\", key);","440","        props.setProperty(\"sonar.projectName\", key);","441","        props.setProperty(\"sonar.projectVersion\", \"1.0\");","442","        props.setProperty(\"sonar.sources\", sourceDir.getName());","443","        props.putAll(additionalProps);","444","        File propsFile = new File(dir, \"sonar-project.properties\");","445","        try (OutputStream output = FileUtils.openOutputStream(propsFile)) {","446","          props.store(output, \"generated\");","447","        }","448","      } catch (IOException e) {","449","        throw new IllegalStateException(e);","450","      }","451","    }","452","  }","453",""]}],"tests\/src\/test\/java\/org\/sonarqube\/tests\/component\/ModuleTest.java":[{"add":[],"delete":[]}],"server\/sonar-server\/src\/test\/java\/org\/sonar\/server\/project\/ws\/UpdateKeyActionTest.java":[{"add":["21","import com.google.common.base.Optional;","29","import org.sonar.api.web.UserRole;","35","import org.sonar.server.es.ProjectIndexers;","36","import org.sonar.server.es.ProjectIndexersImpl;","37","import org.sonar.server.exceptions.ForbiddenException;","39","import org.sonar.server.tester.UserSessionRule;","55","  @Rule","56","  public UserSessionRule userSessionRule = UserSessionRule.standalone();","57","  private DbClient dbClient = db.getDbClient();","58","  private ProjectIndexers projectIndexers = new ProjectIndexersImpl();","59","  private ComponentService componentService = new ComponentService(dbClient, userSessionRule, projectIndexers);","60","  private WsActionTester ws = new WsActionTester(new UpdateKeyAction(dbClient, componentService));","63","  public void update_key_of_project_referenced_by_its_key() {","65","    userSessionRule.addProjectPermission(UserRole.ADMIN, project);","67","    callByKey(project.getKey(), ANOTHER_KEY);","69","    assertThat(selectByKey(project.getKey()).isPresent()).isFalse();","70","    assertThat(selectByKey(ANOTHER_KEY).get().uuid()).isEqualTo(project.uuid());","74","  public void update_key_of_project_referenced_by_its_uuid() {","76","    userSessionRule.addProjectPermission(UserRole.ADMIN, project);","80","    assertThat(selectByKey(project.getKey()).isPresent()).isFalse();","81","    assertThat(selectByKey(ANOTHER_KEY).get().uuid()).isEqualTo(project.uuid());","82","  }","83","","84","  @Test","85","  public void update_key_of_module_referenced_by_its_uuid() {","86","    ComponentDto project = insertProject();","87","    ComponentDto module = db.components().insertComponent(ComponentTesting.newModuleDto(project));","88","    userSessionRule.addProjectPermission(UserRole.ADMIN, project);","89","","90","    callByUuid(module.uuid(), ANOTHER_KEY);","91","","92","    assertThat(selectByKey(project.getKey()).isPresent()).isTrue();","93","    assertThat(selectByKey(module.getKey()).isPresent()).isFalse();","94","    assertThat(selectByKey(ANOTHER_KEY).get().uuid()).isEqualTo(module.uuid());","95","  }","96","","97","  @Test","98","  public void update_key_of_disabled_module() {","99","    ComponentDto project = insertProject();","100","    ComponentDto module = db.components().insertComponent(ComponentTesting.newModuleDto(project).setEnabled(false));","101","    userSessionRule.addProjectPermission(UserRole.ADMIN, project);","102","","103","    callByKey(module.getKey(), ANOTHER_KEY);","104","","105","    assertThat(selectByKey(project.getKey()).isPresent()).isTrue();","106","    assertThat(selectByKey(module.getKey()).isPresent()).isFalse();","107","    ComponentDto loadedModule = selectByKey(ANOTHER_KEY).get();","108","    assertThat(loadedModule.uuid()).isEqualTo(module.uuid());","109","    assertThat(loadedModule.isEnabled()).isFalse();","110","  }","111","","112","","113","  @Test","114","  public void fail_if_not_authorized() {","115","    ComponentDto project = insertProject();","116","    userSessionRule.addProjectPermission(UserRole.USER, project);","117","","118","    expectedException.expect(ForbiddenException.class);","119","    expectedException.expectMessage(\"Insufficient privileges\");","120","","121","    callByKey(project.getKey(), ANOTHER_KEY);","127","    userSessionRule.addProjectPermission(UserRole.ADMIN, project);","129","    expectedException.expect(IllegalArgumentException.class);","130","    expectedException.expectMessage(\"The 'to' parameter is missing\");","131","","132","    callByKey(project.getKey(), null);","138","    expectedException.expectMessage(\"Either 'projectId' or 'from' must be provided\");","144","  public void fail_if_both_uuid_and_key_provided() {","146","    userSessionRule.addProjectPermission(UserRole.ADMIN, project);","148","    expectedException.expect(IllegalArgumentException.class);","149","    expectedException.expectMessage(\"Either 'projectId' or 'from' must be provided\");","150","","151","","152","    call(project.uuid(), project.getKey(), ANOTHER_KEY);","166","    userSessionRule.addProjectPermission(UserRole.ADMIN, project);","169","    expectedException.expectMessage(\"Component not found\");","178","    userSessionRule.addProjectPermission(UserRole.ADMIN, project);","181","    expectedException.expectMessage(\"Component not found\");","193","    assertThat(definition.changelog()).hasSize(2);","201","    return db.components().insertComponent(ComponentTesting.newPrivateProjectDto(db.organizations().insert()));","204","  private void callByUuid(@Nullable String uuid, @Nullable String newKey) {","205","    call(uuid, null, newKey);","208","  private void callByKey(@Nullable String key, @Nullable String newKey) {","209","    call(null, key, newKey);","227","","228","  private Optional<ComponentDto> selectByKey(String key) {","229","    return db.getDbClient().componentDao().selectByKey(db.getSession(), key);","230","  }"],"delete":["29","import org.sonar.db.DbSession;","31","import org.sonar.db.component.ComponentDbTester;","35","import org.sonar.server.component.TestComponentFinder;","41","import static org.mockito.ArgumentMatchers.any;","42","import static org.mockito.ArgumentMatchers.eq;","43","import static org.mockito.Mockito.mock;","44","import static org.mockito.Mockito.verify;","56","","57","  ComponentDbTester componentDb = new ComponentDbTester(db);","58","  DbClient dbClient = db.getDbClient();","59","","60","  ComponentService componentService = mock(ComponentService.class);","61","","62","  WsActionTester ws = new WsActionTester(new org.sonar.server.project.ws.UpdateKeyAction(dbClient, TestComponentFinder.from(db), componentService));","65","  public void call_by_key() {","68","    callByKey(project.getDbKey(), ANOTHER_KEY);","70","    assertCallComponentService(ANOTHER_KEY);","74","  public void call_by_uuid() {","79","    assertCallComponentService(ANOTHER_KEY);","84","    expectedException.expect(IllegalArgumentException.class);","85","","88","    callByKey(project.getDbKey(), null);","99","  public void fail_if_uuid_and_key_provided() {","100","    expectedException.expect(IllegalArgumentException.class);","101","","104","    call(project.uuid(), project.getDbKey(), ANOTHER_KEY);","120","    expectedException.expectMessage(String.format(\"Component key '%s' not found\", branch.getDbKey()));","131","    expectedException.expectMessage(String.format(\"Component id '%s' not found\", branch.uuid()));","149","  private void assertCallComponentService(@Nullable String newKey) {","150","    verify(componentService).updateKey(any(DbSession.class), any(ComponentDto.class), eq(newKey));","151","  }","152","","154","    return componentDb.insertComponent(ComponentTesting.newPrivateProjectDto(db.organizations().insert()));","157","  private String callByUuid(@Nullable String uuid, @Nullable String newKey) {","158","    return call(uuid, null, newKey);","161","  private String callByKey(@Nullable String key, @Nullable String newKey) {","162","    return call(null, key, newKey);"]}]}},"fbdda573c5f20a65c86767f6b7828c99dd1e9774":{"changes":{"server\/sonar-web\/src\/main\/js\/components\/SourceViewer\/SourceViewerBase.js":"MODIFY","sonar-core\/src\/main\/resources\/org\/sonar\/l10n\/core.properties":"MODIFY"},"diff":{"server\/sonar-web\/src\/main\/js\/components\/SourceViewer\/SourceViewerBase.js":[{"add":["100","  sourceRemoved: boolean,","147","      sourceRemoved: false,","228","              sourceRemoved: false,","253","        } else if (response.status === 404) {","254","          this.setState({ component, loading: false, sourceRemoved: true });","314","          if ([403, 404].includes(response.status)) {","316","          } else {","577","    const { component, loading, sources, notAccessible, sourceRemoved } = this.state;","599","    const displaySources = !notAccessible && !sourceRemoved;","600","","604","        {notAccessible &&","608","        {sourceRemoved &&","609","          <div className=\"alert alert-warning spacer-top\">","610","            {translate('code_viewer.no_source_code_displayed_due_to_source_removed')}","611","          <\/div>}","612","        {displaySources && sources != null && this.renderCode(sources)}"],"delete":["309","          if (response.status === 403) {","311","          } else if (response.status === 404) {","572","    const { component, loading } = this.state;","597","        {this.state.notAccessible &&","601","        {this.state.sources != null && this.renderCode(this.state.sources)}"]}],"sonar-core\/src\/main\/resources\/org\/sonar\/l10n\/core.properties":[{"add":["1151","code_viewer.no_source_code_displayed_due_to_source_removed=The file was removed, no source code can be displayed."],"delete":[]}]}},"78d77d771aef671903f673658f55cc7c936e61a9":{"changes":{"server\/sonar-db-migration\/src\/main\/java\/org\/sonar\/server\/platform\/db\/migration\/version\/v72\/PopulateFileSourceLineCount.java":"MODIFY"},"diff":{"server\/sonar-db-migration\/src\/main\/java\/org\/sonar\/server\/platform\/db\/migration\/version\/v72\/PopulateFileSourceLineCount.java":[{"add":["49","    massUpdate.update(\"update file_sources set line_count = ? where project_uuid = ?\")","50","      \/\/ Having transactions involving many rows can be very slow and should be avoided.","51","      \/\/ A project can have many file_sources, so transaction is committed after each project.","52","      .setBatchSize(1);","53","    massUpdate.rowPluralName(\"file sources\");"],"delete":["49","    massUpdate.update(\"update file_sources set line_count = ? where project_uuid = ?\");","50","    massUpdate.rowPluralName(\"file source line counts\");"]}]}},"8e548228c10184d3a9eb284f0ab0a6399c07684f":{"changes":{"server\/sonar-web\/src\/main\/js\/components\/SelectList\/styles.css":"MODIFY","server\/sonar-web\/src\/main\/js\/apps\/users\/components\/GroupsForm.tsx":"MODIFY","server\/sonar-web\/src\/main\/js\/apps\/groups\/components\/EditMembers.tsx":"MODIFY","server\/sonar-web\/src\/main\/js\/components\/SelectList\/SelectListListElement.tsx":"MODIFY","server\/sonar-web\/src\/main\/js\/components\/SelectList\/__tests__\/__snapshots__\/SelectListListElement-test.tsx.snap":"MODIFY"},"diff":{"server\/sonar-web\/src\/main\/js\/components\/SelectList\/styles.css":[{"add":["91",".select-list-list-checkbox i {"],"delete":["91",".select-list-list-checkbox {"]}],"server\/sonar-web\/src\/main\/js\/apps\/users\/components\/GroupsForm.tsx":[{"add":["89","    return (","90","      <div className=\"select-list-list-item\">","91","        {group === undefined ? (","92","          name","93","        ) : (","94","          <>","95","            {group.name}","96","            <br \/>","97","            <span className=\"note\">{group.description}<\/span>","98","          <\/>","99","        )}","100","      <\/div>","101","    );"],"delete":["89","    return group === undefined ? name : group.name;"]}],"server\/sonar-web\/src\/main\/js\/apps\/groups\/components\/EditMembers.tsx":[{"add":["62","      name: this.props.group.name,","67","    }).then(","68","      data => {","69","        this.setState({","70","          users: data.users,","71","          selectedUsers: data.users.filter(user => user.selected).map(user => user.login)","72","        });","73","      },","74","      () => {}","75","    );","115","    return (","116","      <div className=\"select-list-list-item\">","117","        {user === undefined ? (","118","          login","119","        ) : (","120","          <>","121","            {user.name}","122","            <br \/>","123","            <span className=\"note\">{user.login}<\/span>","124","          <\/>","125","        )}","126","      <\/div>","127","    );"],"delete":["62","      id: this.props.group.id,","67","    }).then(data => {","68","      this.setState({","69","        users: data.users,","70","        selectedUsers: data.users.filter(user => user.selected).map(user => user.login)","71","      });","72","    });","112","    return user === undefined ? login : user.login;"]}],"server\/sonar-web\/src\/main\/js\/components\/SelectList\/SelectListListElement.tsx":[{"add":["66","          className={classNames('select-list-list-checkbox', { active: this.props.active })}"],"delete":["66","          className={classNames({ active: this.props.active })}"]}],"server\/sonar-web\/src\/main\/js\/components\/SelectList\/__tests__\/__snapshots__\/SelectListListElement-test.tsx.snap":[{"add":["6","    className=\"select-list-list-checkbox\"","23","    className=\"select-list-list-checkbox\""],"delete":["6","    className=\"\"","23","    className=\"\""]}]}},"079b3642a07821dca29955040135c77cd44fc543":{"changes":{"server\/sonar-db-migration\/src\/main\/java\/org\/sonar\/server\/platform\/db\/migration\/version\/v72\/PurgeOrphansForCE.java":"MODIFY"},"diff":{"server\/sonar-db-migration\/src\/main\/java\/org\/sonar\/server\/platform\/db\/migration\/version\/v72\/PurgeOrphansForCE.java":[{"add":["33","    switch (getDialect().getId()) {"],"delete":["27","  private final Database db;","28","","31","    this.db = db;","36","    switch (db.getDialect().getId()) {"]}]}},"469c74ee12c06bf4094cda0822762d4bc3ed0d8d":{"changes":{"server\/sonar-web\/src\/main\/js\/components\/issue\/Issue.css":"MODIFY"},"diff":{"server\/sonar-web\/src\/main\/js\/components\/issue\/Issue.css":[{"add":["150",".issue-comment-text.markdown pre {","151","  float: none;","152","  height: auto;","153","  margin: 0;","154","  padding: var(--gridSize);","155","  background-color: var(--codeBackground);","156","  border: none;","157","  border-radius: 3px;","158","}","159","","160",".issue-comment-text.markdown br ~ pre {","161","  margin-top: var(--gridSize);","162","}","163",""],"delete":[]}]}},"fb03a19566ef193e4860fb276824ff315ca5047d":{"changes":{"sonar-plugin-api\/src\/main\/java\/org\/sonar\/api\/batch\/scm\/ScmProvider.java":"MODIFY","sonar-scanner-engine\/src\/main\/java\/org\/sonar\/scanner\/report\/ChangedLinesPublisher.java":"MODIFY","sonar-scanner-engine\/src\/test\/java\/org\/sonar\/scanner\/report\/ChangedLinesPublisherTest.java":"MODIFY"},"diff":{"sonar-plugin-api\/src\/main\/java\/org\/sonar\/api\/batch\/scm\/ScmProvider.java":[{"add":["70","   * If nothing is returned for a file, the scanner will consider that the provider was unable to determine changes for that file and it will","71","   * assume that nothing was changed in it.","72","   * If null is returned, an imprecise fallback mechanism will be used to detect which lines are new (based on SCM dates)."],"delete":["70","   * If null is returned or if a path is not included in the map, an imprecise fallback mechanism will be used to detect which lines","71","   * are new (based on SCM dates)."]}],"sonar-scanner-engine\/src\/main\/java\/org\/sonar\/scanner\/report\/ChangedLinesPublisher.java":[{"add":["91","      Set<Integer> changedLines = pathSetMap.get(e.getKey());","93","      if (changedLines == null) {","95","        \/\/ assume that no line was changed","96","        writeChangedLines(writer, e.getValue().scannerId(), Collections.emptySet());","97","      } else {","98","        \/\/ detect unchanged last empty line","99","        if (changedLines.size() + 1 == inputFile.lines() && inputFile.lineLength(inputFile.lines()) == 0) {","100","          changedLines.add(inputFile.lines());","101","        }","102","        count++;","103","        writeChangedLines(writer, e.getValue().scannerId(), changedLines);"],"delete":["91","      Set<Integer> changedLines = pathSetMap.getOrDefault(e.getKey(), Collections.emptySet());","93","      \/\/ detect unchanged last empty line","94","      if (changedLines.size() + 1 == inputFile.lines() && inputFile.lineLength(inputFile.lines()) == 0) {","95","        changedLines.add(inputFile.lines());","96","      }","97","","98","      if (changedLines.isEmpty()) {","101","      count++;","102","      writeChangedLines(writer, e.getValue().scannerId(), changedLines);"]}],"sonar-scanner-engine\/src\/test\/java\/org\/sonar\/scanner\/report\/ChangedLinesPublisherTest.java":[{"add":["21","import com.google.common.collect.ImmutableMap;","37","import org.sonar.api.utils.log.LogTester;","46","import static org.assertj.core.api.Assumptions.assumeThat;","66","  @Rule","67","  public LogTester logTester = new LogTester();","68","","122","    DefaultInputFile fileNotReturned = createInputFile(\"path2\", \"l1\\nl2\\nl3\\n\");","123","    DefaultInputFile fileWithoutChangedLines = createInputFile(\"path3\", \"l1\\nl2\\nl3\\n\");","124","","125","    Set<Path> paths = new HashSet<>(Arrays.asList(BASE_DIR.resolve(\"path1\"), BASE_DIR.resolve(\"path2\"), BASE_DIR.resolve(\"path3\")));","127","    when(provider.branchChangedLines(TARGET_BRANCH, BASE_DIR, paths))","128","      .thenReturn(ImmutableMap.of(BASE_DIR.resolve(\"path1\"), lines, BASE_DIR.resolve(\"path3\"), Collections.emptySet()));","129","    when(inputComponentStore.allChangedFilesToPublish()).thenReturn(Arrays.asList(fileWithChangedLines, fileNotReturned, fileWithoutChangedLines));","135","    assertPublished(fileNotReturned, Collections.emptySet());","136","","137","    assumeThat(logTester.logs()).contains(\"File '\/root\/path2' was detected as changed but without having changed lines\");"],"delete":["116","    DefaultInputFile fileWithoutChangedLines = createInputFile(\"path2\", \"l1\\nl2\\nl3\\n\");","117","    Set<Path> paths = new HashSet<>(Arrays.asList(BASE_DIR.resolve(\"path1\"), BASE_DIR.resolve(\"path2\")));","119","    when(provider.branchChangedLines(TARGET_BRANCH, BASE_DIR, paths)).thenReturn(Collections.singletonMap(BASE_DIR.resolve(\"path1\"), lines));","120","    when(inputComponentStore.allChangedFilesToPublish()).thenReturn(Arrays.asList(fileWithChangedLines, fileWithoutChangedLines));","172","  private void assertNotPublished(DefaultInputFile file) {","173","    assertThat(new File(temp.getRoot(), \"changed-lines-\" + file.scannerId() + \".pb\")).doesNotExist();","174","  }","175",""]}]}},"ca6ddb253d4e7fc7cbdfac45fdfd2e7db461467c":{"changes":{"server\/sonar-web\/src\/main\/js\/apps\/quality-gates\/components\/__tests__\/__snapshots__\/List-test.tsx.snap":"ADD","server\/sonar-web\/src\/main\/js\/apps\/quality-gates\/components\/List.tsx":"MODIFY","server\/sonar-web\/src\/main\/js\/apps\/quality-gates\/components\/__tests__\/List-test.tsx":"ADD","server\/sonar-web\/src\/main\/js\/app\/styles\/components\/badges.css":"MODIFY"},"diff":{"server\/sonar-web\/src\/main\/js\/apps\/quality-gates\/components\/__tests__\/__snapshots__\/List-test.tsx.snap":[{"add":[],"delete":[]}],"server\/sonar-web\/src\/main\/js\/apps\/quality-gates\/components\/List.tsx":[{"add":["36","          className=\"list-group-item display-flex-center\"","40","          <span className=\"flex-1\">{qualityGate.name}<\/span>","41","          {qualityGate.isDefault && (","42","            <span className=\"badge little-spacer-left\">{translate('default')}<\/span>","43","          )}","44","          {qualityGate.isBuiltIn && <BuiltInQualityGateBadge className=\"little-spacer-left\" \/>}"],"delete":["36","          className=\"list-group-item\"","40","          <table>","41","            <tbody>","42","              <tr>","43","                <td>{qualityGate.name}<\/td>","44","                <td className=\"thin nowrap spacer-left text-right\">","45","                  {qualityGate.isDefault && <span className=\"badge\">{translate('default')}<\/span>}","46","                  {qualityGate.isBuiltIn && (","47","                    <BuiltInQualityGateBadge className=\"little-spacer-left\" \/>","48","                  )}","49","                <\/td>","50","              <\/tr>","51","            <\/tbody>","52","          <\/table>"]}],"server\/sonar-web\/src\/main\/js\/apps\/quality-gates\/components\/__tests__\/List-test.tsx":[{"add":[],"delete":[]}],"server\/sonar-web\/src\/main\/js\/app\/styles\/components\/badges.css":[{"add":[],"delete":["44",".list-group-item > .badge,","49",".list-group-item > .badge + .badge,"]}]}},"a1e24b5dc9b1ab138e584e9ef4faeec8f6cb6701":{"changes":{"sonar-ws\/src\/test\/java\/org\/sonarqube\/ws\/client\/OkHttpClientBuilderTest.java":"MODIFY","sonar-ws\/src\/main\/java\/org\/sonarqube\/ws\/client\/OkHttpClientBuilder.java":"MODIFY","sonar-scanner-engine\/src\/main\/java\/org\/sonar\/scanner\/bootstrap\/ScannerWsClientProvider.java":"MODIFY","sonar-ws\/src\/test\/java\/org\/sonarqube\/ws\/client\/HttpConnectorTest.java":"MODIFY","server\/sonar-server\/src\/test\/java\/org\/sonar\/server\/util\/OkHttpClientProviderTest.java":"MODIFY"},"diff":{"sonar-ws\/src\/test\/java\/org\/sonarqube\/ws\/client\/OkHttpClientBuilderTest.java":[{"add":["21","import javax.net.ssl.SSLSocketFactory;","42","    assertThat(okHttpClient.networkInterceptors()).hasSize(1);"],"delete":["29","import javax.net.ssl.SSLSocketFactory;","30","","43","    assertThat(okHttpClient.interceptors()).hasSize(1);"]}],"sonar-ws\/src\/main\/java\/org\/sonarqube\/ws\/client\/OkHttpClientBuilder.java":[{"add":["23","import java.net.HttpURLConnection;","159","    builder.addNetworkInterceptor(this::addUserAgent);","160","    if (proxyLogin != null) {","161","      builder.proxyAuthenticator((route, response) -> {","162","        if (HttpURLConnection.HTTP_PROXY_AUTH == response.code()) {","163","          String credential = Credentials.basic(proxyLogin, nullToEmpty(proxyPassword));","164","          return response.request().newBuilder().header(\"Proxy-Authorization\", credential).build();","165","        }","166","        return null;","167","      });","168","    }","184","  private Response addUserAgent(Interceptor.Chain chain) throws IOException {"],"delete":["158","    builder.addInterceptor(this::completeHeaders);","174","  private Response completeHeaders(Interceptor.Chain chain) throws IOException {","179","    if (proxyLogin != null) {","180","      newRequest.header(\"Proxy-Authorization\", Credentials.basic(proxyLogin, nullToEmpty(proxyPassword)));","181","    }"]}],"sonar-scanner-engine\/src\/main\/java\/org\/sonar\/scanner\/bootstrap\/ScannerWsClientProvider.java":[{"add":["57","      if (!proxyUser.isEmpty()) {"],"delete":["57","      if (!System.getProperty(\"http.proxyHost\", \"\").isEmpty() && !proxyUser.isEmpty()) {"]}],"sonar-ws\/src\/test\/java\/org\/sonarqube\/ws\/client\/HttpConnectorTest.java":[{"add":["22","import java.net.InetSocketAddress;","23","import java.net.Proxy;","142","    MockWebServer proxy = new MockWebServer();","143","    proxy.start();","146","      .proxy(new Proxy(Proxy.Type.HTTP, new InetSocketAddress(proxy.getHostName(), proxy.getPort())))","151","    proxy.enqueue(new MockResponse().setResponseCode(407));","152","    proxy.enqueue(new MockResponse().setBody(\"OK!\"));","155","    RecordedRequest recordedRequest = proxy.takeRequest();","156","    assertThat(recordedRequest.getHeader(\"Proxy-Authorization\")).isNull();","157","    recordedRequest = proxy.takeRequest();"],"delete":["140","    answerHelloWorld();","149","    RecordedRequest recordedRequest = server.takeRequest();"]}],"server\/sonar-server\/src\/test\/java\/org\/sonar\/server\/util\/OkHttpClientProviderTest.java":[{"add":["24","import okhttp3.Protocol;","26","import okhttp3.Response;","69","    Response response = new Response.Builder().protocol(Protocol.HTTP_1_1).request(new Request.Builder().url(\"http:\/\/foo\").build()).code(407).build();","70","    Request request = client.proxyAuthenticator().authenticate(null, response);","72","    assertThat(request.header(\"Proxy-Authorization\")).isEqualTo(\"Basic \" + Base64.getEncoder().encodeToString(\"the-login:the-password\".getBytes()));"],"delete":["67","    RecordedRequest recordedRequest = call(client);","69","    assertThat(recordedRequest.getHeader(\"Proxy-Authorization\")).isEqualTo(\"Basic \" + Base64.getEncoder().encodeToString(\"the-login:the-password\".getBytes()));"]}]}},"c86168a157877c3176c7b536e3b94b9d792f3def":{"changes":{"server\/sonar-webserver-webapi\/src\/test\/java\/org\/sonar\/server\/qualityprofile\/ws\/BackupActionTest.java":"MODIFY","server\/sonar-webserver-webapi\/src\/main\/java\/org\/sonar\/server\/qualityprofile\/ws\/BackupAction.java":"MODIFY"},"diff":{"server\/sonar-webserver-webapi\/src\/test\/java\/org\/sonar\/server\/qualityprofile\/ws\/BackupActionTest.java":[{"add":["39","import org.sonar.server.ws.TestRequest;","45","import static org.assertj.core.api.Assertions.assertThatThrownBy;","133","    TestRequest request = tester.newRequest()","136","      .setParam(\"qualityProfile\", \"the-name\");","137","","138","    assertThatThrownBy(request::execute)","139","      .isInstanceOf(NotFoundException.class)","140","      .hasMessage(\"No organization with key 'the-missing-org'\");","150","    TestRequest request = tester.newRequest()","153","      .setParam(\"qualityProfile\", profileInOrg1.getName());","154","","155","    assertThatThrownBy(request::execute)","156","      .isInstanceOf(NotFoundException.class)","157","      .hasMessage(\"Quality Profile for language 'xoo' and name '\" + profileInOrg1.getName() + \"' does not exist in organization '\" + org2.getKey() + \"'\");","162","    TestRequest request = tester.newRequest();","164","    assertThatThrownBy(request::execute)","165","      .isInstanceOf(IllegalArgumentException.class);","174","    TestRequest request = tester.newRequest()","177","      .setParam(\"qualityProfile\", profile.getName());","178","","179","    assertThatThrownBy(request::execute)","180","      .isInstanceOf(ForbiddenException.class)","181","      .hasMessage(format(\"You're not member of organization '%s'\", organization.getKey()));"],"delete":["23","import org.junit.rules.ExpectedException;","53","  public ExpectedException expectedException = ExpectedException.none();","54","  @Rule","134","    expectedException.expect(NotFoundException.class);","135","    expectedException.expectMessage(\"No organization with key 'the-missing-org'\");","136","","137","    tester.newRequest()","140","      .setParam(\"qualityProfile\", \"the-name\")","141","      .execute();","151","    expectedException.expect(NotFoundException.class);","152","    expectedException.expectMessage(\"Quality Profile for language 'xoo' and name '\" + profileInOrg1.getName() + \"' does not exist in organization '\" + org2.getKey() + \"'\");","153","","154","    tester.newRequest()","157","      .setParam(\"qualityProfile\", profileInOrg1.getName())","158","      .execute();","163","    expectedException.expect(IllegalArgumentException.class);","165","    tester.newRequest().execute();","174","    expectedException.expect(ForbiddenException.class);","175","    expectedException.expectMessage(format(\"You're not member of organization '%s'\", organization.getKey()));","176","","177","    tester.newRequest()","180","      .setParam(\"qualityProfile\", profile.getName())","181","      .execute();"]}],"server\/sonar-webserver-webapi\/src\/main\/java\/org\/sonar\/server\/qualityprofile\/ws\/BackupAction.java":[{"add":["68","    QProfileDto profile = loadQProfile(request);","75","","76","  private QProfileDto loadQProfile(Request request) {","77","    try (DbSession dbSession = dbClient.openSession(false)) {","78","      return wsSupport.getProfile(dbSession, QProfileReference.fromName(request));","79","    }","80","  }"],"delete":["70","","71","      QProfileDto profile = wsSupport.getProfile(dbSession, QProfileReference.fromName(request));"]}]}},"c8a740067eee38980bcbe4affbac769a122ae78b":{"changes":{"sonar-scanner-engine\/src\/main\/java\/org\/sonar\/scanner\/scan\/filesystem\/DefaultModuleFileSystem.java":"MODIFY","sonar-scanner-engine\/src\/main\/java\/org\/sonar\/scanner\/scan\/filesystem\/SameInputFilePredicate.java":"MODIFY"},"diff":{"sonar-scanner-engine\/src\/main\/java\/org\/sonar\/scanner\/scan\/filesystem\/DefaultModuleFileSystem.java":[{"add":["76","      setDefaultPredicate(new SameInputFilePredicate(projectRepositories, module.definition().getKeyWithBranch()));"],"delete":["76","      setDefaultPredicate(new SameInputFilePredicate(projectRepositories, moduleKey));"]}],"sonar-scanner-engine\/src\/main\/java\/org\/sonar\/scanner\/scan\/filesystem\/SameInputFilePredicate.java":[{"add":["34","  private final String moduleKeyWithBranch;","36","  public SameInputFilePredicate(ProjectRepositories projectRepositories, String moduleKeyWithBranch) {","38","    this.moduleKeyWithBranch = moduleKeyWithBranch;","43","    FileData fileDataPerPath = projectRepositories.fileData(moduleKeyWithBranch, inputFile.relativePath());"],"delete":["34","  private final String moduleKey;","36","  public SameInputFilePredicate(ProjectRepositories projectRepositories, String moduleKey) {","38","    this.moduleKey = moduleKey;","43","    FileData fileDataPerPath = projectRepositories.fileData(moduleKey, inputFile.relativePath());"]}]}},"b5725e190b7ea352448401d9e8e94ad8c58fd9f8":{"changes":{"server\/sonar-db-migration\/src\/test\/resources\/org\/sonar\/server\/platform\/db\/migration\/version\/v81\/DeleteSonarPullRequestProviderPropertyTest\/schema.sql":"MODIFY","server\/sonar-db-dao\/src\/schema\/schema-sq.ddl":"MODIFY","server\/sonar-db-migration\/src\/test\/resources\/org\/sonar\/server\/platform\/db\/migration\/step\/DataChangeTest\/schema.sql":"MODIFY","server\/sonar-db-migration\/src\/test\/resources\/org\/sonar\/server\/platform\/db\/migration\/version\/v81\/MigrateDeprecatedGithubPrivateKeyToNewKeyTest\/schema.sql":"MODIFY","server\/sonar-db-migration\/src\/test\/resources\/org\/sonar\/server\/platform\/db\/migration\/version\/v81\/MigrateGithubAlmSettingsTest\/schema.sql":"MODIFY","server\/sonar-db-migration\/src\/test\/resources\/org\/sonar\/server\/platform\/db\/migration\/version\/v81\/MigrateAzureAlmSettingsTest\/schema.sql":"MODIFY","server\/sonar-db-migration\/src\/test\/resources\/org\/sonar\/server\/platform\/db\/migration\/version\/v00\/PopulateInitialSchemaTest\/v79.sql":"MODIFY","server\/sonar-db-migration\/src\/test\/resources\/org\/sonar\/server\/platform\/db\/migration\/version\/v80\/PopulateNewCodePeriodTableTest\/schema.sql":"MODIFY","server\/sonar-db-migration\/src\/test\/resources\/org\/sonar\/server\/platform\/db\/migration\/version\/v81\/MigrateBitbucketAlmSettingsTest\/schema.sql":"MODIFY","server\/sonar-db-migration\/src\/test\/resources\/org\/sonar\/server\/platform\/db\/migration\/version\/v80\/RemoveLeakPeriodPropertiesTest\/schema.sql":"MODIFY","server\/sonar-db-dao\/src\/test\/java\/org\/sonar\/db\/dump\/SQSchemaDumper.java":"MODIFY","server\/sonar-db-migration\/src\/test\/resources\/org\/sonar\/server\/platform\/db\/migration\/version\/v80\/RemoveGitHubLoginGenerationStrategyPropertyTest\/schema.sql":"MODIFY","build.gradle":"MODIFY","server\/sonar-db-migration\/src\/test\/resources\/org\/sonar\/server\/platform\/db\/migration\/version\/v80\/PopulateProjectQualityGatesTableTest\/schema.sql":"MODIFY","server\/sonar-ce-task-projectanalysis\/src\/test\/resources\/org\/sonar\/ce\/task\/projectanalysis\/dbmigration\/PopulateFileSourceLineCountTest\/file_sources.sql":"MODIFY","server\/sonar-db-core\/src\/test\/resources\/org\/sonar\/db\/ResultSetIteratorTest\/schema.sql":"MODIFY","server\/sonar-db-migration\/src\/test\/resources\/org\/sonar\/server\/platform\/db\/migration\/version\/v80\/RemoveDefaultQualityGateFromPropertiesTableTest\/schema.sql":"MODIFY"},"diff":{"server\/sonar-db-migration\/src\/test\/resources\/org\/sonar\/server\/platform\/db\/migration\/version\/v81\/DeleteSonarPullRequestProviderPropertyTest\/schema.sql":[{"add":["1","  \"ID\" INTEGER NOT NULL AUTO_INCREMENT (1,1),"],"delete":["1","  \"ID\" INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1),"]}],"server\/sonar-db-dao\/src\/schema\/schema-sq.ddl":[{"add":["11","CREATE TABLE \"SCHEMA_MIGRATIONS\"(","12","    \"VERSION\" VARCHAR(255) NOT NULL","15","CREATE TABLE \"ACTIVE_RULE_PARAMETERS\"(","16","    \"ID\" INTEGER NOT NULL AUTO_INCREMENT (1,1),","17","    \"ACTIVE_RULE_ID\" INTEGER NOT NULL,","18","    \"RULES_PARAMETER_ID\" INTEGER NOT NULL,","19","    \"VALUE\" VARCHAR(4000),","20","    \"RULES_PARAMETER_KEY\" VARCHAR(128)","22","ALTER TABLE \"ACTIVE_RULE_PARAMETERS\" ADD CONSTRAINT \"PK_ACTIVE_RULE_PARAMETERS\" PRIMARY KEY(\"ID\");","23","CREATE INDEX \"IX_ARP_ON_ACTIVE_RULE_ID\" ON \"ACTIVE_RULE_PARAMETERS\"(\"ACTIVE_RULE_ID\");","25","CREATE TABLE \"ACTIVE_RULES\"(","26","    \"ID\" INTEGER NOT NULL AUTO_INCREMENT (1,1),","27","    \"PROFILE_ID\" INTEGER NOT NULL,","28","    \"RULE_ID\" INTEGER NOT NULL,","29","    \"FAILURE_LEVEL\" INTEGER NOT NULL,","30","    \"INHERITANCE\" VARCHAR(10),","31","    \"CREATED_AT\" BIGINT,","32","    \"UPDATED_AT\" BIGINT","34","ALTER TABLE \"ACTIVE_RULES\" ADD CONSTRAINT \"PK_ACTIVE_RULES\" PRIMARY KEY(\"ID\");","35","CREATE UNIQUE INDEX \"UNIQ_PROFILE_RULE_IDS\" ON \"ACTIVE_RULES\"(\"PROFILE_ID\", \"RULE_ID\");","37","CREATE TABLE \"ALM_APP_INSTALLS\"(","38","    \"UUID\" VARCHAR(40) NOT NULL,","39","    \"ALM_ID\" VARCHAR(40) NOT NULL,","40","    \"OWNER_ID\" VARCHAR(4000) NOT NULL,","41","    \"INSTALL_ID\" VARCHAR(4000) NOT NULL,","42","    \"IS_OWNER_USER\" BOOLEAN NOT NULL,","43","    \"USER_EXTERNAL_ID\" VARCHAR(255),","44","    \"CREATED_AT\" BIGINT NOT NULL,","45","    \"UPDATED_AT\" BIGINT NOT NULL","47","ALTER TABLE \"ALM_APP_INSTALLS\" ADD CONSTRAINT \"PK_ALM_APP_INSTALLS\" PRIMARY KEY(\"UUID\");","48","CREATE UNIQUE INDEX \"ALM_APP_INSTALLS_OWNER\" ON \"ALM_APP_INSTALLS\"(\"ALM_ID\", \"OWNER_ID\");","49","CREATE UNIQUE INDEX \"ALM_APP_INSTALLS_INSTALL\" ON \"ALM_APP_INSTALLS\"(\"ALM_ID\", \"INSTALL_ID\");","50","CREATE INDEX \"ALM_APP_INSTALLS_EXTERNAL_ID\" ON \"ALM_APP_INSTALLS\"(\"USER_EXTERNAL_ID\");","52","CREATE TABLE \"ALM_SETTINGS\"(","53","    \"UUID\" VARCHAR(40) NOT NULL,","54","    \"ALM_ID\" VARCHAR(40) NOT NULL,","55","    \"KEE\" VARCHAR(200) NOT NULL,","56","    \"URL\" VARCHAR(2000),","57","    \"APP_ID\" VARCHAR(80),","58","    \"PRIVATE_KEY\" VARCHAR(2000),","59","    \"PAT\" VARCHAR(2000),","60","    \"UPDATED_AT\" BIGINT NOT NULL,","61","    \"CREATED_AT\" BIGINT NOT NULL","63","ALTER TABLE \"ALM_SETTINGS\" ADD CONSTRAINT \"PK_ALM_SETTINGS\" PRIMARY KEY(\"UUID\");","64","CREATE UNIQUE INDEX \"UNIQ_ALM_SETTINGS\" ON \"ALM_SETTINGS\"(\"KEE\");","66","CREATE TABLE \"ANALYSIS_PROPERTIES\"(","67","    \"UUID\" VARCHAR(40) NOT NULL,","68","    \"ANALYSIS_UUID\" VARCHAR(40) NOT NULL,","69","    \"KEE\" VARCHAR(512) NOT NULL,","70","    \"TEXT_VALUE\" VARCHAR(4000),","71","    \"CLOB_VALUE\" CLOB(2147483647),","72","    \"IS_EMPTY\" BOOLEAN NOT NULL,","73","    \"CREATED_AT\" BIGINT NOT NULL","75","ALTER TABLE \"ANALYSIS_PROPERTIES\" ADD CONSTRAINT \"PK_ANALYSIS_PROPERTIES\" PRIMARY KEY(\"UUID\");","76","CREATE INDEX \"ANALYSIS_PROPERTIES_ANALYSIS\" ON \"ANALYSIS_PROPERTIES\"(\"ANALYSIS_UUID\");","78","CREATE TABLE \"CE_ACTIVITY\"(","79","    \"ID\" INTEGER NOT NULL AUTO_INCREMENT (1,1),","80","    \"UUID\" VARCHAR(40) NOT NULL,","81","    \"TASK_TYPE\" VARCHAR(15) NOT NULL,","82","    \"MAIN_COMPONENT_UUID\" VARCHAR(40),","83","    \"COMPONENT_UUID\" VARCHAR(40),","84","    \"STATUS\" VARCHAR(15) NOT NULL,","85","    \"MAIN_IS_LAST\" BOOLEAN NOT NULL,","86","    \"MAIN_IS_LAST_KEY\" VARCHAR(55) NOT NULL,","87","    \"IS_LAST\" BOOLEAN NOT NULL,","88","    \"IS_LAST_KEY\" VARCHAR(55) NOT NULL,","89","    \"SUBMITTER_UUID\" VARCHAR(255),","90","    \"SUBMITTED_AT\" BIGINT NOT NULL,","91","    \"STARTED_AT\" BIGINT,","92","    \"EXECUTED_AT\" BIGINT,","93","    \"EXECUTION_COUNT\" INTEGER NOT NULL,","94","    \"EXECUTION_TIME_MS\" BIGINT,","95","    \"ANALYSIS_UUID\" VARCHAR(50),","96","    \"ERROR_MESSAGE\" VARCHAR(1000),","97","    \"ERROR_STACKTRACE\" CLOB(2147483647),","98","    \"ERROR_TYPE\" VARCHAR(20),","99","    \"WORKER_UUID\" VARCHAR(40),","100","    \"CREATED_AT\" BIGINT NOT NULL,","101","    \"UPDATED_AT\" BIGINT NOT NULL","103","ALTER TABLE \"CE_ACTIVITY\" ADD CONSTRAINT \"PK_CE_ACTIVITY\" PRIMARY KEY(\"ID\");","104","CREATE INDEX \"CE_ACTIVITY_COMPONENT\" ON \"CE_ACTIVITY\"(\"COMPONENT_UUID\");","105","CREATE INDEX \"CE_ACTIVITY_ISLAST\" ON \"CE_ACTIVITY\"(\"IS_LAST\", \"STATUS\");","106","CREATE INDEX \"CE_ACTIVITY_ISLAST_KEY\" ON \"CE_ACTIVITY\"(\"IS_LAST_KEY\");","107","CREATE INDEX \"CE_ACTIVITY_MAIN_COMPONENT\" ON \"CE_ACTIVITY\"(\"MAIN_COMPONENT_UUID\");","108","CREATE INDEX \"CE_ACTIVITY_MAIN_ISLAST\" ON \"CE_ACTIVITY\"(\"MAIN_IS_LAST\", \"STATUS\");","109","CREATE INDEX \"CE_ACTIVITY_MAIN_ISLAST_KEY\" ON \"CE_ACTIVITY\"(\"MAIN_IS_LAST_KEY\");","110","CREATE UNIQUE INDEX \"CE_ACTIVITY_UUID\" ON \"CE_ACTIVITY\"(\"UUID\");","112","CREATE TABLE \"CE_QUEUE\"(","113","    \"ID\" INTEGER NOT NULL AUTO_INCREMENT (1,1),","114","    \"UUID\" VARCHAR(40) NOT NULL,","115","    \"TASK_TYPE\" VARCHAR(15) NOT NULL,","116","    \"MAIN_COMPONENT_UUID\" VARCHAR(40),","117","    \"COMPONENT_UUID\" VARCHAR(40),","118","    \"STATUS\" VARCHAR(15),","119","    \"SUBMITTER_UUID\" VARCHAR(255),","120","    \"STARTED_AT\" BIGINT,","121","    \"WORKER_UUID\" VARCHAR(40),","122","    \"EXECUTION_COUNT\" INTEGER NOT NULL,","123","    \"CREATED_AT\" BIGINT NOT NULL,","124","    \"UPDATED_AT\" BIGINT NOT NULL","126","ALTER TABLE \"CE_QUEUE\" ADD CONSTRAINT \"PK_CE_QUEUE\" PRIMARY KEY(\"ID\");","127","CREATE INDEX \"CE_QUEUE_MAIN_COMPONENT\" ON \"CE_QUEUE\"(\"MAIN_COMPONENT_UUID\");","128","CREATE INDEX \"CE_QUEUE_COMPONENT\" ON \"CE_QUEUE\"(\"COMPONENT_UUID\");","129","CREATE UNIQUE INDEX \"CE_QUEUE_UUID\" ON \"CE_QUEUE\"(\"UUID\");","131","CREATE TABLE \"CE_SCANNER_CONTEXT\"(","132","    \"TASK_UUID\" VARCHAR(40) NOT NULL,","133","    \"CONTEXT_DATA\" BLOB NOT NULL,","134","    \"CREATED_AT\" BIGINT NOT NULL,","135","    \"UPDATED_AT\" BIGINT NOT NULL","137","ALTER TABLE \"CE_SCANNER_CONTEXT\" ADD CONSTRAINT \"PK_CE_SCANNER_CONTEXT\" PRIMARY KEY(\"TASK_UUID\");","139","CREATE TABLE \"CE_TASK_CHARACTERISTICS\"(","140","    \"UUID\" VARCHAR(40) NOT NULL,","141","    \"TASK_UUID\" VARCHAR(40) NOT NULL,","142","    \"KEE\" VARCHAR(512) NOT NULL,","143","    \"TEXT_VALUE\" VARCHAR(512)","145","ALTER TABLE \"CE_TASK_CHARACTERISTICS\" ADD CONSTRAINT \"PK_CE_TASK_CHARACTERISTICS\" PRIMARY KEY(\"UUID\");","146","CREATE INDEX \"CE_CHARACTERISTICS_TASK_UUID\" ON \"CE_TASK_CHARACTERISTICS\"(\"TASK_UUID\");","148","CREATE TABLE \"CE_TASK_INPUT\"(","149","    \"TASK_UUID\" VARCHAR(40) NOT NULL,","150","    \"INPUT_DATA\" BLOB,","151","    \"CREATED_AT\" BIGINT NOT NULL,","152","    \"UPDATED_AT\" BIGINT NOT NULL","154","ALTER TABLE \"CE_TASK_INPUT\" ADD CONSTRAINT \"PK_CE_TASK_INPUT\" PRIMARY KEY(\"TASK_UUID\");","156","CREATE TABLE \"CE_TASK_MESSAGE\"(","157","    \"UUID\" VARCHAR(40) NOT NULL,","158","    \"TASK_UUID\" VARCHAR(40) NOT NULL,","159","    \"MESSAGE\" VARCHAR(4000) NOT NULL,","160","    \"CREATED_AT\" BIGINT NOT NULL","162","ALTER TABLE \"CE_TASK_MESSAGE\" ADD CONSTRAINT \"PK_CE_TASK_MESSAGE\" PRIMARY KEY(\"UUID\");","163","CREATE INDEX \"CE_TASK_MESSAGE_TASK\" ON \"CE_TASK_MESSAGE\"(\"TASK_UUID\");","165","CREATE TABLE \"DEFAULT_QPROFILES\"(","166","    \"ORGANIZATION_UUID\" VARCHAR(40) NOT NULL,","167","    \"LANGUAGE\" VARCHAR(20) NOT NULL,","168","    \"QPROFILE_UUID\" VARCHAR(255) NOT NULL,","169","    \"CREATED_AT\" BIGINT NOT NULL,","170","    \"UPDATED_AT\" BIGINT NOT NULL","172","ALTER TABLE \"DEFAULT_QPROFILES\" ADD CONSTRAINT \"PK_DEFAULT_QPROFILES\" PRIMARY KEY(\"ORGANIZATION_UUID\", \"LANGUAGE\");","173","CREATE UNIQUE INDEX \"UNIQ_DEFAULT_QPROFILES_UUID\" ON \"DEFAULT_QPROFILES\"(\"QPROFILE_UUID\");","175","CREATE TABLE \"DEPRECATED_RULE_KEYS\"(","176","    \"UUID\" VARCHAR(40) NOT NULL,","177","    \"RULE_ID\" INTEGER NOT NULL,","178","    \"OLD_REPOSITORY_KEY\" VARCHAR(255) NOT NULL,","179","    \"OLD_RULE_KEY\" VARCHAR(200) NOT NULL,","180","    \"CREATED_AT\" BIGINT NOT NULL","182","ALTER TABLE \"DEPRECATED_RULE_KEYS\" ADD CONSTRAINT \"PK_DEPRECATED_RULE_KEYS\" PRIMARY KEY(\"UUID\");","183","CREATE UNIQUE INDEX \"UNIQ_DEPRECATED_RULE_KEYS\" ON \"DEPRECATED_RULE_KEYS\"(\"OLD_REPOSITORY_KEY\", \"OLD_RULE_KEY\");","184","CREATE INDEX \"RULE_ID_DEPRECATED_RULE_KEYS\" ON \"DEPRECATED_RULE_KEYS\"(\"RULE_ID\");","186","CREATE TABLE \"DUPLICATIONS_INDEX\"(","187","    \"ID\" BIGINT NOT NULL AUTO_INCREMENT (1,1),","188","    \"ANALYSIS_UUID\" VARCHAR(50) NOT NULL,","189","    \"COMPONENT_UUID\" VARCHAR(50) NOT NULL,","190","    \"HASH\" VARCHAR(50) NOT NULL,","191","    \"INDEX_IN_FILE\" INTEGER NOT NULL,","192","    \"START_LINE\" INTEGER NOT NULL,","193","    \"END_LINE\" INTEGER NOT NULL","195","ALTER TABLE \"DUPLICATIONS_INDEX\" ADD CONSTRAINT \"PK_DUPLICATIONS_INDEX\" PRIMARY KEY(\"ID\");","196","CREATE INDEX \"DUPLICATIONS_INDEX_HASH\" ON \"DUPLICATIONS_INDEX\"(\"HASH\");","197","CREATE INDEX \"DUPLICATION_ANALYSIS_COMPONENT\" ON \"DUPLICATIONS_INDEX\"(\"ANALYSIS_UUID\", \"COMPONENT_UUID\");","199","CREATE TABLE \"ES_QUEUE\"(","200","    \"UUID\" VARCHAR(40) NOT NULL,","201","    \"DOC_TYPE\" VARCHAR(40) NOT NULL,","202","    \"DOC_ID\" VARCHAR(4000) NOT NULL,","203","    \"DOC_ID_TYPE\" VARCHAR(20),","204","    \"DOC_ROUTING\" VARCHAR(4000),","205","    \"CREATED_AT\" BIGINT NOT NULL","207","ALTER TABLE \"ES_QUEUE\" ADD CONSTRAINT \"PK_ES_QUEUE\" PRIMARY KEY(\"UUID\");","208","CREATE INDEX \"ES_QUEUE_CREATED_AT\" ON \"ES_QUEUE\"(\"CREATED_AT\");","210","CREATE TABLE \"EVENT_COMPONENT_CHANGES\"(","211","    \"UUID\" VARCHAR(40) NOT NULL,","212","    \"EVENT_UUID\" VARCHAR(40) NOT NULL,","213","    \"EVENT_COMPONENT_UUID\" VARCHAR(50) NOT NULL,","214","    \"EVENT_ANALYSIS_UUID\" VARCHAR(50) NOT NULL,","215","    \"CHANGE_CATEGORY\" VARCHAR(12) NOT NULL,","216","    \"COMPONENT_UUID\" VARCHAR(50) NOT NULL,","217","    \"COMPONENT_KEY\" VARCHAR(400) NOT NULL,","218","    \"COMPONENT_NAME\" VARCHAR(2000) NOT NULL,","219","    \"COMPONENT_BRANCH_KEY\" VARCHAR(255),","220","    \"CREATED_AT\" BIGINT NOT NULL","222","ALTER TABLE \"EVENT_COMPONENT_CHANGES\" ADD CONSTRAINT \"PK_EVENT_COMPONENT_CHANGES\" PRIMARY KEY(\"UUID\");","223","CREATE UNIQUE INDEX \"EVENT_COMPONENT_CHANGES_UNIQUE\" ON \"EVENT_COMPONENT_CHANGES\"(\"EVENT_UUID\", \"CHANGE_CATEGORY\", \"COMPONENT_UUID\");","224","CREATE INDEX \"EVENT_CPNT_CHANGES_CPNT\" ON \"EVENT_COMPONENT_CHANGES\"(\"EVENT_COMPONENT_UUID\");","225","CREATE INDEX \"EVENT_CPNT_CHANGES_ANALYSIS\" ON \"EVENT_COMPONENT_CHANGES\"(\"EVENT_ANALYSIS_UUID\");","227","CREATE TABLE \"EVENTS\"(","228","    \"ID\" INTEGER NOT NULL AUTO_INCREMENT (1,1),","229","    \"UUID\" VARCHAR(40) NOT NULL,","230","    \"ANALYSIS_UUID\" VARCHAR(50) NOT NULL,","231","    \"NAME\" VARCHAR(400),","232","    \"CATEGORY\" VARCHAR(50),","233","    \"DESCRIPTION\" VARCHAR(4000),","234","    \"EVENT_DATA\" VARCHAR(4000),","235","    \"EVENT_DATE\" BIGINT NOT NULL,","236","    \"CREATED_AT\" BIGINT NOT NULL,","237","    \"COMPONENT_UUID\" VARCHAR(50) NOT NULL","239","ALTER TABLE \"EVENTS\" ADD CONSTRAINT \"PK_EVENTS\" PRIMARY KEY(\"ID\");","240","CREATE UNIQUE INDEX \"EVENTS_UUID\" ON \"EVENTS\"(\"UUID\");","241","CREATE INDEX \"EVENTS_ANALYSIS\" ON \"EVENTS\"(\"ANALYSIS_UUID\");","242","CREATE INDEX \"EVENTS_COMPONENT_UUID\" ON \"EVENTS\"(\"COMPONENT_UUID\");","244","CREATE TABLE \"FILE_SOURCES\"(","245","    \"ID\" INTEGER NOT NULL AUTO_INCREMENT (1,1),","246","    \"PROJECT_UUID\" VARCHAR(50) NOT NULL,","247","    \"FILE_UUID\" VARCHAR(50) NOT NULL,","248","    \"LINE_HASHES\" CLOB(2147483647),","249","    \"LINE_HASHES_VERSION\" INTEGER,","250","    \"DATA_HASH\" VARCHAR(50),","251","    \"SRC_HASH\" VARCHAR(50),","252","    \"REVISION\" VARCHAR(100),","253","    \"LINE_COUNT\" INTEGER NOT NULL,","254","    \"BINARY_DATA\" BLOB,","255","    \"CREATED_AT\" BIGINT NOT NULL,","256","    \"UPDATED_AT\" BIGINT NOT NULL","258","ALTER TABLE \"FILE_SOURCES\" ADD CONSTRAINT \"PK_FILE_SOURCES\" PRIMARY KEY(\"ID\");","259","CREATE UNIQUE INDEX \"FILE_SOURCES_FILE_UUID\" ON \"FILE_SOURCES\"(\"FILE_UUID\");","260","CREATE INDEX \"FILE_SOURCES_PROJECT_UUID\" ON \"FILE_SOURCES\"(\"PROJECT_UUID\");","261","CREATE INDEX \"FILE_SOURCES_UPDATED_AT\" ON \"FILE_SOURCES\"(\"UPDATED_AT\");","263","CREATE TABLE \"GROUP_ROLES\"(","264","    \"ID\" INTEGER NOT NULL AUTO_INCREMENT (1,1),","265","    \"ORGANIZATION_UUID\" VARCHAR(40) NOT NULL,","266","    \"GROUP_ID\" INTEGER,","267","    \"RESOURCE_ID\" INTEGER,","268","    \"ROLE\" VARCHAR(64) NOT NULL","270","ALTER TABLE \"GROUP_ROLES\" ADD CONSTRAINT \"PK_GROUP_ROLES\" PRIMARY KEY(\"ID\");","271","CREATE UNIQUE INDEX \"UNIQ_GROUP_ROLES\" ON \"GROUP_ROLES\"(\"ORGANIZATION_UUID\", \"GROUP_ID\", \"RESOURCE_ID\", \"ROLE\");","272","CREATE INDEX \"GROUP_ROLES_RESOURCE\" ON \"GROUP_ROLES\"(\"RESOURCE_ID\");","274","CREATE TABLE \"GROUPS\"(","275","    \"ID\" INTEGER NOT NULL AUTO_INCREMENT (1,1),","276","    \"ORGANIZATION_UUID\" VARCHAR(40) NOT NULL,","277","    \"NAME\" VARCHAR(500),","278","    \"DESCRIPTION\" VARCHAR(200),","279","    \"CREATED_AT\" TIMESTAMP,","280","    \"UPDATED_AT\" TIMESTAMP","282","ALTER TABLE \"GROUPS\" ADD CONSTRAINT \"PK_GROUPS\" PRIMARY KEY(\"ID\");","284","CREATE TABLE \"GROUPS_USERS\"(","285","    \"USER_ID\" BIGINT,","286","    \"GROUP_ID\" BIGINT","288","CREATE INDEX \"INDEX_GROUPS_USERS_ON_USER_ID\" ON \"GROUPS_USERS\"(\"USER_ID\");","289","CREATE INDEX \"INDEX_GROUPS_USERS_ON_GROUP_ID\" ON \"GROUPS_USERS\"(\"GROUP_ID\");","290","CREATE UNIQUE INDEX \"GROUPS_USERS_UNIQUE\" ON \"GROUPS_USERS\"(\"GROUP_ID\", \"USER_ID\");","292","CREATE TABLE \"INTERNAL_COMPONENT_PROPS\"(","293","    \"UUID\" VARCHAR(40) NOT NULL,","294","    \"COMPONENT_UUID\" VARCHAR(50) NOT NULL,","295","    \"KEE\" VARCHAR(512) NOT NULL,","296","    \"VALUE\" VARCHAR(4000),","297","    \"UPDATED_AT\" BIGINT NOT NULL,","298","    \"CREATED_AT\" BIGINT NOT NULL","300","ALTER TABLE \"INTERNAL_COMPONENT_PROPS\" ADD CONSTRAINT \"PK_INTERNAL_COMPONENT_PROPS\" PRIMARY KEY(\"UUID\");","301","CREATE UNIQUE INDEX \"UNIQUE_COMPONENT_UUID_KEE\" ON \"INTERNAL_COMPONENT_PROPS\"(\"COMPONENT_UUID\", \"KEE\");","303","CREATE TABLE \"INTERNAL_PROPERTIES\"(","304","    \"KEE\" VARCHAR(20) NOT NULL,","305","    \"IS_EMPTY\" BOOLEAN NOT NULL,","306","    \"TEXT_VALUE\" VARCHAR(4000),","307","    \"CLOB_VALUE\" CLOB(2147483647),","308","    \"CREATED_AT\" BIGINT NOT NULL","310","ALTER TABLE \"INTERNAL_PROPERTIES\" ADD CONSTRAINT \"PK_INTERNAL_PROPERTIES\" PRIMARY KEY(\"KEE\");","312","CREATE TABLE \"ISSUE_CHANGES\"(","313","    \"ID\" BIGINT NOT NULL AUTO_INCREMENT (1,1),","314","    \"KEE\" VARCHAR(50),","315","    \"ISSUE_KEY\" VARCHAR(50) NOT NULL,","316","    \"USER_LOGIN\" VARCHAR(255),","317","    \"CHANGE_TYPE\" VARCHAR(20),","318","    \"CHANGE_DATA\" CLOB(2147483647),","319","    \"CREATED_AT\" BIGINT,","320","    \"UPDATED_AT\" BIGINT,","321","    \"ISSUE_CHANGE_CREATION_DATE\" BIGINT","323","ALTER TABLE \"ISSUE_CHANGES\" ADD CONSTRAINT \"PK_ISSUE_CHANGES\" PRIMARY KEY(\"ID\");","324","CREATE INDEX \"ISSUE_CHANGES_ISSUE_KEY\" ON \"ISSUE_CHANGES\"(\"ISSUE_KEY\");","325","CREATE INDEX \"ISSUE_CHANGES_KEE\" ON \"ISSUE_CHANGES\"(\"KEE\");","327","CREATE TABLE \"ISSUES\"(","328","    \"ID\" BIGINT NOT NULL AUTO_INCREMENT (1,1),","329","    \"KEE\" VARCHAR(50) NOT NULL,","330","    \"RULE_ID\" INTEGER,","331","    \"SEVERITY\" VARCHAR(10),","332","    \"MANUAL_SEVERITY\" BOOLEAN NOT NULL,","333","    \"MESSAGE\" VARCHAR(4000),","334","    \"LINE\" INTEGER,","335","    \"GAP\" DOUBLE,","336","    \"STATUS\" VARCHAR(20),","337","    \"RESOLUTION\" VARCHAR(20),","338","    \"CHECKSUM\" VARCHAR(1000),","339","    \"REPORTER\" VARCHAR(255),","340","    \"ASSIGNEE\" VARCHAR(255),","341","    \"AUTHOR_LOGIN\" VARCHAR(255),","342","    \"ACTION_PLAN_KEY\" VARCHAR(50),","343","    \"ISSUE_ATTRIBUTES\" VARCHAR(4000),","344","    \"EFFORT\" INTEGER,","345","    \"CREATED_AT\" BIGINT,","346","    \"UPDATED_AT\" BIGINT,","347","    \"ISSUE_CREATION_DATE\" BIGINT,","348","    \"ISSUE_UPDATE_DATE\" BIGINT,","349","    \"ISSUE_CLOSE_DATE\" BIGINT,","350","    \"TAGS\" VARCHAR(4000),","351","    \"COMPONENT_UUID\" VARCHAR(50),","352","    \"PROJECT_UUID\" VARCHAR(50),","353","    \"LOCATIONS\" BLOB,","354","    \"ISSUE_TYPE\" TINYINT,","355","    \"FROM_HOTSPOT\" BOOLEAN","357","ALTER TABLE \"ISSUES\" ADD CONSTRAINT \"PK_ISSUES\" PRIMARY KEY(\"ID\");","358","CREATE INDEX \"ISSUES_ASSIGNEE\" ON \"ISSUES\"(\"ASSIGNEE\");","359","CREATE INDEX \"ISSUES_COMPONENT_UUID\" ON \"ISSUES\"(\"COMPONENT_UUID\");","360","CREATE INDEX \"ISSUES_CREATION_DATE\" ON \"ISSUES\"(\"ISSUE_CREATION_DATE\");","361","CREATE UNIQUE INDEX \"ISSUES_KEE\" ON \"ISSUES\"(\"KEE\");","362","CREATE INDEX \"ISSUES_PROJECT_UUID\" ON \"ISSUES\"(\"PROJECT_UUID\");","363","CREATE INDEX \"ISSUES_RESOLUTION\" ON \"ISSUES\"(\"RESOLUTION\");","364","CREATE INDEX \"ISSUES_RULE_ID\" ON \"ISSUES\"(\"RULE_ID\");","365","CREATE INDEX \"ISSUES_UPDATED_AT\" ON \"ISSUES\"(\"UPDATED_AT\");","367","CREATE TABLE \"LIVE_MEASURES\"(","368","    \"UUID\" VARCHAR(40) NOT NULL,","369","    \"PROJECT_UUID\" VARCHAR(50) NOT NULL,","370","    \"COMPONENT_UUID\" VARCHAR(50) NOT NULL,","371","    \"METRIC_ID\" INTEGER NOT NULL,","372","    \"VALUE\" DOUBLE,","373","    \"TEXT_VALUE\" VARCHAR(4000),","374","    \"VARIATION\" DOUBLE,","375","    \"MEASURE_DATA\" BLOB,","376","    \"UPDATE_MARKER\" VARCHAR(40),","377","    \"CREATED_AT\" BIGINT NOT NULL,","378","    \"UPDATED_AT\" BIGINT NOT NULL","380","ALTER TABLE \"LIVE_MEASURES\" ADD CONSTRAINT \"PK_LIVE_MEASURES\" PRIMARY KEY(\"UUID\");","381","CREATE INDEX \"LIVE_MEASURES_PROJECT\" ON \"LIVE_MEASURES\"(\"PROJECT_UUID\");","382","CREATE UNIQUE INDEX \"LIVE_MEASURES_COMPONENT\" ON \"LIVE_MEASURES\"(\"COMPONENT_UUID\", \"METRIC_ID\");","384","CREATE TABLE \"MANUAL_MEASURES\"(","385","    \"ID\" BIGINT NOT NULL AUTO_INCREMENT (1,1),","386","    \"METRIC_ID\" INTEGER NOT NULL,","387","    \"VALUE\" DOUBLE,","388","    \"TEXT_VALUE\" VARCHAR(4000),","389","    \"USER_UUID\" VARCHAR(255),","390","    \"DESCRIPTION\" VARCHAR(4000),","391","    \"CREATED_AT\" BIGINT,","392","    \"UPDATED_AT\" BIGINT,","393","    \"COMPONENT_UUID\" VARCHAR(50) NOT NULL","395","ALTER TABLE \"MANUAL_MEASURES\" ADD CONSTRAINT \"PK_MANUAL_MEASURES\" PRIMARY KEY(\"ID\");","396","CREATE INDEX \"MANUAL_MEASURES_COMPONENT_UUID\" ON \"MANUAL_MEASURES\"(\"COMPONENT_UUID\");","398","CREATE TABLE \"METRICS\"(","399","    \"ID\" INTEGER NOT NULL AUTO_INCREMENT (1,1),","400","    \"NAME\" VARCHAR(64) NOT NULL,","401","    \"DESCRIPTION\" VARCHAR(255),","402","    \"DIRECTION\" INTEGER DEFAULT 0 NOT NULL,","403","    \"DOMAIN\" VARCHAR(64),","404","    \"SHORT_NAME\" VARCHAR(64),","405","    \"QUALITATIVE\" BOOLEAN DEFAULT FALSE NOT NULL,","406","    \"VAL_TYPE\" VARCHAR(8),","407","    \"USER_MANAGED\" BOOLEAN DEFAULT FALSE,","408","    \"ENABLED\" BOOLEAN DEFAULT TRUE,","409","    \"WORST_VALUE\" DOUBLE,","410","    \"BEST_VALUE\" DOUBLE,","411","    \"OPTIMIZED_BEST_VALUE\" BOOLEAN,","412","    \"HIDDEN\" BOOLEAN,","413","    \"DELETE_HISTORICAL_DATA\" BOOLEAN,","414","    \"DECIMAL_SCALE\" INTEGER","416","ALTER TABLE \"METRICS\" ADD CONSTRAINT \"PK_METRICS\" PRIMARY KEY(\"ID\");","417","CREATE UNIQUE INDEX \"METRICS_UNIQUE_NAME\" ON \"METRICS\"(\"NAME\");","419","CREATE TABLE \"NEW_CODE_PERIODS\"(","420","    \"UUID\" VARCHAR(40) NOT NULL,","421","    \"PROJECT_UUID\" VARCHAR(40),","422","    \"BRANCH_UUID\" VARCHAR(40),","423","    \"TYPE\" VARCHAR(30) NOT NULL,","424","    \"VALUE\" VARCHAR(40),","425","    \"UPDATED_AT\" BIGINT NOT NULL,","426","    \"CREATED_AT\" BIGINT NOT NULL","428","ALTER TABLE \"NEW_CODE_PERIODS\" ADD CONSTRAINT \"PK_NEW_CODE_PERIODS\" PRIMARY KEY(\"UUID\");","429","CREATE UNIQUE INDEX \"UNIQ_NEW_CODE_PERIODS\" ON \"NEW_CODE_PERIODS\"(\"PROJECT_UUID\", \"BRANCH_UUID\");","431","CREATE TABLE \"NOTIFICATIONS\"(","432","    \"ID\" INTEGER NOT NULL AUTO_INCREMENT (1,1),","433","    \"DATA\" BLOB","435","ALTER TABLE \"NOTIFICATIONS\" ADD CONSTRAINT \"PK_NOTIFICATIONS\" PRIMARY KEY(\"ID\");","437","CREATE TABLE \"ORG_QPROFILES\"(","438","    \"UUID\" VARCHAR(255) NOT NULL,","439","    \"ORGANIZATION_UUID\" VARCHAR(40) NOT NULL,","440","    \"RULES_PROFILE_UUID\" VARCHAR(255) NOT NULL,","441","    \"PARENT_UUID\" VARCHAR(255),","442","    \"LAST_USED\" BIGINT,","443","    \"USER_UPDATED_AT\" BIGINT,","444","    \"CREATED_AT\" BIGINT NOT NULL,","445","    \"UPDATED_AT\" BIGINT NOT NULL","447","ALTER TABLE \"ORG_QPROFILES\" ADD CONSTRAINT \"PK_ORG_QPROFILES\" PRIMARY KEY(\"UUID\");","448","CREATE INDEX \"QPROFILES_ORG_UUID\" ON \"ORG_QPROFILES\"(\"ORGANIZATION_UUID\");","449","CREATE INDEX \"QPROFILES_RP_UUID\" ON \"ORG_QPROFILES\"(\"RULES_PROFILE_UUID\");","450","CREATE INDEX \"ORG_QPROFILES_PARENT_UUID\" ON \"ORG_QPROFILES\"(\"PARENT_UUID\");","452","CREATE TABLE \"ORG_QUALITY_GATES\"(","453","    \"UUID\" VARCHAR(40) NOT NULL,","454","    \"ORGANIZATION_UUID\" VARCHAR(40) NOT NULL,","455","    \"QUALITY_GATE_UUID\" VARCHAR(40) NOT NULL","457","ALTER TABLE \"ORG_QUALITY_GATES\" ADD CONSTRAINT \"PK_ORG_QUALITY_GATES\" PRIMARY KEY(\"UUID\");","458","CREATE UNIQUE INDEX \"UNIQ_ORG_QUALITY_GATES\" ON \"ORG_QUALITY_GATES\"(\"ORGANIZATION_UUID\", \"QUALITY_GATE_UUID\");","460","CREATE TABLE \"ORGANIZATION_ALM_BINDINGS\"(","461","    \"UUID\" VARCHAR(40) NOT NULL,","462","    \"ORGANIZATION_UUID\" VARCHAR(40) NOT NULL,","463","    \"ALM_APP_INSTALL_UUID\" VARCHAR(40) NOT NULL,","464","    \"ALM_ID\" VARCHAR(40) NOT NULL,","465","    \"URL\" VARCHAR(2000) NOT NULL,","466","    \"USER_UUID\" VARCHAR(255) NOT NULL,","467","    \"MEMBERS_SYNC_ENABLED\" BOOLEAN,","468","    \"CREATED_AT\" BIGINT NOT NULL","470","ALTER TABLE \"ORGANIZATION_ALM_BINDINGS\" ADD CONSTRAINT \"PK_ORGANIZATION_ALM_BINDINGS\" PRIMARY KEY(\"UUID\");","471","CREATE UNIQUE INDEX \"ORG_ALM_BINDINGS_ORG\" ON \"ORGANIZATION_ALM_BINDINGS\"(\"ORGANIZATION_UUID\");","472","CREATE UNIQUE INDEX \"ORG_ALM_BINDINGS_INSTALL\" ON \"ORGANIZATION_ALM_BINDINGS\"(\"ALM_APP_INSTALL_UUID\");","474","CREATE TABLE \"ORGANIZATION_MEMBERS\"(","475","    \"ORGANIZATION_UUID\" VARCHAR(40) NOT NULL,","476","    \"USER_ID\" INTEGER NOT NULL","478","ALTER TABLE \"ORGANIZATION_MEMBERS\" ADD CONSTRAINT \"PK_ORGANIZATION_MEMBERS\" PRIMARY KEY(\"ORGANIZATION_UUID\", \"USER_ID\");","479","CREATE INDEX \"IX_ORG_MEMBERS_ON_USER_ID\" ON \"ORGANIZATION_MEMBERS\"(\"USER_ID\");","481","CREATE TABLE \"ORGANIZATIONS\"(","482","    \"UUID\" VARCHAR(40) NOT NULL,","483","    \"KEE\" VARCHAR(255) NOT NULL,","484","    \"NAME\" VARCHAR(255) NOT NULL,","485","    \"DESCRIPTION\" VARCHAR(256),","486","    \"URL\" VARCHAR(256),","487","    \"AVATAR_URL\" VARCHAR(256),","488","    \"GUARDED\" BOOLEAN,","489","    \"DEFAULT_GROUP_ID\" INTEGER,","490","    \"DEFAULT_QUALITY_GATE_UUID\" VARCHAR(40) NOT NULL,","491","    \"DEFAULT_PERM_TEMPLATE_PROJECT\" VARCHAR(40),","492","    \"DEFAULT_PERM_TEMPLATE_APP\" VARCHAR(40),","493","    \"DEFAULT_PERM_TEMPLATE_PORT\" VARCHAR(40),","494","    \"NEW_PROJECT_PRIVATE\" BOOLEAN NOT NULL,","495","    \"SUBSCRIPTION\" VARCHAR(40) NOT NULL,","496","    \"CREATED_AT\" BIGINT NOT NULL,","497","    \"UPDATED_AT\" BIGINT NOT NULL","499","ALTER TABLE \"ORGANIZATIONS\" ADD CONSTRAINT \"PK_ORGANIZATIONS\" PRIMARY KEY(\"UUID\");","500","CREATE UNIQUE INDEX \"ORGANIZATION_KEY\" ON \"ORGANIZATIONS\"(\"KEE\");","502","CREATE TABLE \"PERM_TEMPLATES_GROUPS\"(","503","    \"ID\" INTEGER NOT NULL AUTO_INCREMENT (1,1),","504","    \"GROUP_ID\" INTEGER,","505","    \"TEMPLATE_ID\" INTEGER NOT NULL,","506","    \"PERMISSION_REFERENCE\" VARCHAR(64) NOT NULL,","507","    \"CREATED_AT\" TIMESTAMP,","508","    \"UPDATED_AT\" TIMESTAMP","510","ALTER TABLE \"PERM_TEMPLATES_GROUPS\" ADD CONSTRAINT \"PK_PERM_TEMPLATES_GROUPS\" PRIMARY KEY(\"ID\");","512","CREATE TABLE \"PERM_TEMPLATES_USERS\"(","513","    \"ID\" INTEGER NOT NULL AUTO_INCREMENT (1,1),","514","    \"USER_ID\" INTEGER NOT NULL,","515","    \"TEMPLATE_ID\" INTEGER NOT NULL,","516","    \"PERMISSION_REFERENCE\" VARCHAR(64) NOT NULL,","517","    \"CREATED_AT\" TIMESTAMP,","518","    \"UPDATED_AT\" TIMESTAMP","520","ALTER TABLE \"PERM_TEMPLATES_USERS\" ADD CONSTRAINT \"PK_PERM_TEMPLATES_USERS\" PRIMARY KEY(\"ID\");","522","CREATE TABLE \"PERM_TPL_CHARACTERISTICS\"(","523","    \"ID\" INTEGER NOT NULL AUTO_INCREMENT (1,1),","524","    \"TEMPLATE_ID\" INTEGER NOT NULL,","525","    \"PERMISSION_KEY\" VARCHAR(64) NOT NULL,","526","    \"WITH_PROJECT_CREATOR\" BOOLEAN DEFAULT FALSE NOT NULL,","527","    \"CREATED_AT\" BIGINT NOT NULL,","528","    \"UPDATED_AT\" BIGINT NOT NULL","530","ALTER TABLE \"PERM_TPL_CHARACTERISTICS\" ADD CONSTRAINT \"PK_PERM_TPL_CHARACTERISTICS\" PRIMARY KEY(\"ID\");","531","CREATE UNIQUE INDEX \"UNIQ_PERM_TPL_CHARAC\" ON \"PERM_TPL_CHARACTERISTICS\"(\"TEMPLATE_ID\", \"PERMISSION_KEY\");","533","CREATE TABLE \"PERMISSION_TEMPLATES\"(","534","    \"ID\" INTEGER NOT NULL AUTO_INCREMENT (1,1),","535","    \"ORGANIZATION_UUID\" VARCHAR(40) NOT NULL,","536","    \"NAME\" VARCHAR(100) NOT NULL,","537","    \"KEE\" VARCHAR(100) NOT NULL,","538","    \"DESCRIPTION\" VARCHAR(4000),","539","    \"CREATED_AT\" TIMESTAMP,","540","    \"UPDATED_AT\" TIMESTAMP,","541","    \"KEY_PATTERN\" VARCHAR(500)","543","ALTER TABLE \"PERMISSION_TEMPLATES\" ADD CONSTRAINT \"PK_PERMISSION_TEMPLATES\" PRIMARY KEY(\"ID\");","545","CREATE TABLE \"PLUGINS\"(","546","    \"UUID\" VARCHAR(40) NOT NULL,","547","    \"KEE\" VARCHAR(200) NOT NULL,","548","    \"BASE_PLUGIN_KEY\" VARCHAR(200),","549","    \"FILE_HASH\" VARCHAR(200) NOT NULL,","550","    \"CREATED_AT\" BIGINT NOT NULL,","551","    \"UPDATED_AT\" BIGINT NOT NULL","553","ALTER TABLE \"PLUGINS\" ADD CONSTRAINT \"PK_PLUGINS\" PRIMARY KEY(\"UUID\");","554","CREATE UNIQUE INDEX \"PLUGINS_KEY\" ON \"PLUGINS\"(\"KEE\");","556","CREATE TABLE \"PROJECT_ALM_BINDINGS\"(","557","    \"UUID\" VARCHAR(40) NOT NULL,","558","    \"ALM_ID\" VARCHAR(40) NOT NULL,","559","    \"REPO_ID\" VARCHAR(256) NOT NULL,","560","    \"PROJECT_UUID\" VARCHAR(40) NOT NULL,","561","    \"GITHUB_SLUG\" VARCHAR(256),","562","    \"URL\" VARCHAR(2000) NOT NULL,","563","    \"CREATED_AT\" BIGINT NOT NULL,","564","    \"UPDATED_AT\" BIGINT NOT NULL","566","ALTER TABLE \"PROJECT_ALM_BINDINGS\" ADD CONSTRAINT \"PK_PROJECT_ALM_BINDINGS\" PRIMARY KEY(\"UUID\");","567","CREATE UNIQUE INDEX \"PROJECT_ALM_BINDINGS_ALM_REPO\" ON \"PROJECT_ALM_BINDINGS\"(\"ALM_ID\", \"REPO_ID\");","568","CREATE UNIQUE INDEX \"PROJECT_ALM_BINDINGS_PROJECT\" ON \"PROJECT_ALM_BINDINGS\"(\"PROJECT_UUID\");","570","CREATE TABLE \"PROJECT_ALM_SETTINGS\"(","571","    \"UUID\" VARCHAR(40) NOT NULL,","572","    \"ALM_SETTING_UUID\" VARCHAR(40) NOT NULL,","573","    \"PROJECT_UUID\" VARCHAR(50) NOT NULL,","574","    \"ALM_REPO\" VARCHAR(256),","575","    \"ALM_SLUG\" VARCHAR(256),","576","    \"UPDATED_AT\" BIGINT NOT NULL,","577","    \"CREATED_AT\" BIGINT NOT NULL","579","ALTER TABLE \"PROJECT_ALM_SETTINGS\" ADD CONSTRAINT \"PK_PROJECT_ALM_SETTINGS\" PRIMARY KEY(\"UUID\");","580","CREATE UNIQUE INDEX \"UNIQ_PROJECT_ALM_SETTINGS\" ON \"PROJECT_ALM_SETTINGS\"(\"PROJECT_UUID\");","581","CREATE INDEX \"PROJECT_ALM_SETTINGS_ALM\" ON \"PROJECT_ALM_SETTINGS\"(\"ALM_SETTING_UUID\");","583","CREATE TABLE \"PROJECT_BRANCHES\"(","584","    \"UUID\" VARCHAR(50) NOT NULL,","585","    \"PROJECT_UUID\" VARCHAR(50) NOT NULL,","586","    \"KEE\" VARCHAR(255) NOT NULL,","587","    \"BRANCH_TYPE\" VARCHAR(12),","588","    \"MERGE_BRANCH_UUID\" VARCHAR(50),","589","    \"KEY_TYPE\" VARCHAR(12) NOT NULL,","590","    \"PULL_REQUEST_BINARY\" BLOB,","591","    \"MANUAL_BASELINE_ANALYSIS_UUID\" VARCHAR(40),","592","    \"CREATED_AT\" BIGINT NOT NULL,","593","    \"UPDATED_AT\" BIGINT NOT NULL","595","ALTER TABLE \"PROJECT_BRANCHES\" ADD CONSTRAINT \"PK_PROJECT_BRANCHES\" PRIMARY KEY(\"UUID\");","596","CREATE UNIQUE INDEX \"PROJECT_BRANCHES_KEE_KEY_TYPE\" ON \"PROJECT_BRANCHES\"(\"PROJECT_UUID\", \"KEE\", \"KEY_TYPE\");","598","CREATE TABLE \"PROJECT_LINKS\"(","599","    \"UUID\" VARCHAR(40) NOT NULL,","600","    \"PROJECT_UUID\" VARCHAR(40) NOT NULL,","601","    \"LINK_TYPE\" VARCHAR(20) NOT NULL,","602","    \"NAME\" VARCHAR(128),","603","    \"HREF\" VARCHAR(2048) NOT NULL,","604","    \"CREATED_AT\" BIGINT NOT NULL,","605","    \"UPDATED_AT\" BIGINT NOT NULL","607","ALTER TABLE \"PROJECT_LINKS\" ADD CONSTRAINT \"PK_PROJECT_LINKS\" PRIMARY KEY(\"UUID\");","608","CREATE INDEX \"PROJECT_LINKS_PROJECT\" ON \"PROJECT_LINKS\"(\"PROJECT_UUID\");","610","CREATE TABLE \"PROJECT_MAPPINGS\"(","611","    \"UUID\" VARCHAR(40) NOT NULL,","612","    \"KEY_TYPE\" VARCHAR(200) NOT NULL,","613","    \"KEE\" VARCHAR(4000) NOT NULL,","614","    \"PROJECT_UUID\" VARCHAR(40) NOT NULL,","615","    \"CREATED_AT\" BIGINT NOT NULL","617","ALTER TABLE \"PROJECT_MAPPINGS\" ADD CONSTRAINT \"PK_PROJECT_MAPPINGS\" PRIMARY KEY(\"UUID\");","618","CREATE UNIQUE INDEX \"KEY_TYPE_KEE\" ON \"PROJECT_MAPPINGS\"(\"KEY_TYPE\", \"KEE\");","619","CREATE INDEX \"PROJECT_UUID\" ON \"PROJECT_MAPPINGS\"(\"PROJECT_UUID\");","621","CREATE TABLE \"PROJECT_MEASURES\"(","622","    \"ID\" BIGINT NOT NULL AUTO_INCREMENT (1,1),","623","    \"VALUE\" DOUBLE,","624","    \"METRIC_ID\" INTEGER NOT NULL,","625","    \"ANALYSIS_UUID\" VARCHAR(50) NOT NULL,","626","    \"COMPONENT_UUID\" VARCHAR(50) NOT NULL,","627","    \"TEXT_VALUE\" VARCHAR(4000),","628","    \"ALERT_STATUS\" VARCHAR(5),","629","    \"ALERT_TEXT\" VARCHAR(4000),","630","    \"DESCRIPTION\" VARCHAR(4000),","631","    \"PERSON_ID\" INTEGER,","632","    \"VARIATION_VALUE_1\" DOUBLE,","633","    \"VARIATION_VALUE_2\" DOUBLE,","634","    \"VARIATION_VALUE_3\" DOUBLE,","635","    \"VARIATION_VALUE_4\" DOUBLE,","636","    \"VARIATION_VALUE_5\" DOUBLE,","637","    \"MEASURE_DATA\" BLOB","639","ALTER TABLE \"PROJECT_MEASURES\" ADD CONSTRAINT \"PK_PROJECT_MEASURES\" PRIMARY KEY(\"ID\");","640","CREATE INDEX \"MEASURES_ANALYSIS_METRIC\" ON \"PROJECT_MEASURES\"(\"ANALYSIS_UUID\", \"METRIC_ID\");","641","CREATE INDEX \"MEASURES_COMPONENT_UUID\" ON \"PROJECT_MEASURES\"(\"COMPONENT_UUID\");","643","CREATE TABLE \"PROJECT_QGATES\"(","644","    \"PROJECT_UUID\" VARCHAR(40) NOT NULL,","645","    \"QUALITY_GATE_UUID\" VARCHAR(40) NOT NULL","647","ALTER TABLE \"PROJECT_QGATES\" ADD CONSTRAINT \"PK_PROJECT_QGATES\" PRIMARY KEY(\"PROJECT_UUID\");","648","CREATE UNIQUE INDEX \"UNIQ_PROJECT_QGATES\" ON \"PROJECT_QGATES\"(\"PROJECT_UUID\", \"QUALITY_GATE_UUID\");","650","CREATE TABLE \"PROJECT_QPROFILES\"(","651","    \"ID\" INTEGER NOT NULL AUTO_INCREMENT (1,1),","652","    \"PROJECT_UUID\" VARCHAR(50) NOT NULL,","653","    \"PROFILE_KEY\" VARCHAR(50) NOT NULL","655","ALTER TABLE \"PROJECT_QPROFILES\" ADD CONSTRAINT \"PK_PROJECT_QPROFILES\" PRIMARY KEY(\"ID\");","656","CREATE UNIQUE INDEX \"UNIQ_PROJECT_QPROFILES\" ON \"PROJECT_QPROFILES\"(\"PROJECT_UUID\", \"PROFILE_KEY\");","658","CREATE TABLE \"PROJECTS\"(","659","    \"ID\" INTEGER NOT NULL AUTO_INCREMENT (1,1),","660","    \"UUID\" VARCHAR(50) NOT NULL,","661","    \"ORGANIZATION_UUID\" VARCHAR(40) NOT NULL,","662","    \"KEE\" VARCHAR(400),","663","    \"DEPRECATED_KEE\" VARCHAR(400),","664","    \"NAME\" VARCHAR(2000),","665","    \"LONG_NAME\" VARCHAR(2000),","666","    \"DESCRIPTION\" VARCHAR(2000),","667","    \"ENABLED\" BOOLEAN DEFAULT TRUE NOT NULL,","668","    \"SCOPE\" VARCHAR(3),","669","    \"QUALIFIER\" VARCHAR(10),","670","    \"PRIVATE\" BOOLEAN NOT NULL,","671","    \"ROOT_UUID\" VARCHAR(50) NOT NULL,","672","    \"LANGUAGE\" VARCHAR(20),","673","    \"COPY_COMPONENT_UUID\" VARCHAR(50),","674","    \"DEVELOPER_UUID\" VARCHAR(50),","675","    \"PATH\" VARCHAR(2000),","676","    \"UUID_PATH\" VARCHAR(1500) NOT NULL,","677","    \"PROJECT_UUID\" VARCHAR(50) NOT NULL,","678","    \"MODULE_UUID\" VARCHAR(50),","679","    \"MODULE_UUID_PATH\" VARCHAR(1500),","680","    \"AUTHORIZATION_UPDATED_AT\" BIGINT,","681","    \"TAGS\" VARCHAR(500),","682","    \"MAIN_BRANCH_PROJECT_UUID\" VARCHAR(50),","683","    \"B_CHANGED\" BOOLEAN,","684","    \"B_NAME\" VARCHAR(500),","685","    \"B_LONG_NAME\" VARCHAR(500),","686","    \"B_DESCRIPTION\" VARCHAR(2000),","687","    \"B_ENABLED\" BOOLEAN,","688","    \"B_QUALIFIER\" VARCHAR(10),","689","    \"B_LANGUAGE\" VARCHAR(20),","690","    \"B_COPY_COMPONENT_UUID\" VARCHAR(50),","691","    \"B_PATH\" VARCHAR(2000),","692","    \"B_UUID_PATH\" VARCHAR(1500),","693","    \"B_MODULE_UUID\" VARCHAR(50),","694","    \"B_MODULE_UUID_PATH\" VARCHAR(1500),","695","    \"CREATED_AT\" TIMESTAMP","697","ALTER TABLE \"PROJECTS\" ADD CONSTRAINT \"PK_PROJECTS\" PRIMARY KEY(\"ID\");","698","CREATE INDEX \"PROJECTS_ORGANIZATION\" ON \"PROJECTS\"(\"ORGANIZATION_UUID\");","699","CREATE UNIQUE INDEX \"PROJECTS_KEE\" ON \"PROJECTS\"(\"KEE\");","700","CREATE INDEX \"PROJECTS_MODULE_UUID\" ON \"PROJECTS\"(\"MODULE_UUID\");","701","CREATE INDEX \"PROJECTS_PROJECT_UUID\" ON \"PROJECTS\"(\"PROJECT_UUID\");","702","CREATE INDEX \"PROJECTS_QUALIFIER\" ON \"PROJECTS\"(\"QUALIFIER\");","703","CREATE INDEX \"PROJECTS_ROOT_UUID\" ON \"PROJECTS\"(\"ROOT_UUID\");","704","CREATE INDEX \"PROJECTS_UUID\" ON \"PROJECTS\"(\"UUID\");","706","CREATE TABLE \"PROPERTIES\"(","707","    \"ID\" INTEGER NOT NULL AUTO_INCREMENT (1,1),","708","    \"PROP_KEY\" VARCHAR(512) NOT NULL,","709","    \"RESOURCE_ID\" BIGINT,","710","    \"USER_ID\" BIGINT,","711","    \"IS_EMPTY\" BOOLEAN NOT NULL,","712","    \"TEXT_VALUE\" VARCHAR(4000),","713","    \"CLOB_VALUE\" CLOB(2147483647),","714","    \"CREATED_AT\" BIGINT NOT NULL","716","ALTER TABLE \"PROPERTIES\" ADD CONSTRAINT \"PK_PROPERTIES\" PRIMARY KEY(\"ID\");","717","CREATE INDEX \"PROPERTIES_KEY\" ON \"PROPERTIES\"(\"PROP_KEY\");","719","CREATE TABLE \"QPROFILE_CHANGES\"(","720","    \"KEE\" VARCHAR(40) NOT NULL,","721","    \"RULES_PROFILE_UUID\" VARCHAR(255) NOT NULL,","722","    \"CHANGE_TYPE\" VARCHAR(20) NOT NULL,","723","    \"USER_UUID\" VARCHAR(255),","724","    \"CHANGE_DATA\" CLOB(2147483647),","725","    \"CREATED_AT\" BIGINT NOT NULL","727","ALTER TABLE \"QPROFILE_CHANGES\" ADD CONSTRAINT \"PK_QPROFILE_CHANGES\" PRIMARY KEY(\"KEE\");","728","CREATE INDEX \"QP_CHANGES_RULES_PROFILE_UUID\" ON \"QPROFILE_CHANGES\"(\"RULES_PROFILE_UUID\");","730","CREATE TABLE \"QPROFILE_EDIT_GROUPS\"(","731","    \"UUID\" VARCHAR(40) NOT NULL,","732","    \"GROUP_ID\" INTEGER NOT NULL,","733","    \"QPROFILE_UUID\" VARCHAR(255) NOT NULL,","734","    \"CREATED_AT\" BIGINT NOT NULL","736","ALTER TABLE \"QPROFILE_EDIT_GROUPS\" ADD CONSTRAINT \"PK_QPROFILE_EDIT_GROUPS\" PRIMARY KEY(\"UUID\");","737","CREATE INDEX \"QPROFILE_EDIT_GROUPS_QPROFILE\" ON \"QPROFILE_EDIT_GROUPS\"(\"QPROFILE_UUID\");","738","CREATE UNIQUE INDEX \"QPROFILE_EDIT_GROUPS_UNIQUE\" ON \"QPROFILE_EDIT_GROUPS\"(\"GROUP_ID\", \"QPROFILE_UUID\");","740","CREATE TABLE \"QPROFILE_EDIT_USERS\"(","741","    \"UUID\" VARCHAR(40) NOT NULL,","742","    \"USER_ID\" INTEGER NOT NULL,","743","    \"QPROFILE_UUID\" VARCHAR(255) NOT NULL,","744","    \"CREATED_AT\" BIGINT NOT NULL","746","ALTER TABLE \"QPROFILE_EDIT_USERS\" ADD CONSTRAINT \"PK_QPROFILE_EDIT_USERS\" PRIMARY KEY(\"UUID\");","747","CREATE INDEX \"QPROFILE_EDIT_USERS_QPROFILE\" ON \"QPROFILE_EDIT_USERS\"(\"QPROFILE_UUID\");","748","CREATE UNIQUE INDEX \"QPROFILE_EDIT_USERS_UNIQUE\" ON \"QPROFILE_EDIT_USERS\"(\"USER_ID\", \"QPROFILE_UUID\");","750","CREATE TABLE \"QUALITY_GATE_CONDITIONS\"(","751","    \"ID\" INTEGER NOT NULL AUTO_INCREMENT (1,1),","752","    \"QGATE_ID\" INTEGER,","753","    \"METRIC_ID\" INTEGER,","754","    \"PERIOD\" INTEGER,","755","    \"OPERATOR\" VARCHAR(3),","756","    \"VALUE_ERROR\" VARCHAR(64),","757","    \"VALUE_WARNING\" VARCHAR(64),","758","    \"CREATED_AT\" TIMESTAMP,","759","    \"UPDATED_AT\" TIMESTAMP","761","ALTER TABLE \"QUALITY_GATE_CONDITIONS\" ADD CONSTRAINT \"PK_QUALITY_GATE_CONDITIONS\" PRIMARY KEY(\"ID\");","763","CREATE TABLE \"QUALITY_GATES\"(","764","    \"ID\" INTEGER NOT NULL AUTO_INCREMENT (1,1),","765","    \"UUID\" VARCHAR(40) NOT NULL,","766","    \"NAME\" VARCHAR(100) NOT NULL,","767","    \"IS_BUILT_IN\" BOOLEAN NOT NULL,","768","    \"CREATED_AT\" TIMESTAMP,","769","    \"UPDATED_AT\" TIMESTAMP","771","ALTER TABLE \"QUALITY_GATES\" ADD CONSTRAINT \"PK_QUALITY_GATES\" PRIMARY KEY(\"ID\");","772","CREATE UNIQUE INDEX \"UNIQ_QUALITY_GATES_UUID\" ON \"QUALITY_GATES\"(\"UUID\");","774","CREATE TABLE \"RULE_REPOSITORIES\"(","775","    \"KEE\" VARCHAR(200) NOT NULL,","776","    \"LANGUAGE\" VARCHAR(20) NOT NULL,","777","    \"NAME\" VARCHAR(4000) NOT NULL,","778","    \"CREATED_AT\" BIGINT NOT NULL","780","ALTER TABLE \"RULE_REPOSITORIES\" ADD CONSTRAINT \"PK_RULE_REPOSITORIES\" PRIMARY KEY(\"KEE\");","782","CREATE TABLE \"RULES\"(","783","    \"ID\" INTEGER NOT NULL AUTO_INCREMENT (1,1),","784","    \"NAME\" VARCHAR(200),","785","    \"PLUGIN_RULE_KEY\" VARCHAR(200) NOT NULL,","786","    \"PLUGIN_KEY\" VARCHAR(200),","787","    \"PLUGIN_CONFIG_KEY\" VARCHAR(200),","788","    \"PLUGIN_NAME\" VARCHAR(255) NOT NULL,","789","    \"SCOPE\" VARCHAR(20) NOT NULL,","790","    \"DESCRIPTION\" CLOB(2147483647),","791","    \"PRIORITY\" INTEGER,","792","    \"TEMPLATE_ID\" INTEGER,","793","    \"STATUS\" VARCHAR(40),","794","    \"LANGUAGE\" VARCHAR(20),","795","    \"DEF_REMEDIATION_FUNCTION\" VARCHAR(20),","796","    \"DEF_REMEDIATION_GAP_MULT\" VARCHAR(20),","797","    \"DEF_REMEDIATION_BASE_EFFORT\" VARCHAR(20),","798","    \"GAP_DESCRIPTION\" VARCHAR(4000),","799","    \"SYSTEM_TAGS\" VARCHAR(4000),","800","    \"IS_TEMPLATE\" BOOLEAN DEFAULT FALSE NOT NULL,","801","    \"DESCRIPTION_FORMAT\" VARCHAR(20),","802","    \"RULE_TYPE\" TINYINT,","803","    \"SECURITY_STANDARDS\" VARCHAR(4000),","804","    \"IS_AD_HOC\" BOOLEAN NOT NULL,","805","    \"IS_EXTERNAL\" BOOLEAN NOT NULL,","806","    \"CREATED_AT\" BIGINT,","807","    \"UPDATED_AT\" BIGINT","809","ALTER TABLE \"RULES\" ADD CONSTRAINT \"PK_RULES\" PRIMARY KEY(\"ID\");","810","CREATE UNIQUE INDEX \"RULES_REPO_KEY\" ON \"RULES\"(\"PLUGIN_RULE_KEY\", \"PLUGIN_NAME\");","812","CREATE TABLE \"RULES_METADATA\"(","813","    \"RULE_ID\" INTEGER NOT NULL,","814","    \"ORGANIZATION_UUID\" VARCHAR(40) NOT NULL,","815","    \"NOTE_DATA\" CLOB(2147483647),","816","    \"NOTE_USER_UUID\" VARCHAR(255),","817","    \"NOTE_CREATED_AT\" BIGINT,","818","    \"NOTE_UPDATED_AT\" BIGINT,","819","    \"REMEDIATION_FUNCTION\" VARCHAR(20),","820","    \"REMEDIATION_GAP_MULT\" VARCHAR(20),","821","    \"REMEDIATION_BASE_EFFORT\" VARCHAR(20),","822","    \"TAGS\" VARCHAR(4000),","823","    \"AD_HOC_NAME\" VARCHAR(200),","824","    \"AD_HOC_DESCRIPTION\" CLOB(2147483647),","825","    \"AD_HOC_SEVERITY\" VARCHAR(10),","826","    \"AD_HOC_TYPE\" TINYINT,","827","    \"CREATED_AT\" BIGINT NOT NULL,","828","    \"UPDATED_AT\" BIGINT NOT NULL","830","ALTER TABLE \"RULES_METADATA\" ADD CONSTRAINT \"PK_RULES_METADATA\" PRIMARY KEY(\"RULE_ID\", \"ORGANIZATION_UUID\");","832","CREATE TABLE \"RULES_PARAMETERS\"(","833","    \"ID\" INTEGER NOT NULL AUTO_INCREMENT (1,1),","834","    \"RULE_ID\" INTEGER NOT NULL,","835","    \"NAME\" VARCHAR(128) NOT NULL,","836","    \"DESCRIPTION\" VARCHAR(4000),","837","    \"PARAM_TYPE\" VARCHAR(512) NOT NULL,","838","    \"DEFAULT_VALUE\" VARCHAR(4000)","840","ALTER TABLE \"RULES_PARAMETERS\" ADD CONSTRAINT \"PK_RULES_PARAMETERS\" PRIMARY KEY(\"ID\");","841","CREATE INDEX \"RULES_PARAMETERS_RULE_ID\" ON \"RULES_PARAMETERS\"(\"RULE_ID\");","842","CREATE UNIQUE INDEX \"RULES_PARAMETERS_UNIQUE\" ON \"RULES_PARAMETERS\"(\"RULE_ID\", \"NAME\");","844","CREATE TABLE \"RULES_PROFILES\"(","845","    \"ID\" INTEGER NOT NULL AUTO_INCREMENT (1,1),","846","    \"NAME\" VARCHAR(100) NOT NULL,","847","    \"LANGUAGE\" VARCHAR(20),","848","    \"KEE\" VARCHAR(255) NOT NULL,","849","    \"IS_BUILT_IN\" BOOLEAN NOT NULL,","850","    \"RULES_UPDATED_AT\" VARCHAR(100),","851","    \"CREATED_AT\" TIMESTAMP,","852","    \"UPDATED_AT\" TIMESTAMP","854","ALTER TABLE \"RULES_PROFILES\" ADD CONSTRAINT \"PK_RULES_PROFILES\" PRIMARY KEY(\"ID\");","855","CREATE UNIQUE INDEX \"UNIQ_QPROF_KEY\" ON \"RULES_PROFILES\"(\"KEE\");","857","CREATE TABLE \"SNAPSHOTS\"(","858","    \"ID\" INTEGER NOT NULL AUTO_INCREMENT (1,1),","859","    \"UUID\" VARCHAR(50) NOT NULL,","860","    \"COMPONENT_UUID\" VARCHAR(50) NOT NULL,","861","    \"STATUS\" VARCHAR(4) DEFAULT 'U' NOT NULL,","862","    \"ISLAST\" BOOLEAN DEFAULT FALSE NOT NULL,","863","    \"VERSION\" VARCHAR(500),","864","    \"PURGE_STATUS\" INTEGER,","865","    \"BUILD_STRING\" VARCHAR(100),","866","    \"REVISION\" VARCHAR(100),","867","    \"BUILD_DATE\" BIGINT,","868","    \"PERIOD1_MODE\" VARCHAR(100),","869","    \"PERIOD1_PARAM\" VARCHAR(100),","870","    \"PERIOD2_MODE\" VARCHAR(100),","871","    \"PERIOD2_PARAM\" VARCHAR(100),","872","    \"PERIOD3_MODE\" VARCHAR(100),","873","    \"PERIOD3_PARAM\" VARCHAR(100),","874","    \"PERIOD4_MODE\" VARCHAR(100),","875","    \"PERIOD4_PARAM\" VARCHAR(100),","876","    \"PERIOD5_MODE\" VARCHAR(100),","877","    \"PERIOD5_PARAM\" VARCHAR(100),","878","    \"PERIOD1_DATE\" BIGINT,","879","    \"PERIOD2_DATE\" BIGINT,","880","    \"PERIOD3_DATE\" BIGINT,","881","    \"PERIOD4_DATE\" BIGINT,","882","    \"PERIOD5_DATE\" BIGINT,","883","    \"CREATED_AT\" BIGINT","885","ALTER TABLE \"SNAPSHOTS\" ADD CONSTRAINT \"PK_SNAPSHOTS\" PRIMARY KEY(\"ID\");","886","CREATE UNIQUE INDEX \"ANALYSES_UUID\" ON \"SNAPSHOTS\"(\"UUID\");","887","CREATE INDEX \"SNAPSHOT_COMPONENT\" ON \"SNAPSHOTS\"(\"COMPONENT_UUID\");","889","CREATE TABLE \"USER_PROPERTIES\"(","890","    \"UUID\" VARCHAR(40) NOT NULL,","891","    \"USER_UUID\" VARCHAR(255) NOT NULL,","892","    \"KEE\" VARCHAR(100) NOT NULL,","893","    \"TEXT_VALUE\" VARCHAR(4000) NOT NULL,","894","    \"CREATED_AT\" BIGINT NOT NULL,","895","    \"UPDATED_AT\" BIGINT NOT NULL","897","ALTER TABLE \"USER_PROPERTIES\" ADD CONSTRAINT \"PK_USER_PROPERTIES\" PRIMARY KEY(\"UUID\");","898","CREATE UNIQUE INDEX \"USER_PROPERTIES_USER_UUID_KEE\" ON \"USER_PROPERTIES\"(\"USER_UUID\", \"KEE\");","900","CREATE TABLE \"USER_ROLES\"(","901","    \"ID\" INTEGER NOT NULL AUTO_INCREMENT (1,1),","902","    \"ORGANIZATION_UUID\" VARCHAR(40) NOT NULL,","903","    \"USER_ID\" INTEGER,","904","    \"RESOURCE_ID\" INTEGER,","905","    \"ROLE\" VARCHAR(64) NOT NULL","907","ALTER TABLE \"USER_ROLES\" ADD CONSTRAINT \"PK_USER_ROLES\" PRIMARY KEY(\"ID\");","908","CREATE INDEX \"USER_ROLES_RESOURCE\" ON \"USER_ROLES\"(\"RESOURCE_ID\");","909","CREATE INDEX \"USER_ROLES_USER\" ON \"USER_ROLES\"(\"USER_ID\");","911","CREATE TABLE \"USER_TOKENS\"(","912","    \"ID\" INTEGER NOT NULL AUTO_INCREMENT (1,1),","913","    \"USER_UUID\" VARCHAR(255) NOT NULL,","914","    \"NAME\" VARCHAR(100) NOT NULL,","915","    \"TOKEN_HASH\" VARCHAR(255) NOT NULL,","916","    \"LAST_CONNECTION_DATE\" BIGINT,","917","    \"CREATED_AT\" BIGINT NOT NULL","919","ALTER TABLE \"USER_TOKENS\" ADD CONSTRAINT \"PK_USER_TOKENS\" PRIMARY KEY(\"ID\");","920","CREATE UNIQUE INDEX \"USER_TOKENS_USER_UUID_NAME\" ON \"USER_TOKENS\"(\"USER_UUID\", \"NAME\");","921","CREATE UNIQUE INDEX \"USER_TOKENS_TOKEN_HASH\" ON \"USER_TOKENS\"(\"TOKEN_HASH\");","923","CREATE TABLE \"USERS\"(","924","    \"ID\" INTEGER NOT NULL AUTO_INCREMENT (1,1),","925","    \"UUID\" VARCHAR(255) NOT NULL,","926","    \"LOGIN\" VARCHAR(255) NOT NULL,","927","    \"ORGANIZATION_UUID\" VARCHAR(40),","928","    \"NAME\" VARCHAR(200),","929","    \"EMAIL\" VARCHAR(100),","930","    \"CRYPTED_PASSWORD\" VARCHAR(100),","931","    \"SALT\" VARCHAR(40),","932","    \"HASH_METHOD\" VARCHAR(10),","933","    \"ACTIVE\" BOOLEAN DEFAULT TRUE,","934","    \"SCM_ACCOUNTS\" VARCHAR(4000),","935","    \"EXTERNAL_LOGIN\" VARCHAR(255) NOT NULL,","936","    \"EXTERNAL_IDENTITY_PROVIDER\" VARCHAR(100) NOT NULL,","937","    \"EXTERNAL_ID\" VARCHAR(255) NOT NULL,","938","    \"IS_ROOT\" BOOLEAN NOT NULL,","939","    \"USER_LOCAL\" BOOLEAN,","940","    \"ONBOARDED\" BOOLEAN NOT NULL,","941","    \"HOMEPAGE_TYPE\" VARCHAR(40),","942","    \"HOMEPAGE_PARAMETER\" VARCHAR(40),","943","    \"LAST_CONNECTION_DATE\" BIGINT,","944","    \"CREATED_AT\" BIGINT,","945","    \"UPDATED_AT\" BIGINT","947","ALTER TABLE \"USERS\" ADD CONSTRAINT \"PK_USERS\" PRIMARY KEY(\"ID\");","948","CREATE UNIQUE INDEX \"USERS_LOGIN\" ON \"USERS\"(\"LOGIN\");","949","CREATE INDEX \"USERS_UPDATED_AT\" ON \"USERS\"(\"UPDATED_AT\");","950","CREATE UNIQUE INDEX \"USERS_UUID\" ON \"USERS\"(\"UUID\");","951","CREATE UNIQUE INDEX \"UNIQ_EXTERNAL_ID\" ON \"USERS\"(\"EXTERNAL_IDENTITY_PROVIDER\", \"EXTERNAL_ID\");","952","CREATE UNIQUE INDEX \"UNIQ_EXTERNAL_LOGIN\" ON \"USERS\"(\"EXTERNAL_IDENTITY_PROVIDER\", \"EXTERNAL_LOGIN\");","954","CREATE TABLE \"WEBHOOK_DELIVERIES\"(","955","    \"UUID\" VARCHAR(40) NOT NULL,","956","    \"WEBHOOK_UUID\" VARCHAR(40) NOT NULL,","957","    \"COMPONENT_UUID\" VARCHAR(40) NOT NULL,","958","    \"CE_TASK_UUID\" VARCHAR(40),","959","    \"ANALYSIS_UUID\" VARCHAR(40),","960","    \"NAME\" VARCHAR(100) NOT NULL,","961","    \"URL\" VARCHAR(2000) NOT NULL,","962","    \"SUCCESS\" BOOLEAN NOT NULL,","963","    \"HTTP_STATUS\" INTEGER,","964","    \"DURATION_MS\" BIGINT NOT NULL,","965","    \"PAYLOAD\" CLOB(2147483647) NOT NULL,","966","    \"ERROR_STACKTRACE\" CLOB(2147483647),","967","    \"CREATED_AT\" BIGINT NOT NULL","969","ALTER TABLE \"WEBHOOK_DELIVERIES\" ADD CONSTRAINT \"PK_WEBHOOK_DELIVERIES\" PRIMARY KEY(\"UUID\");","970","CREATE INDEX \"COMPONENT_UUID\" ON \"WEBHOOK_DELIVERIES\"(\"COMPONENT_UUID\");","971","CREATE INDEX \"CE_TASK_UUID\" ON \"WEBHOOK_DELIVERIES\"(\"CE_TASK_UUID\");","973","CREATE TABLE \"WEBHOOKS\"(","974","    \"UUID\" VARCHAR(40) NOT NULL,","975","    \"ORGANIZATION_UUID\" VARCHAR(40),","976","    \"PROJECT_UUID\" VARCHAR(40),","977","    \"NAME\" VARCHAR(100) NOT NULL,","978","    \"URL\" VARCHAR(2000) NOT NULL,","979","    \"SECRET\" VARCHAR(200),","980","    \"CREATED_AT\" BIGINT NOT NULL,","981","    \"UPDATED_AT\" BIGINT","983","ALTER TABLE \"WEBHOOKS\" ADD CONSTRAINT \"PK_WEBHOOKS\" PRIMARY KEY(\"UUID\");","984","CREATE INDEX \"ORGANIZATION_WEBHOOK\" ON \"WEBHOOKS\"(\"ORGANIZATION_UUID\");","985","CREATE INDEX \"PROJECT_WEBHOOK\" ON \"WEBHOOKS\"(\"PROJECT_UUID\");"],"delete":["11","CREATE TABLE SCHEMA_MIGRATIONS(","12","    VERSION VARCHAR(255) NOT NULL","15","CREATE TABLE ACTIVE_RULE_PARAMETERS(","16","    ID INTEGER NOT NULL AUTO_INCREMENT (1,1),","17","    ACTIVE_RULE_ID INTEGER NOT NULL,","18","    RULES_PARAMETER_ID INTEGER NOT NULL,","19","    VALUE VARCHAR(4000),","20","    RULES_PARAMETER_KEY VARCHAR(128)","22","ALTER TABLE ACTIVE_RULE_PARAMETERS ADD CONSTRAINT PK_ACTIVE_RULE_PARAMETERS PRIMARY KEY(ID);","23","CREATE INDEX IX_ARP_ON_ACTIVE_RULE_ID ON ACTIVE_RULE_PARAMETERS(ACTIVE_RULE_ID);","25","CREATE TABLE ACTIVE_RULES(","26","    ID INTEGER NOT NULL AUTO_INCREMENT (1,1),","27","    PROFILE_ID INTEGER NOT NULL,","28","    RULE_ID INTEGER NOT NULL,","29","    FAILURE_LEVEL INTEGER NOT NULL,","30","    INHERITANCE VARCHAR(10),","31","    CREATED_AT BIGINT,","32","    UPDATED_AT BIGINT","34","ALTER TABLE ACTIVE_RULES ADD CONSTRAINT PK_ACTIVE_RULES PRIMARY KEY(ID);","35","CREATE UNIQUE INDEX UNIQ_PROFILE_RULE_IDS ON ACTIVE_RULES(PROFILE_ID, RULE_ID);","37","CREATE TABLE ALM_APP_INSTALLS(","38","    UUID VARCHAR(40) NOT NULL,","39","    ALM_ID VARCHAR(40) NOT NULL,","40","    OWNER_ID VARCHAR(4000) NOT NULL,","41","    INSTALL_ID VARCHAR(4000) NOT NULL,","42","    IS_OWNER_USER BOOLEAN NOT NULL,","43","    USER_EXTERNAL_ID VARCHAR(255),","44","    CREATED_AT BIGINT NOT NULL,","45","    UPDATED_AT BIGINT NOT NULL","47","ALTER TABLE ALM_APP_INSTALLS ADD CONSTRAINT PK_ALM_APP_INSTALLS PRIMARY KEY(UUID);","48","CREATE UNIQUE INDEX ALM_APP_INSTALLS_OWNER ON ALM_APP_INSTALLS(ALM_ID, OWNER_ID);","49","CREATE UNIQUE INDEX ALM_APP_INSTALLS_INSTALL ON ALM_APP_INSTALLS(ALM_ID, INSTALL_ID);","50","CREATE INDEX ALM_APP_INSTALLS_EXTERNAL_ID ON ALM_APP_INSTALLS(USER_EXTERNAL_ID);","52","CREATE TABLE ALM_SETTINGS(","53","    UUID VARCHAR(40) NOT NULL,","54","    ALM_ID VARCHAR(40) NOT NULL,","55","    KEE VARCHAR(200) NOT NULL,","56","    URL VARCHAR(2000),","57","    APP_ID VARCHAR(80),","58","    PRIVATE_KEY VARCHAR(2000),","59","    PAT VARCHAR(2000),","60","    UPDATED_AT BIGINT NOT NULL,","61","    CREATED_AT BIGINT NOT NULL","63","ALTER TABLE ALM_SETTINGS ADD CONSTRAINT PK_ALM_SETTINGS PRIMARY KEY(UUID);","64","CREATE UNIQUE INDEX UNIQ_ALM_SETTINGS ON ALM_SETTINGS(KEE);","66","CREATE TABLE ANALYSIS_PROPERTIES(","67","    UUID VARCHAR(40) NOT NULL,","68","    ANALYSIS_UUID VARCHAR(40) NOT NULL,","69","    KEE VARCHAR(512) NOT NULL,","70","    TEXT_VALUE VARCHAR(4000),","71","    CLOB_VALUE CLOB(2147483647),","72","    IS_EMPTY BOOLEAN NOT NULL,","73","    CREATED_AT BIGINT NOT NULL","75","ALTER TABLE ANALYSIS_PROPERTIES ADD CONSTRAINT PK_ANALYSIS_PROPERTIES PRIMARY KEY(UUID);","76","CREATE INDEX ANALYSIS_PROPERTIES_ANALYSIS ON ANALYSIS_PROPERTIES(ANALYSIS_UUID);","78","CREATE TABLE CE_ACTIVITY(","79","    ID INTEGER NOT NULL AUTO_INCREMENT (1,1),","80","    UUID VARCHAR(40) NOT NULL,","81","    TASK_TYPE VARCHAR(15) NOT NULL,","82","    MAIN_COMPONENT_UUID VARCHAR(40),","83","    COMPONENT_UUID VARCHAR(40),","84","    STATUS VARCHAR(15) NOT NULL,","85","    MAIN_IS_LAST BOOLEAN NOT NULL,","86","    MAIN_IS_LAST_KEY VARCHAR(55) NOT NULL,","87","    IS_LAST BOOLEAN NOT NULL,","88","    IS_LAST_KEY VARCHAR(55) NOT NULL,","89","    SUBMITTER_UUID VARCHAR(255),","90","    SUBMITTED_AT BIGINT NOT NULL,","91","    STARTED_AT BIGINT,","92","    EXECUTED_AT BIGINT,","93","    EXECUTION_COUNT INTEGER NOT NULL,","94","    EXECUTION_TIME_MS BIGINT,","95","    ANALYSIS_UUID VARCHAR(50),","96","    ERROR_MESSAGE VARCHAR(1000),","97","    ERROR_STACKTRACE CLOB(2147483647),","98","    ERROR_TYPE VARCHAR(20),","99","    WORKER_UUID VARCHAR(40),","100","    CREATED_AT BIGINT NOT NULL,","101","    UPDATED_AT BIGINT NOT NULL","103","ALTER TABLE CE_ACTIVITY ADD CONSTRAINT PK_CE_ACTIVITY PRIMARY KEY(ID);","104","CREATE INDEX CE_ACTIVITY_COMPONENT ON CE_ACTIVITY(COMPONENT_UUID);","105","CREATE INDEX CE_ACTIVITY_ISLAST ON CE_ACTIVITY(IS_LAST, STATUS);","106","CREATE INDEX CE_ACTIVITY_ISLAST_KEY ON CE_ACTIVITY(IS_LAST_KEY);","107","CREATE INDEX CE_ACTIVITY_MAIN_COMPONENT ON CE_ACTIVITY(MAIN_COMPONENT_UUID);","108","CREATE INDEX CE_ACTIVITY_MAIN_ISLAST ON CE_ACTIVITY(MAIN_IS_LAST, STATUS);","109","CREATE INDEX CE_ACTIVITY_MAIN_ISLAST_KEY ON CE_ACTIVITY(MAIN_IS_LAST_KEY);","110","CREATE UNIQUE INDEX CE_ACTIVITY_UUID ON CE_ACTIVITY(UUID);","112","CREATE TABLE CE_QUEUE(","113","    ID INTEGER NOT NULL AUTO_INCREMENT (1,1),","114","    UUID VARCHAR(40) NOT NULL,","115","    TASK_TYPE VARCHAR(15) NOT NULL,","116","    MAIN_COMPONENT_UUID VARCHAR(40),","117","    COMPONENT_UUID VARCHAR(40),","118","    STATUS VARCHAR(15),","119","    SUBMITTER_UUID VARCHAR(255),","120","    STARTED_AT BIGINT,","121","    WORKER_UUID VARCHAR(40),","122","    EXECUTION_COUNT INTEGER NOT NULL,","123","    CREATED_AT BIGINT NOT NULL,","124","    UPDATED_AT BIGINT NOT NULL","126","ALTER TABLE CE_QUEUE ADD CONSTRAINT PK_CE_QUEUE PRIMARY KEY(ID);","127","CREATE INDEX CE_QUEUE_MAIN_COMPONENT ON CE_QUEUE(MAIN_COMPONENT_UUID);","128","CREATE INDEX CE_QUEUE_COMPONENT ON CE_QUEUE(COMPONENT_UUID);","129","CREATE UNIQUE INDEX CE_QUEUE_UUID ON CE_QUEUE(UUID);","131","CREATE TABLE CE_SCANNER_CONTEXT(","132","    TASK_UUID VARCHAR(40) NOT NULL,","133","    CONTEXT_DATA BLOB NOT NULL,","134","    CREATED_AT BIGINT NOT NULL,","135","    UPDATED_AT BIGINT NOT NULL","137","ALTER TABLE CE_SCANNER_CONTEXT ADD CONSTRAINT PK_CE_SCANNER_CONTEXT PRIMARY KEY(TASK_UUID);","139","CREATE TABLE CE_TASK_CHARACTERISTICS(","140","    UUID VARCHAR(40) NOT NULL,","141","    TASK_UUID VARCHAR(40) NOT NULL,","142","    KEE VARCHAR(512) NOT NULL,","143","    TEXT_VALUE VARCHAR(512)","145","ALTER TABLE CE_TASK_CHARACTERISTICS ADD CONSTRAINT PK_CE_TASK_CHARACTERISTICS PRIMARY KEY(UUID);","146","CREATE INDEX CE_CHARACTERISTICS_TASK_UUID ON CE_TASK_CHARACTERISTICS(TASK_UUID);","148","CREATE TABLE CE_TASK_INPUT(","149","    TASK_UUID VARCHAR(40) NOT NULL,","150","    INPUT_DATA BLOB,","151","    CREATED_AT BIGINT NOT NULL,","152","    UPDATED_AT BIGINT NOT NULL","154","ALTER TABLE CE_TASK_INPUT ADD CONSTRAINT PK_CE_TASK_INPUT PRIMARY KEY(TASK_UUID);","156","CREATE TABLE CE_TASK_MESSAGE(","157","    UUID VARCHAR(40) NOT NULL,","158","    TASK_UUID VARCHAR(40) NOT NULL,","159","    MESSAGE VARCHAR(4000) NOT NULL,","160","    CREATED_AT BIGINT NOT NULL","162","ALTER TABLE CE_TASK_MESSAGE ADD CONSTRAINT PK_CE_TASK_MESSAGE PRIMARY KEY(UUID);","163","CREATE INDEX CE_TASK_MESSAGE_TASK ON CE_TASK_MESSAGE(TASK_UUID);","165","CREATE TABLE DEFAULT_QPROFILES(","166","    ORGANIZATION_UUID VARCHAR(40) NOT NULL,","167","    LANGUAGE VARCHAR(20) NOT NULL,","168","    QPROFILE_UUID VARCHAR(255) NOT NULL,","169","    CREATED_AT BIGINT NOT NULL,","170","    UPDATED_AT BIGINT NOT NULL","172","ALTER TABLE DEFAULT_QPROFILES ADD CONSTRAINT PK_DEFAULT_QPROFILES PRIMARY KEY(ORGANIZATION_UUID, LANGUAGE);","173","CREATE UNIQUE INDEX UNIQ_DEFAULT_QPROFILES_UUID ON DEFAULT_QPROFILES(QPROFILE_UUID);","175","CREATE TABLE DEPRECATED_RULE_KEYS(","176","    UUID VARCHAR(40) NOT NULL,","177","    RULE_ID INTEGER NOT NULL,","178","    OLD_REPOSITORY_KEY VARCHAR(255) NOT NULL,","179","    OLD_RULE_KEY VARCHAR(200) NOT NULL,","180","    CREATED_AT BIGINT NOT NULL","182","ALTER TABLE DEPRECATED_RULE_KEYS ADD CONSTRAINT PK_DEPRECATED_RULE_KEYS PRIMARY KEY(UUID);","183","CREATE UNIQUE INDEX UNIQ_DEPRECATED_RULE_KEYS ON DEPRECATED_RULE_KEYS(OLD_REPOSITORY_KEY, OLD_RULE_KEY);","184","CREATE INDEX RULE_ID_DEPRECATED_RULE_KEYS ON DEPRECATED_RULE_KEYS(RULE_ID);","186","CREATE TABLE DUPLICATIONS_INDEX(","187","    ID BIGINT NOT NULL AUTO_INCREMENT (1,1),","188","    ANALYSIS_UUID VARCHAR(50) NOT NULL,","189","    COMPONENT_UUID VARCHAR(50) NOT NULL,","190","    HASH VARCHAR(50) NOT NULL,","191","    INDEX_IN_FILE INTEGER NOT NULL,","192","    START_LINE INTEGER NOT NULL,","193","    END_LINE INTEGER NOT NULL","195","ALTER TABLE DUPLICATIONS_INDEX ADD CONSTRAINT PK_DUPLICATIONS_INDEX PRIMARY KEY(ID);","196","CREATE INDEX DUPLICATIONS_INDEX_HASH ON DUPLICATIONS_INDEX(HASH);","197","CREATE INDEX DUPLICATION_ANALYSIS_COMPONENT ON DUPLICATIONS_INDEX(ANALYSIS_UUID, COMPONENT_UUID);","199","CREATE TABLE ES_QUEUE(","200","    UUID VARCHAR(40) NOT NULL,","201","    DOC_TYPE VARCHAR(40) NOT NULL,","202","    DOC_ID VARCHAR(4000) NOT NULL,","203","    DOC_ID_TYPE VARCHAR(20),","204","    DOC_ROUTING VARCHAR(4000),","205","    CREATED_AT BIGINT NOT NULL","207","ALTER TABLE ES_QUEUE ADD CONSTRAINT PK_ES_QUEUE PRIMARY KEY(UUID);","208","CREATE INDEX ES_QUEUE_CREATED_AT ON ES_QUEUE(CREATED_AT);","210","CREATE TABLE EVENT_COMPONENT_CHANGES(","211","    UUID VARCHAR(40) NOT NULL,","212","    EVENT_UUID VARCHAR(40) NOT NULL,","213","    EVENT_COMPONENT_UUID VARCHAR(50) NOT NULL,","214","    EVENT_ANALYSIS_UUID VARCHAR(50) NOT NULL,","215","    CHANGE_CATEGORY VARCHAR(12) NOT NULL,","216","    COMPONENT_UUID VARCHAR(50) NOT NULL,","217","    COMPONENT_KEY VARCHAR(400) NOT NULL,","218","    COMPONENT_NAME VARCHAR(2000) NOT NULL,","219","    COMPONENT_BRANCH_KEY VARCHAR(255),","220","    CREATED_AT BIGINT NOT NULL","222","ALTER TABLE EVENT_COMPONENT_CHANGES ADD CONSTRAINT PK_EVENT_COMPONENT_CHANGES PRIMARY KEY(UUID);","223","CREATE UNIQUE INDEX EVENT_COMPONENT_CHANGES_UNIQUE ON EVENT_COMPONENT_CHANGES(EVENT_UUID, CHANGE_CATEGORY, COMPONENT_UUID);","224","CREATE INDEX EVENT_CPNT_CHANGES_CPNT ON EVENT_COMPONENT_CHANGES(EVENT_COMPONENT_UUID);","225","CREATE INDEX EVENT_CPNT_CHANGES_ANALYSIS ON EVENT_COMPONENT_CHANGES(EVENT_ANALYSIS_UUID);","227","CREATE TABLE EVENTS(","228","    ID INTEGER NOT NULL AUTO_INCREMENT (1,1),","229","    UUID VARCHAR(40) NOT NULL,","230","    ANALYSIS_UUID VARCHAR(50) NOT NULL,","231","    NAME VARCHAR(400),","232","    CATEGORY VARCHAR(50),","233","    DESCRIPTION VARCHAR(4000),","234","    EVENT_DATA VARCHAR(4000),","235","    EVENT_DATE BIGINT NOT NULL,","236","    CREATED_AT BIGINT NOT NULL,","237","    COMPONENT_UUID VARCHAR(50) NOT NULL","239","ALTER TABLE EVENTS ADD CONSTRAINT PK_EVENTS PRIMARY KEY(ID);","240","CREATE UNIQUE INDEX EVENTS_UUID ON EVENTS(UUID);","241","CREATE INDEX EVENTS_ANALYSIS ON EVENTS(ANALYSIS_UUID);","242","CREATE INDEX EVENTS_COMPONENT_UUID ON EVENTS(COMPONENT_UUID);","244","CREATE TABLE FILE_SOURCES(","245","    ID INTEGER NOT NULL AUTO_INCREMENT (1,1),","246","    PROJECT_UUID VARCHAR(50) NOT NULL,","247","    FILE_UUID VARCHAR(50) NOT NULL,","248","    LINE_HASHES CLOB(2147483647),","249","    LINE_HASHES_VERSION INTEGER,","250","    DATA_HASH VARCHAR(50),","251","    SRC_HASH VARCHAR(50),","252","    REVISION VARCHAR(100),","253","    LINE_COUNT INTEGER NOT NULL,","254","    BINARY_DATA BLOB,","255","    CREATED_AT BIGINT NOT NULL,","256","    UPDATED_AT BIGINT NOT NULL","258","ALTER TABLE FILE_SOURCES ADD CONSTRAINT PK_FILE_SOURCES PRIMARY KEY(ID);","259","CREATE UNIQUE INDEX FILE_SOURCES_FILE_UUID ON FILE_SOURCES(FILE_UUID);","260","CREATE INDEX FILE_SOURCES_PROJECT_UUID ON FILE_SOURCES(PROJECT_UUID);","261","CREATE INDEX FILE_SOURCES_UPDATED_AT ON FILE_SOURCES(UPDATED_AT);","263","CREATE TABLE GROUP_ROLES(","264","    ID INTEGER NOT NULL AUTO_INCREMENT (1,1),","265","    ORGANIZATION_UUID VARCHAR(40) NOT NULL,","266","    GROUP_ID INTEGER,","267","    RESOURCE_ID INTEGER,","268","    ROLE VARCHAR(64) NOT NULL","270","ALTER TABLE GROUP_ROLES ADD CONSTRAINT PK_GROUP_ROLES PRIMARY KEY(ID);","271","CREATE UNIQUE INDEX UNIQ_GROUP_ROLES ON GROUP_ROLES(ORGANIZATION_UUID, GROUP_ID, RESOURCE_ID, ROLE);","272","CREATE INDEX GROUP_ROLES_RESOURCE ON GROUP_ROLES(RESOURCE_ID);","274","CREATE TABLE GROUPS(","275","    ID INTEGER NOT NULL AUTO_INCREMENT (1,1),","276","    ORGANIZATION_UUID VARCHAR(40) NOT NULL,","277","    NAME VARCHAR(500),","278","    DESCRIPTION VARCHAR(200),","279","    CREATED_AT TIMESTAMP,","280","    UPDATED_AT TIMESTAMP","282","ALTER TABLE GROUPS ADD CONSTRAINT PK_GROUPS PRIMARY KEY(ID);","284","CREATE TABLE GROUPS_USERS(","285","    USER_ID BIGINT,","286","    GROUP_ID BIGINT","288","CREATE INDEX INDEX_GROUPS_USERS_ON_USER_ID ON GROUPS_USERS(USER_ID);","289","CREATE INDEX INDEX_GROUPS_USERS_ON_GROUP_ID ON GROUPS_USERS(GROUP_ID);","290","CREATE UNIQUE INDEX GROUPS_USERS_UNIQUE ON GROUPS_USERS(GROUP_ID, USER_ID);","292","CREATE TABLE INTERNAL_COMPONENT_PROPS(","293","    UUID VARCHAR(40) NOT NULL,","294","    COMPONENT_UUID VARCHAR(50) NOT NULL,","295","    KEE VARCHAR(512) NOT NULL,","296","    VALUE VARCHAR(4000),","297","    UPDATED_AT BIGINT NOT NULL,","298","    CREATED_AT BIGINT NOT NULL","300","ALTER TABLE INTERNAL_COMPONENT_PROPS ADD CONSTRAINT PK_INTERNAL_COMPONENT_PROPS PRIMARY KEY(UUID);","301","CREATE UNIQUE INDEX UNIQUE_COMPONENT_UUID_KEE ON INTERNAL_COMPONENT_PROPS(COMPONENT_UUID, KEE);","303","CREATE TABLE INTERNAL_PROPERTIES(","304","    KEE VARCHAR(20) NOT NULL,","305","    IS_EMPTY BOOLEAN NOT NULL,","306","    TEXT_VALUE VARCHAR(4000),","307","    CLOB_VALUE CLOB(2147483647),","308","    CREATED_AT BIGINT NOT NULL","310","ALTER TABLE INTERNAL_PROPERTIES ADD CONSTRAINT PK_INTERNAL_PROPERTIES PRIMARY KEY(KEE);","312","CREATE TABLE ISSUE_CHANGES(","313","    ID BIGINT NOT NULL AUTO_INCREMENT (1,1),","314","    KEE VARCHAR(50),","315","    ISSUE_KEY VARCHAR(50) NOT NULL,","316","    USER_LOGIN VARCHAR(255),","317","    CHANGE_TYPE VARCHAR(20),","318","    CHANGE_DATA CLOB(2147483647),","319","    CREATED_AT BIGINT,","320","    UPDATED_AT BIGINT,","321","    ISSUE_CHANGE_CREATION_DATE BIGINT","323","ALTER TABLE ISSUE_CHANGES ADD CONSTRAINT PK_ISSUE_CHANGES PRIMARY KEY(ID);","324","CREATE INDEX ISSUE_CHANGES_ISSUE_KEY ON ISSUE_CHANGES(ISSUE_KEY);","325","CREATE INDEX ISSUE_CHANGES_KEE ON ISSUE_CHANGES(KEE);","327","CREATE TABLE ISSUES(","328","    ID BIGINT NOT NULL AUTO_INCREMENT (1,1),","329","    KEE VARCHAR(50) NOT NULL,","330","    RULE_ID INTEGER,","331","    SEVERITY VARCHAR(10),","332","    MANUAL_SEVERITY BOOLEAN NOT NULL,","333","    MESSAGE VARCHAR(4000),","334","    LINE INTEGER,","335","    GAP DOUBLE,","336","    STATUS VARCHAR(20),","337","    RESOLUTION VARCHAR(20),","338","    CHECKSUM VARCHAR(1000),","339","    REPORTER VARCHAR(255),","340","    ASSIGNEE VARCHAR(255),","341","    AUTHOR_LOGIN VARCHAR(255),","342","    ACTION_PLAN_KEY VARCHAR(50),","343","    ISSUE_ATTRIBUTES VARCHAR(4000),","344","    EFFORT INTEGER,","345","    CREATED_AT BIGINT,","346","    UPDATED_AT BIGINT,","347","    ISSUE_CREATION_DATE BIGINT,","348","    ISSUE_UPDATE_DATE BIGINT,","349","    ISSUE_CLOSE_DATE BIGINT,","350","    TAGS VARCHAR(4000),","351","    COMPONENT_UUID VARCHAR(50),","352","    PROJECT_UUID VARCHAR(50),","353","    LOCATIONS BLOB,","354","    ISSUE_TYPE TINYINT,","355","    FROM_HOTSPOT BOOLEAN","357","ALTER TABLE ISSUES ADD CONSTRAINT PK_ISSUES PRIMARY KEY(ID);","358","CREATE INDEX ISSUES_ASSIGNEE ON ISSUES(ASSIGNEE);","359","CREATE INDEX ISSUES_COMPONENT_UUID ON ISSUES(COMPONENT_UUID);","360","CREATE INDEX ISSUES_CREATION_DATE ON ISSUES(ISSUE_CREATION_DATE);","361","CREATE UNIQUE INDEX ISSUES_KEE ON ISSUES(KEE);","362","CREATE INDEX ISSUES_PROJECT_UUID ON ISSUES(PROJECT_UUID);","363","CREATE INDEX ISSUES_RESOLUTION ON ISSUES(RESOLUTION);","364","CREATE INDEX ISSUES_RULE_ID ON ISSUES(RULE_ID);","365","CREATE INDEX ISSUES_UPDATED_AT ON ISSUES(UPDATED_AT);","367","CREATE TABLE LIVE_MEASURES(","368","    UUID VARCHAR(40) NOT NULL,","369","    PROJECT_UUID VARCHAR(50) NOT NULL,","370","    COMPONENT_UUID VARCHAR(50) NOT NULL,","371","    METRIC_ID INTEGER NOT NULL,","372","    VALUE DOUBLE,","373","    TEXT_VALUE VARCHAR(4000),","374","    VARIATION DOUBLE,","375","    MEASURE_DATA BLOB,","376","    UPDATE_MARKER VARCHAR(40),","377","    CREATED_AT BIGINT NOT NULL,","378","    UPDATED_AT BIGINT NOT NULL","380","ALTER TABLE LIVE_MEASURES ADD CONSTRAINT PK_LIVE_MEASURES PRIMARY KEY(UUID);","381","CREATE INDEX LIVE_MEASURES_PROJECT ON LIVE_MEASURES(PROJECT_UUID);","382","CREATE UNIQUE INDEX LIVE_MEASURES_COMPONENT ON LIVE_MEASURES(COMPONENT_UUID, METRIC_ID);","384","CREATE TABLE MANUAL_MEASURES(","385","    ID BIGINT NOT NULL AUTO_INCREMENT (1,1),","386","    METRIC_ID INTEGER NOT NULL,","387","    VALUE DOUBLE,","388","    TEXT_VALUE VARCHAR(4000),","389","    USER_UUID VARCHAR(255),","390","    DESCRIPTION VARCHAR(4000),","391","    CREATED_AT BIGINT,","392","    UPDATED_AT BIGINT,","393","    COMPONENT_UUID VARCHAR(50) NOT NULL","395","ALTER TABLE MANUAL_MEASURES ADD CONSTRAINT PK_MANUAL_MEASURES PRIMARY KEY(ID);","396","CREATE INDEX MANUAL_MEASURES_COMPONENT_UUID ON MANUAL_MEASURES(COMPONENT_UUID);","398","CREATE TABLE METRICS(","399","    ID INTEGER NOT NULL AUTO_INCREMENT (1,1),","400","    NAME VARCHAR(64) NOT NULL,","401","    DESCRIPTION VARCHAR(255),","402","    DIRECTION INTEGER DEFAULT 0 NOT NULL,","403","    DOMAIN VARCHAR(64),","404","    SHORT_NAME VARCHAR(64),","405","    QUALITATIVE BOOLEAN DEFAULT FALSE NOT NULL,","406","    VAL_TYPE VARCHAR(8),","407","    USER_MANAGED BOOLEAN DEFAULT FALSE,","408","    ENABLED BOOLEAN DEFAULT TRUE,","409","    WORST_VALUE DOUBLE,","410","    BEST_VALUE DOUBLE,","411","    OPTIMIZED_BEST_VALUE BOOLEAN,","412","    HIDDEN BOOLEAN,","413","    DELETE_HISTORICAL_DATA BOOLEAN,","414","    DECIMAL_SCALE INTEGER","416","ALTER TABLE METRICS ADD CONSTRAINT PK_METRICS PRIMARY KEY(ID);","417","CREATE UNIQUE INDEX METRICS_UNIQUE_NAME ON METRICS(NAME);","419","CREATE TABLE NEW_CODE_PERIODS(","420","    UUID VARCHAR(40) NOT NULL,","421","    PROJECT_UUID VARCHAR(40),","422","    BRANCH_UUID VARCHAR(40),","423","    TYPE VARCHAR(30) NOT NULL,","424","    VALUE VARCHAR(40),","425","    UPDATED_AT BIGINT NOT NULL,","426","    CREATED_AT BIGINT NOT NULL","428","ALTER TABLE NEW_CODE_PERIODS ADD CONSTRAINT PK_NEW_CODE_PERIODS PRIMARY KEY(UUID);","429","CREATE UNIQUE INDEX UNIQ_NEW_CODE_PERIODS ON NEW_CODE_PERIODS(PROJECT_UUID, BRANCH_UUID);","431","CREATE TABLE NOTIFICATIONS(","432","    ID INTEGER NOT NULL AUTO_INCREMENT (1,1),","433","    DATA BLOB","435","ALTER TABLE NOTIFICATIONS ADD CONSTRAINT PK_NOTIFICATIONS PRIMARY KEY(ID);","437","CREATE TABLE ORG_QPROFILES(","438","    UUID VARCHAR(255) NOT NULL,","439","    ORGANIZATION_UUID VARCHAR(40) NOT NULL,","440","    RULES_PROFILE_UUID VARCHAR(255) NOT NULL,","441","    PARENT_UUID VARCHAR(255),","442","    LAST_USED BIGINT,","443","    USER_UPDATED_AT BIGINT,","444","    CREATED_AT BIGINT NOT NULL,","445","    UPDATED_AT BIGINT NOT NULL","447","ALTER TABLE ORG_QPROFILES ADD CONSTRAINT PK_ORG_QPROFILES PRIMARY KEY(UUID);","448","CREATE INDEX QPROFILES_ORG_UUID ON ORG_QPROFILES(ORGANIZATION_UUID);","449","CREATE INDEX QPROFILES_RP_UUID ON ORG_QPROFILES(RULES_PROFILE_UUID);","450","CREATE INDEX ORG_QPROFILES_PARENT_UUID ON ORG_QPROFILES(PARENT_UUID);","452","CREATE TABLE ORG_QUALITY_GATES(","453","    UUID VARCHAR(40) NOT NULL,","454","    ORGANIZATION_UUID VARCHAR(40) NOT NULL,","455","    QUALITY_GATE_UUID VARCHAR(40) NOT NULL","457","ALTER TABLE ORG_QUALITY_GATES ADD CONSTRAINT PK_ORG_QUALITY_GATES PRIMARY KEY(UUID);","458","CREATE UNIQUE INDEX UNIQ_ORG_QUALITY_GATES ON ORG_QUALITY_GATES(ORGANIZATION_UUID, QUALITY_GATE_UUID);","460","CREATE TABLE ORGANIZATION_ALM_BINDINGS(","461","    UUID VARCHAR(40) NOT NULL,","462","    ORGANIZATION_UUID VARCHAR(40) NOT NULL,","463","    ALM_APP_INSTALL_UUID VARCHAR(40) NOT NULL,","464","    ALM_ID VARCHAR(40) NOT NULL,","465","    URL VARCHAR(2000) NOT NULL,","466","    USER_UUID VARCHAR(255) NOT NULL,","467","    MEMBERS_SYNC_ENABLED BOOLEAN,","468","    CREATED_AT BIGINT NOT NULL","470","ALTER TABLE ORGANIZATION_ALM_BINDINGS ADD CONSTRAINT PK_ORGANIZATION_ALM_BINDINGS PRIMARY KEY(UUID);","471","CREATE UNIQUE INDEX ORG_ALM_BINDINGS_ORG ON ORGANIZATION_ALM_BINDINGS(ORGANIZATION_UUID);","472","CREATE UNIQUE INDEX ORG_ALM_BINDINGS_INSTALL ON ORGANIZATION_ALM_BINDINGS(ALM_APP_INSTALL_UUID);","474","CREATE TABLE ORGANIZATION_MEMBERS(","475","    ORGANIZATION_UUID VARCHAR(40) NOT NULL,","476","    USER_ID INTEGER NOT NULL","478","ALTER TABLE ORGANIZATION_MEMBERS ADD CONSTRAINT PK_ORGANIZATION_MEMBERS PRIMARY KEY(ORGANIZATION_UUID, USER_ID);","479","CREATE INDEX IX_ORG_MEMBERS_ON_USER_ID ON ORGANIZATION_MEMBERS(USER_ID);","481","CREATE TABLE ORGANIZATIONS(","482","    UUID VARCHAR(40) NOT NULL,","483","    KEE VARCHAR(255) NOT NULL,","484","    NAME VARCHAR(255) NOT NULL,","485","    DESCRIPTION VARCHAR(256),","486","    URL VARCHAR(256),","487","    AVATAR_URL VARCHAR(256),","488","    GUARDED BOOLEAN,","489","    DEFAULT_GROUP_ID INTEGER,","490","    DEFAULT_QUALITY_GATE_UUID VARCHAR(40) NOT NULL,","491","    DEFAULT_PERM_TEMPLATE_PROJECT VARCHAR(40),","492","    DEFAULT_PERM_TEMPLATE_APP VARCHAR(40),","493","    DEFAULT_PERM_TEMPLATE_PORT VARCHAR(40),","494","    NEW_PROJECT_PRIVATE BOOLEAN NOT NULL,","495","    SUBSCRIPTION VARCHAR(40) NOT NULL,","496","    CREATED_AT BIGINT NOT NULL,","497","    UPDATED_AT BIGINT NOT NULL","499","ALTER TABLE ORGANIZATIONS ADD CONSTRAINT PK_ORGANIZATIONS PRIMARY KEY(UUID);","500","CREATE UNIQUE INDEX ORGANIZATION_KEY ON ORGANIZATIONS(KEE);","502","CREATE TABLE PERM_TEMPLATES_GROUPS(","503","    ID INTEGER NOT NULL AUTO_INCREMENT (1,1),","504","    GROUP_ID INTEGER,","505","    TEMPLATE_ID INTEGER NOT NULL,","506","    PERMISSION_REFERENCE VARCHAR(64) NOT NULL,","507","    CREATED_AT TIMESTAMP,","508","    UPDATED_AT TIMESTAMP","510","ALTER TABLE PERM_TEMPLATES_GROUPS ADD CONSTRAINT PK_PERM_TEMPLATES_GROUPS PRIMARY KEY(ID);","512","CREATE TABLE PERM_TEMPLATES_USERS(","513","    ID INTEGER NOT NULL AUTO_INCREMENT (1,1),","514","    USER_ID INTEGER NOT NULL,","515","    TEMPLATE_ID INTEGER NOT NULL,","516","    PERMISSION_REFERENCE VARCHAR(64) NOT NULL,","517","    CREATED_AT TIMESTAMP,","518","    UPDATED_AT TIMESTAMP","520","ALTER TABLE PERM_TEMPLATES_USERS ADD CONSTRAINT PK_PERM_TEMPLATES_USERS PRIMARY KEY(ID);","522","CREATE TABLE PERM_TPL_CHARACTERISTICS(","523","    ID INTEGER NOT NULL AUTO_INCREMENT (1,1),","524","    TEMPLATE_ID INTEGER NOT NULL,","525","    PERMISSION_KEY VARCHAR(64) NOT NULL,","526","    WITH_PROJECT_CREATOR BOOLEAN DEFAULT FALSE NOT NULL,","527","    CREATED_AT BIGINT NOT NULL,","528","    UPDATED_AT BIGINT NOT NULL","530","ALTER TABLE PERM_TPL_CHARACTERISTICS ADD CONSTRAINT PK_PERM_TPL_CHARACTERISTICS PRIMARY KEY(ID);","531","CREATE UNIQUE INDEX UNIQ_PERM_TPL_CHARAC ON PERM_TPL_CHARACTERISTICS(TEMPLATE_ID, PERMISSION_KEY);","533","CREATE TABLE PERMISSION_TEMPLATES(","534","    ID INTEGER NOT NULL AUTO_INCREMENT (1,1),","535","    ORGANIZATION_UUID VARCHAR(40) NOT NULL,","536","    NAME VARCHAR(100) NOT NULL,","537","    KEE VARCHAR(100) NOT NULL,","538","    DESCRIPTION VARCHAR(4000),","539","    CREATED_AT TIMESTAMP,","540","    UPDATED_AT TIMESTAMP,","541","    KEY_PATTERN VARCHAR(500)","543","ALTER TABLE PERMISSION_TEMPLATES ADD CONSTRAINT PK_PERMISSION_TEMPLATES PRIMARY KEY(ID);","545","CREATE TABLE PLUGINS(","546","    UUID VARCHAR(40) NOT NULL,","547","    KEE VARCHAR(200) NOT NULL,","548","    BASE_PLUGIN_KEY VARCHAR(200),","549","    FILE_HASH VARCHAR(200) NOT NULL,","550","    CREATED_AT BIGINT NOT NULL,","551","    UPDATED_AT BIGINT NOT NULL","553","ALTER TABLE PLUGINS ADD CONSTRAINT PK_PLUGINS PRIMARY KEY(UUID);","554","CREATE UNIQUE INDEX PLUGINS_KEY ON PLUGINS(KEE);","556","CREATE TABLE PROJECT_ALM_BINDINGS(","557","    UUID VARCHAR(40) NOT NULL,","558","    ALM_ID VARCHAR(40) NOT NULL,","559","    REPO_ID VARCHAR(256) NOT NULL,","560","    PROJECT_UUID VARCHAR(40) NOT NULL,","561","    GITHUB_SLUG VARCHAR(256),","562","    URL VARCHAR(2000) NOT NULL,","563","    CREATED_AT BIGINT NOT NULL,","564","    UPDATED_AT BIGINT NOT NULL","566","ALTER TABLE PROJECT_ALM_BINDINGS ADD CONSTRAINT PK_PROJECT_ALM_BINDINGS PRIMARY KEY(UUID);","567","CREATE UNIQUE INDEX PROJECT_ALM_BINDINGS_ALM_REPO ON PROJECT_ALM_BINDINGS(ALM_ID, REPO_ID);","568","CREATE UNIQUE INDEX PROJECT_ALM_BINDINGS_PROJECT ON PROJECT_ALM_BINDINGS(PROJECT_UUID);","570","CREATE TABLE PROJECT_ALM_SETTINGS(","571","    UUID VARCHAR(40) NOT NULL,","572","    ALM_SETTING_UUID VARCHAR(40) NOT NULL,","573","    PROJECT_UUID VARCHAR(50) NOT NULL,","574","    ALM_REPO VARCHAR(256),","575","    ALM_SLUG VARCHAR(256),","576","    UPDATED_AT BIGINT NOT NULL,","577","    CREATED_AT BIGINT NOT NULL","579","ALTER TABLE PROJECT_ALM_SETTINGS ADD CONSTRAINT PK_PROJECT_ALM_SETTINGS PRIMARY KEY(UUID);","580","CREATE UNIQUE INDEX UNIQ_PROJECT_ALM_SETTINGS ON PROJECT_ALM_SETTINGS(PROJECT_UUID);","581","CREATE INDEX PROJECT_ALM_SETTINGS_ALM ON PROJECT_ALM_SETTINGS(ALM_SETTING_UUID);","583","CREATE TABLE PROJECT_BRANCHES(","584","    UUID VARCHAR(50) NOT NULL,","585","    PROJECT_UUID VARCHAR(50) NOT NULL,","586","    KEE VARCHAR(255) NOT NULL,","587","    BRANCH_TYPE VARCHAR(12),","588","    MERGE_BRANCH_UUID VARCHAR(50),","589","    KEY_TYPE VARCHAR(12) NOT NULL,","590","    PULL_REQUEST_BINARY BLOB,","591","    MANUAL_BASELINE_ANALYSIS_UUID VARCHAR(40),","592","    CREATED_AT BIGINT NOT NULL,","593","    UPDATED_AT BIGINT NOT NULL","595","ALTER TABLE PROJECT_BRANCHES ADD CONSTRAINT PK_PROJECT_BRANCHES PRIMARY KEY(UUID);","596","CREATE UNIQUE INDEX PROJECT_BRANCHES_KEE_KEY_TYPE ON PROJECT_BRANCHES(PROJECT_UUID, KEE, KEY_TYPE);","598","CREATE TABLE PROJECT_LINKS(","599","    UUID VARCHAR(40) NOT NULL,","600","    PROJECT_UUID VARCHAR(40) NOT NULL,","601","    LINK_TYPE VARCHAR(20) NOT NULL,","602","    NAME VARCHAR(128),","603","    HREF VARCHAR(2048) NOT NULL,","604","    CREATED_AT BIGINT NOT NULL,","605","    UPDATED_AT BIGINT NOT NULL","607","ALTER TABLE PROJECT_LINKS ADD CONSTRAINT PK_PROJECT_LINKS PRIMARY KEY(UUID);","608","CREATE INDEX PROJECT_LINKS_PROJECT ON PROJECT_LINKS(PROJECT_UUID);","610","CREATE TABLE PROJECT_MAPPINGS(","611","    UUID VARCHAR(40) NOT NULL,","612","    KEY_TYPE VARCHAR(200) NOT NULL,","613","    KEE VARCHAR(4000) NOT NULL,","614","    PROJECT_UUID VARCHAR(40) NOT NULL,","615","    CREATED_AT BIGINT NOT NULL","617","ALTER TABLE PROJECT_MAPPINGS ADD CONSTRAINT PK_PROJECT_MAPPINGS PRIMARY KEY(UUID);","618","CREATE UNIQUE INDEX KEY_TYPE_KEE ON PROJECT_MAPPINGS(KEY_TYPE, KEE);","619","CREATE INDEX PROJECT_UUID ON PROJECT_MAPPINGS(PROJECT_UUID);","621","CREATE TABLE PROJECT_MEASURES(","622","    ID BIGINT NOT NULL AUTO_INCREMENT (1,1),","623","    VALUE DOUBLE,","624","    METRIC_ID INTEGER NOT NULL,","625","    ANALYSIS_UUID VARCHAR(50) NOT NULL,","626","    COMPONENT_UUID VARCHAR(50) NOT NULL,","627","    TEXT_VALUE VARCHAR(4000),","628","    ALERT_STATUS VARCHAR(5),","629","    ALERT_TEXT VARCHAR(4000),","630","    DESCRIPTION VARCHAR(4000),","631","    PERSON_ID INTEGER,","632","    VARIATION_VALUE_1 DOUBLE,","633","    VARIATION_VALUE_2 DOUBLE,","634","    VARIATION_VALUE_3 DOUBLE,","635","    VARIATION_VALUE_4 DOUBLE,","636","    VARIATION_VALUE_5 DOUBLE,","637","    MEASURE_DATA BLOB","639","ALTER TABLE PROJECT_MEASURES ADD CONSTRAINT PK_PROJECT_MEASURES PRIMARY KEY(ID);","640","CREATE INDEX MEASURES_ANALYSIS_METRIC ON PROJECT_MEASURES(ANALYSIS_UUID, METRIC_ID);","641","CREATE INDEX MEASURES_COMPONENT_UUID ON PROJECT_MEASURES(COMPONENT_UUID);","643","CREATE TABLE PROJECT_QGATES(","644","    PROJECT_UUID VARCHAR(40) NOT NULL,","645","    QUALITY_GATE_UUID VARCHAR(40) NOT NULL","647","ALTER TABLE PROJECT_QGATES ADD CONSTRAINT PK_PROJECT_QGATES PRIMARY KEY(PROJECT_UUID);","648","CREATE UNIQUE INDEX UNIQ_PROJECT_QGATES ON PROJECT_QGATES(PROJECT_UUID, QUALITY_GATE_UUID);","650","CREATE TABLE PROJECT_QPROFILES(","651","    ID INTEGER NOT NULL AUTO_INCREMENT (1,1),","652","    PROJECT_UUID VARCHAR(50) NOT NULL,","653","    PROFILE_KEY VARCHAR(50) NOT NULL","655","ALTER TABLE PROJECT_QPROFILES ADD CONSTRAINT PK_PROJECT_QPROFILES PRIMARY KEY(ID);","656","CREATE UNIQUE INDEX UNIQ_PROJECT_QPROFILES ON PROJECT_QPROFILES(PROJECT_UUID, PROFILE_KEY);","658","CREATE TABLE PROJECTS(","659","    ID INTEGER NOT NULL AUTO_INCREMENT (1,1),","660","    UUID VARCHAR(50) NOT NULL,","661","    ORGANIZATION_UUID VARCHAR(40) NOT NULL,","662","    KEE VARCHAR(400),","663","    DEPRECATED_KEE VARCHAR(400),","664","    NAME VARCHAR(2000),","665","    LONG_NAME VARCHAR(2000),","666","    DESCRIPTION VARCHAR(2000),","667","    ENABLED BOOLEAN DEFAULT TRUE NOT NULL,","668","    SCOPE VARCHAR(3),","669","    QUALIFIER VARCHAR(10),","670","    PRIVATE BOOLEAN NOT NULL,","671","    ROOT_UUID VARCHAR(50) NOT NULL,","672","    LANGUAGE VARCHAR(20),","673","    COPY_COMPONENT_UUID VARCHAR(50),","674","    DEVELOPER_UUID VARCHAR(50),","675","    PATH VARCHAR(2000),","676","    UUID_PATH VARCHAR(1500) NOT NULL,","677","    PROJECT_UUID VARCHAR(50) NOT NULL,","678","    MODULE_UUID VARCHAR(50),","679","    MODULE_UUID_PATH VARCHAR(1500),","680","    AUTHORIZATION_UPDATED_AT BIGINT,","681","    TAGS VARCHAR(500),","682","    MAIN_BRANCH_PROJECT_UUID VARCHAR(50),","683","    B_CHANGED BOOLEAN,","684","    B_NAME VARCHAR(500),","685","    B_LONG_NAME VARCHAR(500),","686","    B_DESCRIPTION VARCHAR(2000),","687","    B_ENABLED BOOLEAN,","688","    B_QUALIFIER VARCHAR(10),","689","    B_LANGUAGE VARCHAR(20),","690","    B_COPY_COMPONENT_UUID VARCHAR(50),","691","    B_PATH VARCHAR(2000),","692","    B_UUID_PATH VARCHAR(1500),","693","    B_MODULE_UUID VARCHAR(50),","694","    B_MODULE_UUID_PATH VARCHAR(1500),","695","    CREATED_AT TIMESTAMP","697","ALTER TABLE PROJECTS ADD CONSTRAINT PK_PROJECTS PRIMARY KEY(ID);","698","CREATE INDEX PROJECTS_ORGANIZATION ON PROJECTS(ORGANIZATION_UUID);","699","CREATE UNIQUE INDEX PROJECTS_KEE ON PROJECTS(KEE);","700","CREATE INDEX PROJECTS_MODULE_UUID ON PROJECTS(MODULE_UUID);","701","CREATE INDEX PROJECTS_PROJECT_UUID ON PROJECTS(PROJECT_UUID);","702","CREATE INDEX PROJECTS_QUALIFIER ON PROJECTS(QUALIFIER);","703","CREATE INDEX PROJECTS_ROOT_UUID ON PROJECTS(ROOT_UUID);","704","CREATE INDEX PROJECTS_UUID ON PROJECTS(UUID);","706","CREATE TABLE PROPERTIES(","707","    ID INTEGER NOT NULL AUTO_INCREMENT (1,1),","708","    PROP_KEY VARCHAR(512) NOT NULL,","709","    RESOURCE_ID BIGINT,","710","    USER_ID BIGINT,","711","    IS_EMPTY BOOLEAN NOT NULL,","712","    TEXT_VALUE VARCHAR(4000),","713","    CLOB_VALUE CLOB(2147483647),","714","    CREATED_AT BIGINT NOT NULL","716","ALTER TABLE PROPERTIES ADD CONSTRAINT PK_PROPERTIES PRIMARY KEY(ID);","717","CREATE INDEX PROPERTIES_KEY ON PROPERTIES(PROP_KEY);","719","CREATE TABLE QPROFILE_CHANGES(","720","    KEE VARCHAR(40) NOT NULL,","721","    RULES_PROFILE_UUID VARCHAR(255) NOT NULL,","722","    CHANGE_TYPE VARCHAR(20) NOT NULL,","723","    USER_UUID VARCHAR(255),","724","    CHANGE_DATA CLOB(2147483647),","725","    CREATED_AT BIGINT NOT NULL","727","ALTER TABLE QPROFILE_CHANGES ADD CONSTRAINT PK_QPROFILE_CHANGES PRIMARY KEY(KEE);","728","CREATE INDEX QP_CHANGES_RULES_PROFILE_UUID ON QPROFILE_CHANGES(RULES_PROFILE_UUID);","730","CREATE TABLE QPROFILE_EDIT_GROUPS(","731","    UUID VARCHAR(40) NOT NULL,","732","    GROUP_ID INTEGER NOT NULL,","733","    QPROFILE_UUID VARCHAR(255) NOT NULL,","734","    CREATED_AT BIGINT NOT NULL","736","ALTER TABLE QPROFILE_EDIT_GROUPS ADD CONSTRAINT PK_QPROFILE_EDIT_GROUPS PRIMARY KEY(UUID);","737","CREATE INDEX QPROFILE_EDIT_GROUPS_QPROFILE ON QPROFILE_EDIT_GROUPS(QPROFILE_UUID);","738","CREATE UNIQUE INDEX QPROFILE_EDIT_GROUPS_UNIQUE ON QPROFILE_EDIT_GROUPS(GROUP_ID, QPROFILE_UUID);","740","CREATE TABLE QPROFILE_EDIT_USERS(","741","    UUID VARCHAR(40) NOT NULL,","742","    USER_ID INTEGER NOT NULL,","743","    QPROFILE_UUID VARCHAR(255) NOT NULL,","744","    CREATED_AT BIGINT NOT NULL","746","ALTER TABLE QPROFILE_EDIT_USERS ADD CONSTRAINT PK_QPROFILE_EDIT_USERS PRIMARY KEY(UUID);","747","CREATE INDEX QPROFILE_EDIT_USERS_QPROFILE ON QPROFILE_EDIT_USERS(QPROFILE_UUID);","748","CREATE UNIQUE INDEX QPROFILE_EDIT_USERS_UNIQUE ON QPROFILE_EDIT_USERS(USER_ID, QPROFILE_UUID);","750","CREATE TABLE QUALITY_GATE_CONDITIONS(","751","    ID INTEGER NOT NULL AUTO_INCREMENT (1,1),","752","    QGATE_ID INTEGER,","753","    METRIC_ID INTEGER,","754","    PERIOD INTEGER,","755","    OPERATOR VARCHAR(3),","756","    VALUE_ERROR VARCHAR(64),","757","    VALUE_WARNING VARCHAR(64),","758","    CREATED_AT TIMESTAMP,","759","    UPDATED_AT TIMESTAMP","761","ALTER TABLE QUALITY_GATE_CONDITIONS ADD CONSTRAINT PK_QUALITY_GATE_CONDITIONS PRIMARY KEY(ID);","763","CREATE TABLE QUALITY_GATES(","764","    ID INTEGER NOT NULL AUTO_INCREMENT (1,1),","765","    UUID VARCHAR(40) NOT NULL,","766","    NAME VARCHAR(100) NOT NULL,","767","    IS_BUILT_IN BOOLEAN NOT NULL,","768","    CREATED_AT TIMESTAMP,","769","    UPDATED_AT TIMESTAMP","771","ALTER TABLE QUALITY_GATES ADD CONSTRAINT PK_QUALITY_GATES PRIMARY KEY(ID);","772","CREATE UNIQUE INDEX UNIQ_QUALITY_GATES_UUID ON QUALITY_GATES(UUID);","774","CREATE TABLE RULE_REPOSITORIES(","775","    KEE VARCHAR(200) NOT NULL,","776","    LANGUAGE VARCHAR(20) NOT NULL,","777","    NAME VARCHAR(4000) NOT NULL,","778","    CREATED_AT BIGINT NOT NULL","780","ALTER TABLE RULE_REPOSITORIES ADD CONSTRAINT PK_RULE_REPOSITORIES PRIMARY KEY(KEE);","782","CREATE TABLE RULES(","783","    ID INTEGER NOT NULL AUTO_INCREMENT (1,1),","784","    NAME VARCHAR(200),","785","    PLUGIN_RULE_KEY VARCHAR(200) NOT NULL,","786","    PLUGIN_KEY VARCHAR(200),","787","    PLUGIN_CONFIG_KEY VARCHAR(200),","788","    PLUGIN_NAME VARCHAR(255) NOT NULL,","789","    SCOPE VARCHAR(20) NOT NULL,","790","    DESCRIPTION CLOB(2147483647),","791","    PRIORITY INTEGER,","792","    TEMPLATE_ID INTEGER,","793","    STATUS VARCHAR(40),","794","    LANGUAGE VARCHAR(20),","795","    DEF_REMEDIATION_FUNCTION VARCHAR(20),","796","    DEF_REMEDIATION_GAP_MULT VARCHAR(20),","797","    DEF_REMEDIATION_BASE_EFFORT VARCHAR(20),","798","    GAP_DESCRIPTION VARCHAR(4000),","799","    SYSTEM_TAGS VARCHAR(4000),","800","    IS_TEMPLATE BOOLEAN DEFAULT FALSE NOT NULL,","801","    DESCRIPTION_FORMAT VARCHAR(20),","802","    RULE_TYPE TINYINT,","803","    SECURITY_STANDARDS VARCHAR(4000),","804","    IS_AD_HOC BOOLEAN NOT NULL,","805","    IS_EXTERNAL BOOLEAN NOT NULL,","806","    CREATED_AT BIGINT,","807","    UPDATED_AT BIGINT","809","ALTER TABLE RULES ADD CONSTRAINT PK_RULES PRIMARY KEY(ID);","810","CREATE UNIQUE INDEX RULES_REPO_KEY ON RULES(PLUGIN_RULE_KEY, PLUGIN_NAME);","812","CREATE TABLE RULES_METADATA(","813","    RULE_ID INTEGER NOT NULL,","814","    ORGANIZATION_UUID VARCHAR(40) NOT NULL,","815","    NOTE_DATA CLOB(2147483647),","816","    NOTE_USER_UUID VARCHAR(255),","817","    NOTE_CREATED_AT BIGINT,","818","    NOTE_UPDATED_AT BIGINT,","819","    REMEDIATION_FUNCTION VARCHAR(20),","820","    REMEDIATION_GAP_MULT VARCHAR(20),","821","    REMEDIATION_BASE_EFFORT VARCHAR(20),","822","    TAGS VARCHAR(4000),","823","    AD_HOC_NAME VARCHAR(200),","824","    AD_HOC_DESCRIPTION CLOB(2147483647),","825","    AD_HOC_SEVERITY VARCHAR(10),","826","    AD_HOC_TYPE TINYINT,","827","    CREATED_AT BIGINT NOT NULL,","828","    UPDATED_AT BIGINT NOT NULL","830","ALTER TABLE RULES_METADATA ADD CONSTRAINT PK_RULES_METADATA PRIMARY KEY(RULE_ID, ORGANIZATION_UUID);","832","CREATE TABLE RULES_PARAMETERS(","833","    ID INTEGER NOT NULL AUTO_INCREMENT (1,1),","834","    RULE_ID INTEGER NOT NULL,","835","    NAME VARCHAR(128) NOT NULL,","836","    DESCRIPTION VARCHAR(4000),","837","    PARAM_TYPE VARCHAR(512) NOT NULL,","838","    DEFAULT_VALUE VARCHAR(4000)","840","ALTER TABLE RULES_PARAMETERS ADD CONSTRAINT PK_RULES_PARAMETERS PRIMARY KEY(ID);","841","CREATE INDEX RULES_PARAMETERS_RULE_ID ON RULES_PARAMETERS(RULE_ID);","842","CREATE UNIQUE INDEX RULES_PARAMETERS_UNIQUE ON RULES_PARAMETERS(RULE_ID, NAME);","844","CREATE TABLE RULES_PROFILES(","845","    ID INTEGER NOT NULL AUTO_INCREMENT (1,1),","846","    NAME VARCHAR(100) NOT NULL,","847","    LANGUAGE VARCHAR(20),","848","    KEE VARCHAR(255) NOT NULL,","849","    IS_BUILT_IN BOOLEAN NOT NULL,","850","    RULES_UPDATED_AT VARCHAR(100),","851","    CREATED_AT TIMESTAMP,","852","    UPDATED_AT TIMESTAMP","854","ALTER TABLE RULES_PROFILES ADD CONSTRAINT PK_RULES_PROFILES PRIMARY KEY(ID);","855","CREATE UNIQUE INDEX UNIQ_QPROF_KEY ON RULES_PROFILES(KEE);","857","CREATE TABLE SNAPSHOTS(","858","    ID INTEGER NOT NULL AUTO_INCREMENT (1,1),","859","    UUID VARCHAR(50) NOT NULL,","860","    COMPONENT_UUID VARCHAR(50) NOT NULL,","861","    STATUS VARCHAR(4) DEFAULT 'U' NOT NULL,","862","    ISLAST BOOLEAN DEFAULT FALSE NOT NULL,","863","    VERSION VARCHAR(500),","864","    PURGE_STATUS INTEGER,","865","    BUILD_STRING VARCHAR(100),","866","    REVISION VARCHAR(100),","867","    BUILD_DATE BIGINT,","868","    PERIOD1_MODE VARCHAR(100),","869","    PERIOD1_PARAM VARCHAR(100),","870","    PERIOD2_MODE VARCHAR(100),","871","    PERIOD2_PARAM VARCHAR(100),","872","    PERIOD3_MODE VARCHAR(100),","873","    PERIOD3_PARAM VARCHAR(100),","874","    PERIOD4_MODE VARCHAR(100),","875","    PERIOD4_PARAM VARCHAR(100),","876","    PERIOD5_MODE VARCHAR(100),","877","    PERIOD5_PARAM VARCHAR(100),","878","    PERIOD1_DATE BIGINT,","879","    PERIOD2_DATE BIGINT,","880","    PERIOD3_DATE BIGINT,","881","    PERIOD4_DATE BIGINT,","882","    PERIOD5_DATE BIGINT,","883","    CREATED_AT BIGINT","885","ALTER TABLE SNAPSHOTS ADD CONSTRAINT PK_SNAPSHOTS PRIMARY KEY(ID);","886","CREATE UNIQUE INDEX ANALYSES_UUID ON SNAPSHOTS(UUID);","887","CREATE INDEX SNAPSHOT_COMPONENT ON SNAPSHOTS(COMPONENT_UUID);","889","CREATE TABLE USER_PROPERTIES(","890","    UUID VARCHAR(40) NOT NULL,","891","    USER_UUID VARCHAR(255) NOT NULL,","892","    KEE VARCHAR(100) NOT NULL,","893","    TEXT_VALUE VARCHAR(4000) NOT NULL,","894","    CREATED_AT BIGINT NOT NULL,","895","    UPDATED_AT BIGINT NOT NULL","897","ALTER TABLE USER_PROPERTIES ADD CONSTRAINT PK_USER_PROPERTIES PRIMARY KEY(UUID);","898","CREATE UNIQUE INDEX USER_PROPERTIES_USER_UUID_KEE ON USER_PROPERTIES(USER_UUID, KEE);","900","CREATE TABLE USER_ROLES(","901","    ID INTEGER NOT NULL AUTO_INCREMENT (1,1),","902","    ORGANIZATION_UUID VARCHAR(40) NOT NULL,","903","    USER_ID INTEGER,","904","    RESOURCE_ID INTEGER,","905","    ROLE VARCHAR(64) NOT NULL","907","ALTER TABLE USER_ROLES ADD CONSTRAINT PK_USER_ROLES PRIMARY KEY(ID);","908","CREATE INDEX USER_ROLES_RESOURCE ON USER_ROLES(RESOURCE_ID);","909","CREATE INDEX USER_ROLES_USER ON USER_ROLES(USER_ID);","911","CREATE TABLE USER_TOKENS(","912","    ID INTEGER NOT NULL AUTO_INCREMENT (1,1),","913","    USER_UUID VARCHAR(255) NOT NULL,","914","    NAME VARCHAR(100) NOT NULL,","915","    TOKEN_HASH VARCHAR(255) NOT NULL,","916","    LAST_CONNECTION_DATE BIGINT,","917","    CREATED_AT BIGINT NOT NULL","919","ALTER TABLE USER_TOKENS ADD CONSTRAINT PK_USER_TOKENS PRIMARY KEY(ID);","920","CREATE UNIQUE INDEX USER_TOKENS_USER_UUID_NAME ON USER_TOKENS(USER_UUID, NAME);","921","CREATE UNIQUE INDEX USER_TOKENS_TOKEN_HASH ON USER_TOKENS(TOKEN_HASH);","923","CREATE TABLE USERS(","924","    ID INTEGER NOT NULL AUTO_INCREMENT (1,1),","925","    UUID VARCHAR(255) NOT NULL,","926","    LOGIN VARCHAR(255) NOT NULL,","927","    ORGANIZATION_UUID VARCHAR(40),","928","    NAME VARCHAR(200),","929","    EMAIL VARCHAR(100),","930","    CRYPTED_PASSWORD VARCHAR(100),","931","    SALT VARCHAR(40),","932","    HASH_METHOD VARCHAR(10),","933","    ACTIVE BOOLEAN DEFAULT TRUE,","934","    SCM_ACCOUNTS VARCHAR(4000),","935","    EXTERNAL_LOGIN VARCHAR(255) NOT NULL,","936","    EXTERNAL_IDENTITY_PROVIDER VARCHAR(100) NOT NULL,","937","    EXTERNAL_ID VARCHAR(255) NOT NULL,","938","    IS_ROOT BOOLEAN NOT NULL,","939","    USER_LOCAL BOOLEAN,","940","    ONBOARDED BOOLEAN NOT NULL,","941","    HOMEPAGE_TYPE VARCHAR(40),","942","    HOMEPAGE_PARAMETER VARCHAR(40),","943","    LAST_CONNECTION_DATE BIGINT,","944","    CREATED_AT BIGINT,","945","    UPDATED_AT BIGINT","947","ALTER TABLE USERS ADD CONSTRAINT PK_USERS PRIMARY KEY(ID);","948","CREATE UNIQUE INDEX USERS_LOGIN ON USERS(LOGIN);","949","CREATE INDEX USERS_UPDATED_AT ON USERS(UPDATED_AT);","950","CREATE UNIQUE INDEX USERS_UUID ON USERS(UUID);","951","CREATE UNIQUE INDEX UNIQ_EXTERNAL_ID ON USERS(EXTERNAL_IDENTITY_PROVIDER, EXTERNAL_ID);","952","CREATE UNIQUE INDEX UNIQ_EXTERNAL_LOGIN ON USERS(EXTERNAL_IDENTITY_PROVIDER, EXTERNAL_LOGIN);","954","CREATE TABLE WEBHOOK_DELIVERIES(","955","    UUID VARCHAR(40) NOT NULL,","956","    WEBHOOK_UUID VARCHAR(40) NOT NULL,","957","    COMPONENT_UUID VARCHAR(40) NOT NULL,","958","    CE_TASK_UUID VARCHAR(40),","959","    ANALYSIS_UUID VARCHAR(40),","960","    NAME VARCHAR(100) NOT NULL,","961","    URL VARCHAR(2000) NOT NULL,","962","    SUCCESS BOOLEAN NOT NULL,","963","    HTTP_STATUS INTEGER,","964","    DURATION_MS BIGINT NOT NULL,","965","    PAYLOAD CLOB(2147483647) NOT NULL,","966","    ERROR_STACKTRACE CLOB(2147483647),","967","    CREATED_AT BIGINT NOT NULL","969","ALTER TABLE WEBHOOK_DELIVERIES ADD CONSTRAINT PK_WEBHOOK_DELIVERIES PRIMARY KEY(UUID);","970","CREATE INDEX COMPONENT_UUID ON WEBHOOK_DELIVERIES(COMPONENT_UUID);","971","CREATE INDEX CE_TASK_UUID ON WEBHOOK_DELIVERIES(CE_TASK_UUID);","973","CREATE TABLE WEBHOOKS(","974","    UUID VARCHAR(40) NOT NULL,","975","    ORGANIZATION_UUID VARCHAR(40),","976","    PROJECT_UUID VARCHAR(40),","977","    NAME VARCHAR(100) NOT NULL,","978","    URL VARCHAR(2000) NOT NULL,","979","    SECRET VARCHAR(200),","980","    CREATED_AT BIGINT NOT NULL,","981","    UPDATED_AT BIGINT","983","ALTER TABLE WEBHOOKS ADD CONSTRAINT PK_WEBHOOKS PRIMARY KEY(UUID);","984","CREATE INDEX ORGANIZATION_WEBHOOK ON WEBHOOKS(ORGANIZATION_UUID);","985","CREATE INDEX PROJECT_WEBHOOK ON WEBHOOKS(PROJECT_UUID);"]}],"server\/sonar-db-migration\/src\/test\/resources\/org\/sonar\/server\/platform\/db\/migration\/step\/DataChangeTest\/schema.sql":[{"add":["1","  \"ID\" INTEGER NOT NULL AUTO_INCREMENT (1,1),"],"delete":["1","  \"ID\" INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1),"]}],"server\/sonar-db-migration\/src\/test\/resources\/org\/sonar\/server\/platform\/db\/migration\/version\/v81\/MigrateDeprecatedGithubPrivateKeyToNewKeyTest\/schema.sql":[{"add":["1","  \"ID\" INTEGER NOT NULL AUTO_INCREMENT (1,1),"],"delete":["1","  \"ID\" INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1),"]}],"server\/sonar-db-migration\/src\/test\/resources\/org\/sonar\/server\/platform\/db\/migration\/version\/v81\/MigrateGithubAlmSettingsTest\/schema.sql":[{"add":["28","  \"ID\" INTEGER NOT NULL AUTO_INCREMENT (1,1),","40","    \"ID\" INTEGER NOT NULL AUTO_INCREMENT (1,1),"],"delete":["28","  \"ID\" INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1),","40","    ID INTEGER NOT NULL AUTO_INCREMENT (1,1),"]}],"server\/sonar-db-migration\/src\/test\/resources\/org\/sonar\/server\/platform\/db\/migration\/version\/v81\/MigrateAzureAlmSettingsTest\/schema.sql":[{"add":["28","  \"ID\" INTEGER NOT NULL AUTO_INCREMENT (1,1),","40","    \"ID\" INTEGER NOT NULL AUTO_INCREMENT (1,1),"],"delete":["28","  \"ID\" INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1),","40","    ID INTEGER NOT NULL AUTO_INCREMENT (1,1),"]}],"server\/sonar-db-migration\/src\/test\/resources\/org\/sonar\/server\/platform\/db\/migration\/version\/v00\/PopulateInitialSchemaTest\/v79.sql":[{"add":["40","  \"ID\" INTEGER NOT NULL AUTO_INCREMENT (1,1),","52","  \"ID\" INTEGER NOT NULL AUTO_INCREMENT (1,1),","94","  \"ID\" INTEGER NOT NULL AUTO_INCREMENT (1,1),","126","  \"ID\" INTEGER NOT NULL AUTO_INCREMENT (1,1),","136","  \"ID\" INTEGER NOT NULL AUTO_INCREMENT (1,1),","167","  \"ID\" INTEGER NOT NULL AUTO_INCREMENT (1,1),","199","  \"ID\" INTEGER NOT NULL AUTO_INCREMENT (1,1),","249","  \"ID\" INTEGER NOT NULL AUTO_INCREMENT (1,1),","284","  \"ID\" INTEGER NOT NULL AUTO_INCREMENT (1,1),","295","  \"ID\" INTEGER NOT NULL AUTO_INCREMENT (1,1),","316","  \"ID\" INTEGER NOT NULL AUTO_INCREMENT (1,1),","343","  \"ID\" BIGINT NOT NULL AUTO_INCREMENT (1,1),","375","  \"ID\" BIGINT NOT NULL AUTO_INCREMENT (1,1),","408","  \"ID\" INTEGER NOT NULL AUTO_INCREMENT (1,1),","466","  \"ID\" BIGINT NOT NULL AUTO_INCREMENT (1,1),","480","  \"ID\" INTEGER NOT NULL AUTO_INCREMENT (1,1),","492","  \"ID\" INTEGER NOT NULL AUTO_INCREMENT (1,1),","498","  \"ID\" INTEGER NOT NULL AUTO_INCREMENT (1,1),","509","  \"ID\" INTEGER NOT NULL AUTO_INCREMENT (1,1),","519","  \"ID\" INTEGER NOT NULL AUTO_INCREMENT (1,1),","550","  \"ID\" INTEGER NOT NULL AUTO_INCREMENT (1,1),","571","  \"ID\" BIGINT NOT NULL AUTO_INCREMENT (1,1),","611","  \"ID\" BIGINT NOT NULL AUTO_INCREMENT (1,1),","626","  \"ID\" INTEGER NOT NULL AUTO_INCREMENT (1,1),","638","  \"ID\" INTEGER NOT NULL AUTO_INCREMENT (1,1),","649","  \"ID\" INTEGER NOT NULL AUTO_INCREMENT (1,1),","659","  \"ID\" INTEGER NOT NULL AUTO_INCREMENT (1,1),","682","  \"ID\" INTEGER NOT NULL AUTO_INCREMENT (1,1),","701","  \"ID\" INTEGER NOT NULL AUTO_INCREMENT (1,1),","721","  \"ID\" INTEGER NOT NULL AUTO_INCREMENT (1,1),","796","  \"ID\" INTEGER NOT NULL AUTO_INCREMENT (1,1),"],"delete":["40","  \"ID\" INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1),","52","  \"ID\" INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1),","94","  \"ID\" INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1),","126","  \"ID\" INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1),","136","  \"ID\" INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1),","167","  \"ID\" INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1),","199","  \"ID\" INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1),","249","  \"ID\" INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1),","284","  \"ID\" INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1),","295","  \"ID\" INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1),","316","  \"ID\" INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1),","343","  \"ID\" BIGINT NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1),","375","  \"ID\" BIGINT NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1),","408","  \"ID\" INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1),","466","  \"ID\" BIGINT NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1),","480","  \"ID\" INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1),","492","  \"ID\" INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1),","498","  \"ID\" INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1),","509","  \"ID\" INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1),","519","  \"ID\" INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1),","550","  \"ID\" INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1),","571","  \"ID\" BIGINT NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1),","611","  \"ID\" BIGINT NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1),","626","  \"ID\" INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1),","638","  \"ID\" INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1),","649","  \"ID\" INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1),","659","  \"ID\" INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1),","682","  \"ID\" INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1),","701","  \"ID\" INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1),","721","  \"ID\" INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1),","796","  \"ID\" INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1),"]}],"server\/sonar-db-migration\/src\/test\/resources\/org\/sonar\/server\/platform\/db\/migration\/version\/v80\/PopulateNewCodePeriodTableTest\/schema.sql":[{"add":["29","  \"ID\" INTEGER NOT NULL AUTO_INCREMENT (1,1),","41","  \"ID\" INTEGER NOT NULL AUTO_INCREMENT (1,1),","63","  \"ID\" INTEGER NOT NULL AUTO_INCREMENT (1,1),","76","  \"ID\" INTEGER NOT NULL AUTO_INCREMENT (1,1),"],"delete":["29","  \"ID\" INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1),","41","  \"ID\" INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1),","63","  \"ID\" INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1),","76","  \"ID\" INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1),"]}],"server\/sonar-db-migration\/src\/test\/resources\/org\/sonar\/server\/platform\/db\/migration\/version\/v81\/MigrateBitbucketAlmSettingsTest\/schema.sql":[{"add":["28","  \"ID\" INTEGER NOT NULL AUTO_INCREMENT (1,1),","40","    \"ID\" INTEGER NOT NULL AUTO_INCREMENT (1,1),"],"delete":["28","  \"ID\" INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1),","40","    ID INTEGER NOT NULL AUTO_INCREMENT (1,1),"]}],"server\/sonar-db-migration\/src\/test\/resources\/org\/sonar\/server\/platform\/db\/migration\/version\/v80\/RemoveLeakPeriodPropertiesTest\/schema.sql":[{"add":["1","  \"ID\" INTEGER NOT NULL AUTO_INCREMENT (1,1),"],"delete":["1","  \"ID\" INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1),"]}],"server\/sonar-db-dao\/src\/test\/java\/org\/sonar\/db\/dump\/SQSchemaDumper.java":[{"add":["99","          .replaceAll(\" \\\"PUBLIC\\\"\\\\.\", \" \")","123","    String res = fixAutoIncrementIdColumn(cleanedSql, \"\\\"ID\\\" INTEGER DEFAULT (NEXT VALUE FOR \", \"\\\"ID\\\" INTEGER NOT NULL AUTO_INCREMENT (1,1)\");","124","    res = fixAutoIncrementIdColumn(res, \"\\\"ID\\\" BIGINT DEFAULT (NEXT VALUE FOR \", \"\\\"ID\\\" BIGINT NOT NULL AUTO_INCREMENT (1,1)\");"],"delete":["99","          .replaceAll(\" PUBLIC\\\\.\", \" \")","123","    String res = fixAutoIncrementIdColumn(cleanedSql, \"ID INTEGER DEFAULT (NEXT VALUE FOR \", \"ID INTEGER NOT NULL AUTO_INCREMENT (1,1)\");","124","    res = fixAutoIncrementIdColumn(res, \"ID BIGINT DEFAULT (NEXT VALUE FOR \", \"ID BIGINT NOT NULL AUTO_INCREMENT (1,1)\");"]}],"server\/sonar-db-migration\/src\/test\/resources\/org\/sonar\/server\/platform\/db\/migration\/version\/v80\/RemoveGitHubLoginGenerationStrategyPropertyTest\/schema.sql":[{"add":["1","  \"ID\" INTEGER NOT NULL AUTO_INCREMENT (1,1),"],"delete":["1","  \"ID\" INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1),"]}],"build.gradle":[{"add":["191","      dependency 'com.h2database:h2:1.4.199'"],"delete":["191","      dependency 'com.h2database:h2:1.3.176'"]}],"server\/sonar-db-migration\/src\/test\/resources\/org\/sonar\/server\/platform\/db\/migration\/version\/v80\/PopulateProjectQualityGatesTableTest\/schema.sql":[{"add":["1","  \"ID\" INTEGER NOT NULL AUTO_INCREMENT (1,1),","48","  \"ID\" INTEGER NOT NULL AUTO_INCREMENT (1,1),","59","  \"ID\" INTEGER NOT NULL AUTO_INCREMENT (1,1),"],"delete":["1","  \"ID\" INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1),","48","  \"ID\" INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1),","59","  \"ID\" INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1),"]}],"server\/sonar-ce-task-projectanalysis\/src\/test\/resources\/org\/sonar\/ce\/task\/projectanalysis\/dbmigration\/PopulateFileSourceLineCountTest\/file_sources.sql":[{"add":["1","  \"ID\" INTEGER NOT NULL AUTO_INCREMENT (1,1),"],"delete":["1","  \"ID\" INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1),"]}],"server\/sonar-db-core\/src\/test\/resources\/org\/sonar\/db\/ResultSetIteratorTest\/schema.sql":[{"add":["1","  \"ID\" INTEGER NOT NULL AUTO_INCREMENT (1,1),"],"delete":["1","  \"ID\" INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1),"]}],"server\/sonar-db-migration\/src\/test\/resources\/org\/sonar\/server\/platform\/db\/migration\/version\/v80\/RemoveDefaultQualityGateFromPropertiesTableTest\/schema.sql":[{"add":["1","  \"ID\" INTEGER NOT NULL AUTO_INCREMENT (1,1),"],"delete":["1","  \"ID\" INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1),"]}]}},"74b3942db7a450d8334a6e1420a02c007eaa6fdb":{"changes":{"server\/sonar-web\/src\/main\/js\/apps\/users\/form-view.js":"MODIFY"},"diff":{"server\/sonar-web\/src\/main\/js\/apps\/users\/form-view.js":[{"add":["59","      .toArray()","60","      .filter(value => !!value);","61","    \/\/ return empty string to reset the field when updating","62","    return scmAccounts.length ? scmAccounts : '';"],"delete":["59","      .toArray();","60","    return scmAccounts.filter(value => !!value);"]}]}},"804c846979f26e484b779a83c7f058a8a5ae3b4a":{"changes":{"server\/sonar-process-monitor\/src\/main\/java\/org\/sonar\/application\/cluster\/AppStateClusterImpl.java":"MODIFY"},"diff":{"server\/sonar-process-monitor\/src\/main\/java\/org\/sonar\/application\/cluster\/AppStateClusterImpl.java":[{"add":["22","import com.hazelcast.core.HazelcastInstanceNotActiveException;","90","    try {","91","      hazelcastCluster.close();","92","    } catch (HazelcastInstanceNotActiveException e) {","93","      \/\/ hazelcastCluster may be already closed by the shutdown hook","94","      LOGGER.debug(\"Unable to close Hazelcast cluster\", e);","95","    }"],"delete":["89","    hazelcastCluster.close();"]}]}},"bb62fc4a728e45537f828a7f90f994db48df1a6e":{"changes":{"sonar-core\/src\/main\/resources\/org\/sonar\/l10n\/core.properties":"MODIFY","server\/sonar-web\/src\/main\/js\/app\/components\/nav\/component\/ComponentNavLicenseNotif.tsx":"MODIFY","server\/sonar-web\/src\/main\/js\/app\/components\/nav\/component\/__tests__\/__snapshots__\/ComponentNavLicenseNotif-test.tsx.snap":"MODIFY"},"diff":{"sonar-core\/src\/main\/resources\/org\/sonar\/l10n\/core.properties":[{"add":["2589","component_navigation.status.last_blocked_due_to_bad_license_X=Last analysis blocked due to an invalid license, which has since been corrected. Please reanalyze this {0}."],"delete":["2589","component_navigation.status.last_blocked_due_to_bad_license=Last analysis blocked due to an invalid license, which has since been corrected. Please reanalyze this project."]}],"server\/sonar-web\/src\/main\/js\/app\/components\/nav\/component\/ComponentNavLicenseNotif.tsx":[{"add":["22","import { translate, translateWithParameters } from 'sonar-ui-common\/helpers\/l10n';","25","import { ComponentQualifier } from '..\/..\/..\/..\/types\/component';","77","          {translateWithParameters(","78","            'component_navigation.status.last_blocked_due_to_bad_license_X',","79","            translate('qualifier', currentTask.componentQualifier || ComponentQualifier.Project)","80","          )}"],"delete":["22","import { translate } from 'sonar-ui-common\/helpers\/l10n';","76","          {translate('component_navigation.status.last_blocked_due_to_bad_license')}"]}],"server\/sonar-web\/src\/main\/js\/app\/components\/nav\/component\/__tests__\/__snapshots__\/ComponentNavLicenseNotif-test.tsx.snap":[{"add":["7","  component_navigation.status.last_blocked_due_to_bad_license_X.qualifier.TRK"],"delete":["7","  component_navigation.status.last_blocked_due_to_bad_license"]}]}},"65e616ffa93f0e0029f792780ff8f3db0b830c2d":{"changes":{"server\/sonar-web\/src\/main\/js\/app\/utils\/isValidUri.ts":"ADD","server\/sonar-web\/src\/main\/js\/apps\/projectLinks\/__tests__\/LinkRow-test.tsx":"MODIFY","server\/sonar-web\/src\/main\/js\/apps\/overview\/meta\/__tests__\/MetaLink-test.tsx":"MODIFY","server\/sonar-web\/src\/main\/js\/apps\/overview\/meta\/MetaLink.tsx":"MODIFY","server\/sonar-web\/src\/main\/js\/apps\/overview\/meta\/__tests__\/__snapshots__\/MetaLink-test.tsx.snap":"MODIFY","server\/sonar-web\/src\/main\/js\/apps\/projectLinks\/LinkRow.tsx":"MODIFY","server\/sonar-web\/src\/main\/js\/apps\/overview\/styles.css":"MODIFY","server\/sonar-web\/src\/main\/js\/apps\/projectLinks\/__tests__\/__snapshots__\/LinkRow-test.tsx.snap":"MODIFY"},"diff":{"server\/sonar-web\/src\/main\/js\/app\/utils\/isValidUri.ts":[{"add":[],"delete":[]}],"server\/sonar-web\/src\/main\/js\/apps\/projectLinks\/__tests__\/LinkRow-test.tsx":[{"add":["44","","45","it('should render dangerous code as plain text', () => {","46","  expect(","47","    shallow(","48","      <LinkRow","49","        link={{ id: '12', name: 'dangerous', type: 'dangerous', url: 'javascript:alert(\"Hello\")' }}","50","        onDelete={jest.fn()}","51","      \/>","52","    )","53","  ).toMatchSnapshot();","54","});"],"delete":[]}],"server\/sonar-web\/src\/main\/js\/apps\/overview\/meta\/__tests__\/MetaLink-test.tsx":[{"add":["35","it('should render dangerous links as plaintext', () => {","36","  const link = {","37","    id: '1',","38","    name: 'Dangerous',","39","    url: 'javascript:alert(\"hi\")',","40","    type: 'dangerous'","41","  };","42","","43","  expect(shallow(<MetaLink link={link} \/>)).toMatchSnapshot();","44","});","45",""],"delete":[]}],"server\/sonar-web\/src\/main\/js\/apps\/overview\/meta\/MetaLink.tsx":[{"add":["22","import isValidUri from '..\/..\/..\/app\/utils\/isValidUri';","23","import ClearIcon from '..\/..\/..\/components\/icons-components\/ClearIcon';","29","interface State {","30","  expanded: boolean;","31","}","32","","33","export default class MetaLink extends React.PureComponent<Props, State> {","34","  state = {","35","    expanded: false","36","  };","37","","38","  handleClick = (event: React.MouseEvent<HTMLAnchorElement>) => {","39","    event.preventDefault();","40","    this.setState(s => ({ expanded: !s.expanded }));","41","  };","42","","43","  render() {","44","    const { link } = this.props;","45","    return (","46","      <li>","47","        <a","48","          className=\"link-with-icon\"","49","          href={link.url}","50","          onClick={!isValidUri(link.url) ? this.handleClick : undefined}","51","          rel=\"nofollow noreferrer noopener\"","52","          target=\"_blank\">","53","          <ProjectLinkIcon className=\"little-spacer-right\" type={link.type} \/>","54","          {getLinkName(link)}","55","        <\/a>","56","        {this.state.expanded && (","57","          <div className=\"little-spacer-top copy-paste-link\">","58","            <input","59","              className=\"overview-key\"","60","              onClick={(event: React.MouseEvent<HTMLInputElement>) => event.currentTarget.select()}","61","              readOnly={true}","62","              type=\"text\"","63","              value={link.url}","64","            \/>","65","            <a className=\"close\" href=\"#\" onClick={this.handleClick}>","66","              <ClearIcon \/>","67","            <\/a>","68","          <\/div>","69","        )}","70","      <\/li>","71","    );","72","  }"],"delete":["27","export default function MetaLink({ link }: Props) {","28","  return (","29","    <li>","30","      <a className=\"link-with-icon\" href={link.url} rel=\"nofollow\" target=\"_blank\">","31","        <ProjectLinkIcon className=\"little-spacer-right\" type={link.type} \/>","32","        {getLinkName(link)}","33","      <\/a>","34","    <\/li>","35","  );"]}],"server\/sonar-web\/src\/main\/js\/apps\/overview\/meta\/__tests__\/__snapshots__\/MetaLink-test.tsx.snap":[{"add":["7","    rel=\"nofollow noreferrer noopener\"","24","    rel=\"nofollow noreferrer noopener\"","41","    rel=\"nofollow noreferrer noopener\"","58","    rel=\"nofollow noreferrer noopener\"","69","","70","exports[`should render dangerous links as plaintext 1`] = `","71","<li>","72","  <a","73","    className=\"link-with-icon\"","74","    href=\"javascript:alert(\\\\\"hi\\\\\")\"","75","    onClick={[Function]}","76","    rel=\"nofollow noreferrer noopener\"","77","    target=\"_blank\"","78","  >","79","    <ProjectLinkIcon","80","      className=\"little-spacer-right\"","81","      type=\"dangerous\"","82","    \/>","83","    Dangerous","84","  <\/a>","85","<\/li>","86","`;"],"delete":["7","    rel=\"nofollow\"","24","    rel=\"nofollow\"","41","    rel=\"nofollow\"","58","    rel=\"nofollow\""]}],"server\/sonar-web\/src\/main\/js\/apps\/projectLinks\/LinkRow.tsx":[{"add":["25","import isValidUri from '..\/..\/app\/utils\/isValidUri';","93","          {isValidUri(link.url) ? (","94","            <a href={link.url} rel=\"nofollow noreferrer noopener\" target=\"_blank\">","95","              {link.url}","96","            <\/a>","97","          ) : (","98","            link.url","99","          )}"],"delete":["92","          <a href={link.url} rel=\"nofollow\" target=\"_blank\">","93","            {link.url}","94","          <\/a>"]}],"server\/sonar-web\/src\/main\/js\/apps\/overview\/styles.css":[{"add":["472",".copy-paste-link .overview-key {","473","  width: 90%;","474","}","475","","476",".copy-paste-link .close {","477","  color: black;","478","  border-bottom: 0;","479","  height: 100%;","480","  display: inline-block;","481","  margin-left: 5px;","482","  box-sizing: border-box;","483","}","484","","485",".copy-paste-link .close svg {","486","  vertical-align: sub;","487","}","488",""],"delete":[]}],"server\/sonar-web\/src\/main\/js\/apps\/projectLinks\/__tests__\/__snapshots__\/LinkRow-test.tsx.snap":[{"add":["30","      rel=\"nofollow noreferrer noopener\"","53","exports[`should render dangerous code as plain text 1`] = `","54","<tr","55","  data-name=\"dangerous\"","56",">","57","  <td","58","    className=\"nowrap\"","59","  >","60","    <div>","61","      <ProjectLinkIcon","62","        className=\"little-spacer-right\"","63","        type=\"dangerous\"","64","      \/>","65","      <div","66","        className=\"display-inline-block text-top\"","67","      >","68","        <span","69","          className=\"js-name\"","70","        >","71","          dangerous","72","        <\/span>","73","      <\/div>","74","    <\/div>","75","  <\/td>","76","  <td","77","    className=\"nowrap js-url\"","78","  >","79","    javascript:alert(\"Hello\")","80","  <\/td>","81","  <td","82","    className=\"thin nowrap\"","83","  >","84","    <ConfirmButton","85","      confirmButtonText=\"delete\"","86","      confirmData=\"12\"","87","      isDestructive={true}","88","      modalBody=\"project_links.are_you_sure_to_delete_x_link.dangerous\"","89","      modalHeader=\"project_links.delete_project_link\"","90","      onConfirm={[MockFunction]}","91","    >","92","      <Component \/>","93","    <\/ConfirmButton>","94","  <\/td>","95","<\/tr>","96","`;","97","","135","      rel=\"nofollow noreferrer noopener\""],"delete":["30","      rel=\"nofollow\"","90","      rel=\"nofollow\""]}]}},"9c10956d8a65e1e3a851691d69cee367ac4e0869":{"changes":{"sonar-plugin-api\/src\/main\/java\/org\/sonar\/api\/utils\/ZipUtils.java":"MODIFY"},"diff":{"sonar-plugin-api\/src\/main\/java\/org\/sonar\/api\/utils\/ZipUtils.java":[{"add":["87","    Path targetDirNormalizedPath = toDir.toPath().normalize();","93","          unzipEntry(entry, zipStream, targetDirNormalizedPath);","103","  private static void unzipEntry(ZipEntry entry, ZipInputStream zipStream, Path targetDirNormalized) throws IOException {","104","    File to = targetDirNormalized.resolve(entry.getName()).toFile();","105","    verifyInsideTargetDirectory(entry, to.toPath(), targetDirNormalized);","248","  private static void verifyInsideTargetDirectory(ZipEntry entry, Path entryPath, Path targetDirNormalizedPath) {","249","    if (!entryPath.normalize().startsWith(targetDirNormalizedPath)) {"],"delete":["92","          unzipEntry(entry, zipStream, toDir);","102","  private static void unzipEntry(ZipEntry entry, ZipInputStream zipStream, File toDir) throws IOException {","103","    File to = new File(toDir, entry.getName());","104","    verifyInsideTargetDirectory(entry, to.toPath(), toDir.toPath());","247","  private static void verifyInsideTargetDirectory(ZipEntry entry, Path entryPath, Path targetDirPath) {","248","    if (!entryPath.normalize().startsWith(targetDirPath.normalize())) {"]}]}},"777d3a179ecc4900883a699fd13c4b528509ccb2":{"changes":{"server\/sonar-web\/src\/main\/webapp\/WEB-INF\/app\/controllers\/web_api_controller.rb":"MODIFY"},"diff":{"server\/sonar-web\/src\/main\/webapp\/WEB-INF\/app\/controllers\/web_api_controller.rb":[{"add":["23","    # Fix a very strange bug that generates a server error when the format parameter is set","24","    params[:format] = nil if params[:format]"],"delete":["23",""]}]}},"f45e42fabe2c5cfe6919d613ebfcb5c6285911ee":{"changes":{"server\/sonar-web\/src\/main\/js\/apps\/settings\/components\/almIntegration\/__tests__\/__snapshots__\/GithubTab-test.tsx.snap":"MODIFY","server\/sonar-web\/src\/main\/js\/apps\/settings\/components\/almIntegration\/GithubTab.tsx":"MODIFY"},"diff":{"server\/sonar-web\/src\/main\/js\/apps\/settings\/components\/almIntegration\/__tests__\/__snapshots__\/GithubTab-test.tsx.snap":[{"add":["16","        \"appId\","],"delete":["15","        \"appId\","]}],"server\/sonar-web\/src\/main\/js\/apps\/settings\/components\/almIntegration\/GithubTab.tsx":[{"add":["50","            additionalColumnsKeys={['url', 'appId']}"],"delete":["50","            additionalColumnsKeys={['appId', 'url']}"]}]}},"64a3e43ee8d95c88c0b394ff258d35a2f38504f5":{"changes":{"server\/sonar-db-dao\/src\/main\/java\/org\/sonar\/db\/measure\/ProjectMeasuresIndexerIterator.java":"MODIFY","server\/sonar-db-dao\/src\/test\/java\/org\/sonar\/db\/measure\/ProjectMeasuresIndexerIteratorTest.java":"MODIFY"},"diff":{"server\/sonar-db-dao\/src\/main\/java\/org\/sonar\/db\/measure\/ProjectMeasuresIndexerIterator.java":[{"add":[],"delete":["224","    throw new IllegalArgumentException(\"Measure has no value\");"]}],"server\/sonar-db-dao\/src\/test\/java\/org\/sonar\/db\/measure\/ProjectMeasuresIndexerIteratorTest.java":[{"add":["163","  public void ignore_measure_that_does_not_have_value() throws Exception {","164","    MetricDto metric1 = insertIntMetric(\"lines\");","165","    MetricDto metric2 = insertIntMetric(\"ncloc\");","166","    MetricDto leakMetric = insertIntMetric(\"new_lines\");","170","    MeasureDto withValue = insertMeasure(project, analysis, metric1, 10d);","171","    MeasureDto withLeakValue = insertMeasure(project, analysis, leakMetric, null, 20d);","172","    MeasureDto withoutValue = insertMeasure(project, analysis, metric2, null, null);","173","","174","    Map<String, Double> numericMeasures = createResultSetAndReturnDocsById().get(project.uuid()).getMeasures().getNumericMeasures();","175","    assertThat(numericMeasures).containsOnly(entry(\"lines\", 10d), entry(\"new_lines\", 20d));","176","  }","177","","178","  @Test","179","  public void ignore_numeric_measure_that_has_text_value_but_not_numeric_value() throws Exception {","180","    MetricDto metric1 = insertIntMetric(\"lines\");","181","    MetricDto metric2 = insertIntMetric(\"ncloc\");","182","    ComponentDto project = ComponentTesting.newPrivateProjectDto(dbTester.getDefaultOrganization());","183","    SnapshotDto analysis = dbTester.components().insertProjectAndSnapshot(project);","184","","185","    MeasureDto withNumericValue = insertMeasure(project, analysis, metric1, 10d);","186","    MeasureDto withTextValue = insertMeasure(project, analysis, metric2, \"foo\");","187","","188","    Map<String, Double> numericMeasures = createResultSetAndReturnDocsById().get(project.uuid()).getMeasures().getNumericMeasures();","189","    assertThat(numericMeasures).containsOnly(entry(\"lines\", 10d));"],"delete":["163","  public void fail_when_measure_return_no_value() throws Exception {","164","    MetricDto metric = insertIntMetric(\"new_lines\");","167","    insertMeasure(project, analysis, metric, 10d);","169","    expectedException.expect(IllegalStateException.class);","170","    createResultSetAndReturnDocsById();"]}]}},"19ad13dac69306678c0b63d3034f58eabc46acaa":{"changes":{"server\/sonar-ce-task-projectanalysis\/src\/test\/java\/org\/sonar\/ce\/task\/projectanalysis\/source\/linereader\/DuplicationLineReaderTest.java":"MODIFY","server\/sonar-ce-task-projectanalysis\/src\/main\/java\/org\/sonar\/ce\/task\/projectanalysis\/source\/linereader\/DuplicationLineReader.java":"MODIFY"},"diff":{"server\/sonar-ce-task-projectanalysis\/src\/test\/java\/org\/sonar\/ce\/task\/projectanalysis\/source\/linereader\/DuplicationLineReaderTest.java":[{"add":["70","  public void read_duplication_with_repeated_text_blocks() {","71","    DuplicationLineReader reader = duplicationLineReader(","72","      duplication(1, 2, innerDuplicate(3, 4)),","73","      duplication(3, 4, innerDuplicate(1, 2)));","74","","75","    assertThat(reader.read(line1)).isEmpty();","76","    assertThat(reader.read(line2)).isEmpty();","77","    assertThat(reader.read(line3)).isEmpty();","78","    assertThat(reader.read(line4)).isEmpty();","79","","80","    assertThat(line1.getDuplicationList()).containsExactly(1);","81","    assertThat(line2.getDuplicationList()).containsExactly(1);","82","    assertThat(line3.getDuplicationList()).containsExactly(3);","83","    assertThat(line4.getDuplicationList()).containsExactly(3);","84","  }","85","","86","  @Test"],"delete":[]}],"server\/sonar-ce-task-projectanalysis\/src\/main\/java\/org\/sonar\/ce\/task\/projectanalysis\/source\/linereader\/DuplicationLineReader.java":[{"add":["72","      .collect(Collectors.toMap(e -> e, new TextBlockIndexGenerator(), (a, b) -> a, LinkedHashMap::new));"],"delete":["36","import org.sonar.core.util.stream.MoreCollectors;","73","      .collect(Collectors.toMap(e -> e, new TextBlockIndexGenerator(), MoreCollectors.mergeNotSupportedMerger(), LinkedHashMap::new));"]}]}},"f91190bf830b3f79fb30a74b087d89dba213762d":{"changes":{"server\/sonar-db-dao\/src\/test\/java\/org\/sonar\/db\/permission\/UserPermissionDaoTest.java":"MODIFY","server\/sonar-server\/src\/main\/java\/org\/sonar\/server\/permission\/ws\/SearchGlobalPermissionsAction.java":"MODIFY","server\/sonar-server\/src\/main\/java\/org\/sonar\/server\/permission\/ws\/UsersAction.java":"MODIFY","server\/sonar-server\/src\/test\/java\/org\/sonar\/server\/permission\/ws\/UsersActionTest.java":"MODIFY","server\/sonar-db-dao\/src\/test\/java\/org\/sonar\/db\/permission\/PermissionQueryTest.java":"ADD","server\/sonar-server\/src\/test\/java\/org\/sonar\/server\/permission\/ws\/template\/BulkApplyTemplateActionTest.java":"MODIFY","server\/sonar-db-dao\/src\/main\/java\/org\/sonar\/db\/permission\/UserPermissionMapper.java":"MODIFY","server\/sonar-server\/src\/test\/resources\/org\/sonar\/server\/permission\/ws\/UsersActionTest\/search_for_users_is_paginated.json":"ADD","server\/sonar-db-dao\/src\/main\/java\/org\/sonar\/db\/permission\/UserPermissionDao.java":"MODIFY","server\/sonar-db-dao\/src\/main\/resources\/org\/sonar\/db\/permission\/UserPermissionMapper.xml":"MODIFY","server\/sonar-server\/src\/test\/java\/org\/sonar\/server\/permission\/ws\/template\/ApplyTemplateActionTest.java":"MODIFY","server\/sonar-db-dao\/src\/main\/java\/org\/sonar\/db\/permission\/PermissionQuery.java":"MODIFY"},"diff":{"server\/sonar-db-dao\/src\/test\/java\/org\/sonar\/db\/permission\/UserPermissionDaoTest.java":[{"add":["21","import java.util.ArrayList;","27","import java.util.stream.Collectors;","28","import org.assertj.core.groups.Tuple;","40","import static java.util.Arrays.stream;","41","import static java.util.Collections.emptyList;","42","import static java.util.Collections.singletonList;","81","    expectPermissions(query, asList(user2.getId(), user1.getId()), global2, global3, global1);","87","    expectPermissions(query, asList(user2.getId(), user1.getId(), user3.getId()), global2, global3, org2Global2, global1, org2Global1, project1Perm);","91","    expectPermissions(query, asList(user2.getId(), user1.getId()), global2, global1);","95","    expectPermissions(query, emptyList());","99","    expectPermissions(query, asList(user2.getId(), user1.getId()), global2, global3, global1);","103","    expectPermissions(query, singletonList(user2.getId()), global2, global3);","107","    expectPermissions(query, singletonList(user2.getId()), global2, global3);","111","    expectPermissions(query, singletonList(user2.getId()), global3);","115","    expectPermissions(query, emptyList());","134","    expectPermissions(query, asList(user2.getId(), user1.getId()), perm3, perm2, perm1);","138","    expectPermissions(query, emptyList());","142","    expectPermissions(query, asList(user2.getId(), user1.getId()), perm3, perm2, perm1);","146","    expectPermissions(query, asList(user2.getId(), user1.getId()), perm3, perm2);","150","    expectPermissions(query, emptyList());","154","    expectPermissions(query, emptyList());","171","    assertThat(underTest.countUsersByProjectPermission(dbSession, emptyList())).isEmpty();","174","    expectCount(singletonList(project1.getId()),","186","  public void selectUserIdsByQuery() {","201","    assertThat(underTest.selectUserIdsByQuery(dbSession, query)).containsExactly(user2.getId(), user1.getId());","203","    assertThat(underTest.selectUserIdsByQuery(dbSession, query)).isEmpty();","207","    assertThat(underTest.selectUserIdsByQuery(dbSession, query)).isEmpty();","211","    assertThat(underTest.selectUserIdsByQuery(dbSession, query)).containsExactly(user2.getId(), user1.getId());","215","    assertThat(underTest.selectUserIdsByQuery(dbSession, query)).containsExactly(user1.getId());","219","    assertThat(underTest.selectUserIdsByQuery(dbSession, query)).containsExactly(user1.getId());","223","    assertThat(underTest.selectUserIdsByQuery(dbSession, query)).isEmpty();","224","  }","225","","226","  @Test","227","  public void selectUserIdsByQuery_is_paginated() {","228","    OrganizationDto organization = db.organizations().insert();","229","    List<Integer> userIds = new ArrayList<>();","230","    for (int i = 0; i < 10; i++) {","231","      String name = \"user-\" + i;","232","      UserDto user = insertUser(u -> u.setName(name), organization);","233","      addGlobalPermission(organization, PROVISIONING, user);","234","      addGlobalPermission(organization, SYSTEM_ADMIN, user);","235","      userIds.add(user.getId());","236","    }","237","","238","    assertThat(underTest.selectUserIdsByQuery(dbSession, PermissionQuery.builder().setOrganizationUuid(organization.getUuid())","239","      .setPageSize(3).setPageIndex(1).build()))","240","        .containsExactly(userIds.get(0), userIds.get(1), userIds.get(2));","241","    assertThat(underTest.selectUserIdsByQuery(dbSession, PermissionQuery.builder().setOrganizationUuid(organization.getUuid())","242","      .setPageSize(2).setPageIndex(3).build()))","243","        .containsExactly(userIds.get(4), userIds.get(5));","244","    assertThat(underTest.selectUserIdsByQuery(dbSession, PermissionQuery.builder().setOrganizationUuid(organization.getUuid())","245","      .setPageSize(50).setPageIndex(1).build()))","246","        .hasSize(10);","247","  }","248","","249","  @Test","250","  public void selectUserIdsByQuery_is_sorted_by_insensitive_name() {","251","    OrganizationDto organization = db.organizations().insert();","252","    UserDto user1 = insertUser(u -> u.setName(\"user1\"), organization);","253","    addGlobalPermission(organization, PROVISIONING, user1);","254","    UserDto user3 = insertUser(u -> u.setName(\"user3\"), organization);","255","    addGlobalPermission(organization, SYSTEM_ADMIN, user3);","256","    UserDto user2 = insertUser(u -> u.setName(\"User2\"), organization);","257","    addGlobalPermission(organization, PROVISIONING, user2);","258","","259","    assertThat(underTest.selectUserIdsByQuery(dbSession, PermissionQuery.builder().setOrganizationUuid(organization.getUuid()).build()))","260","      .containsExactly(user1.getId(), user2.getId(), user3.getId());","593","    stream(organizations).forEach(organization -> db.organizations().addMember(organization, user));","599","    stream(organizations).forEach(organization -> db.organizations().addMember(organization, user));","621","  private void expectPermissions(PermissionQuery query, Collection<Integer> expectedUserIds, UserPermissionDto... expectedPermissions) {","622","    assertThat(underTest.selectUserIdsByQuery(dbSession, query)).containsExactly(expectedUserIds.toArray(new Integer[0]));","623","    List<UserPermissionDto> currentPermissions = underTest.selectUserPermissionsByQuery(dbSession, query, expectedUserIds);","624","    assertThat(currentPermissions).hasSize(expectedPermissions.length);","625","    List<Tuple> expectedPermissionsAsTuple = Arrays.stream(expectedPermissions)","626","      .map(expectedPermission -> tuple(expectedPermission.getUserId(), expectedPermission.getPermission(), expectedPermission.getComponentId(),","627","        expectedPermission.getOrganizationUuid()))","628","      .collect(Collectors.toList());","629","    assertThat(currentPermissions)","630","      .extracting(UserPermissionDto::getUserId, UserPermissionDto::getPermission, UserPermissionDto::getComponentId, UserPermissionDto::getOrganizationUuid)","631","      .containsOnly(expectedPermissionsAsTuple.toArray(new Tuple[0]));","633","    \/\/ test method \"countUsers()\"","634","    long distinctUsers = stream(expectedPermissions).mapToLong(UserPermissionDto::getUserId).distinct().count();","635","    assertThat((long) underTest.countUsersByQuery(dbSession, query)).isEqualTo(distinctUsers);"],"delete":["23","import java.util.Collections;","27","import javax.annotation.Nullable;","77","    expectPermissions(organization, query, null, global2, global3, global1);","83","    expectPermissions(organization, query, null, global2, global3, org2Global2, global1, org2Global1, project1Perm);","84","","85","    \/\/ return empty list if non-null but empty logins","86","    expectPermissions(organization, query, Collections.emptyList());","87","","88","    \/\/ global permissions of user1","89","    query = PermissionQuery.builder().setOrganizationUuid(organization.getUuid()).withAtLeastOnePermission().build();","90","    expectPermissions(organization, query, asList(user1.getLogin()), global1);","91","","92","    \/\/ global permissions of user2","93","    query = PermissionQuery.builder().setOrganizationUuid(organization.getUuid()).withAtLeastOnePermission().build();","94","    expectPermissions(organization, query, asList(user2.getLogin()), global2, global3);","95","","96","    \/\/ global permissions of user1, user2 and another one","97","    query = PermissionQuery.builder().setOrganizationUuid(organization.getUuid()).withAtLeastOnePermission().build();","98","    expectPermissions(organization, query, asList(user1.getLogin(), user2.getLogin(), \"missing\"), global2, global3, global1);","99","","100","    \/\/ empty global permissions if login does not exist","101","    query = PermissionQuery.builder().setOrganizationUuid(organization.getUuid()).withAtLeastOnePermission().build();","102","    expectPermissions(organization, query, asList(\"missing\"));","103","","104","    \/\/ empty global permissions if user does not have any","105","    query = PermissionQuery.builder().setOrganizationUuid(organization.getUuid()).withAtLeastOnePermission().build();","106","    expectPermissions(organization, query, asList(user3.getLogin()));","107","","108","    \/\/ user3 has no global permissions","109","    query = PermissionQuery.builder().setOrganizationUuid(organization.getUuid()).withAtLeastOnePermission().build();","110","    expectPermissions(organization, query, asList(user3.getLogin()));","114","    expectPermissions(organization, query, null, global2, global1);","118","    expectPermissions(organization, query, null);","122","    expectPermissions(organization, query, null, global2, global3, global1);","126","    expectPermissions(organization, query, null, global2, global3);","130","    expectPermissions(organization, query, null, global2, global3);","134","    expectPermissions(organization, query, null, global3);","138","    expectPermissions(organization, query, null);","157","    expectPermissions(organization, query, null, perm3, perm2, perm1);","158","","159","    \/\/ project permissions of user1","160","    query = PermissionQuery.builder().setOrganizationUuid(organization.getUuid()).withAtLeastOnePermission().setComponentUuid(project1.uuid()).build();","161","    expectPermissions(organization, query, asList(user1.getLogin()), perm2, perm1);","162","","163","    \/\/ project permissions of user2","164","    query = PermissionQuery.builder().setOrganizationUuid(organization.getUuid()).withAtLeastOnePermission().setComponentUuid(project1.uuid()).build();","165","    expectPermissions(organization, query, asList(user2.getLogin()), perm3);","166","","167","    \/\/ project permissions of user2 and another one","168","    query = PermissionQuery.builder().setOrganizationUuid(organization.getUuid()).withAtLeastOnePermission().setComponentUuid(project1.uuid()).build();","169","    expectPermissions(organization, query, asList(user2.getLogin(), \"missing\"), perm3);","170","","171","    \/\/ empty project permissions if login does not exist","172","    query = PermissionQuery.builder().setOrganizationUuid(organization.getUuid()).withAtLeastOnePermission().setComponentUuid(project1.uuid()).build();","173","    expectPermissions(organization, query, asList(\"missing\"));","174","","175","    \/\/ empty project permissions if user does not have any","176","    query = PermissionQuery.builder().setOrganizationUuid(organization.getUuid()).withAtLeastOnePermission().setComponentUuid(project1.uuid()).build();","177","    expectPermissions(organization, query, asList(user3.getLogin()));","181","    expectPermissions(organization, query, null);","185","    expectPermissions(organization, query, null, perm3, perm2, perm1);","189","    expectPermissions(organization, query, null, perm3, perm2);","193","    expectPermissions(organization, query, null);","197","    expectPermissions(organization, query, null);","214","    assertThat(underTest.countUsersByProjectPermission(dbSession, Collections.emptyList())).isEmpty();","217","    expectCount(asList(project1.getId()),","229","  public void selectUserIds() {","244","    assertThat(underTest.selectUserIds(dbSession, query)).containsExactly(user2.getId(), user1.getId());","246","    assertThat(underTest.selectUserIds(dbSession, query)).isEmpty();","250","    assertThat(underTest.selectUserIds(dbSession, query)).isEmpty();","254","    assertThat(underTest.selectUserIds(dbSession, query)).containsExactly(user2.getId(), user1.getId());","258","    assertThat(underTest.selectUserIds(dbSession, query)).containsExactly(user1.getId());","262","    assertThat(underTest.selectUserIds(dbSession, query)).containsExactly(user1.getId());","266","    assertThat(underTest.selectUserIds(dbSession, query)).isEmpty();","599","    Arrays.stream(organizations).forEach(organization -> db.organizations().addMember(organization, user));","605","    Arrays.stream(organizations).forEach(organization -> db.organizations().addMember(organization, user));","627","  private void expectPermissions(OrganizationDto org, PermissionQuery query, @Nullable Collection<String> logins, UserPermissionDto... expected) {","628","    \/\/ test method \"select()\"","629","    List<UserPermissionDto> permissions = underTest.select(dbSession, query, logins);","630","    assertThat(permissions).hasSize(expected.length);","631","    for (int i = 0; i < expected.length; i++) {","632","      UserPermissionDto got = permissions.get(i);","633","      UserPermissionDto expect = expected[i];","634","      assertThat(got.getUserId()).isEqualTo(expect.getUserId());","635","      assertThat(got.getPermission()).isEqualTo(expect.getPermission());","636","      assertThat(got.getComponentId()).isEqualTo(expect.getComponentId());","637","    }","639","    if (logins == null) {","640","      \/\/ test method \"countUsers()\", which does not make sense if users are filtered","641","      long distinctUsers = Arrays.stream(expected).mapToLong(p -> p.getUserId()).distinct().count();","642","      assertThat((long) underTest.countUsers(dbSession, org.getUuid(), query)).isEqualTo(distinctUsers);","643","    }","660","  private void addOrganizationMember(OrganizationDto org, UserDto user) {","661","    db.organizations().addMember(org, user);","662","  }","663",""]}],"server\/sonar-server\/src\/main\/java\/org\/sonar\/server\/permission\/ws\/SearchGlobalPermissionsAction.java":[{"add":["96","            .setUsersCount(countUsers(dbSession, query))","116","  private int countUsers(DbSession dbSession, PermissionQuery permissionQuery) {","117","    return dbClient.userPermissionDao().countUsersByQuery(dbSession, permissionQuery);"],"delete":["96","            .setUsersCount(countUsers(dbSession, org, query))","116","  private int countUsers(DbSession dbSession, OrganizationDto org, PermissionQuery permissionQuery) {","117","    return dbClient.userPermissionDao().countUsers(dbSession, org.getUuid(), permissionQuery);"]}],"server\/sonar-server\/src\/main\/java\/org\/sonar\/server\/permission\/ws\/UsersAction.java":[{"add":["107","      int total = dbClient.userPermissionDao().countUsersByQuery(dbSession, query);","164","    List<Integer> orderedIds = dbClient.userPermissionDao().selectUserIdsByQuery(dbSession, query);","172","    List<Integer> userIds = users.stream().map(UserDto::getId).collect(Collectors.toList());","175","      .setComponentUuid(project.map(ProjectId::getUuid).orElse(null))","178","    return dbClient.userPermissionDao().selectUserPermissionsByQuery(dbSession, query, userIds);"],"delete":["107","      int total = dbClient.userPermissionDao().countUsers(dbSession, org.getUuid(), query);","164","    List<Integer> orderedIds = dbClient.userPermissionDao().selectUserIds(dbSession, query);","172","    List<String> logins = users.stream().map(UserDto::getLogin).collect(Collectors.toList());","175","      .setComponentUuid(project.isPresent() ? project.get().getUuid() : null)","178","    return dbClient.userPermissionDao().select(dbSession, query, logins);"]}],"server\/sonar-server\/src\/test\/java\/org\/sonar\/server\/permission\/ws\/UsersActionTest.java":[{"add":["32","import static org.apache.commons.lang.StringUtils.countMatches;","34","import static org.sonar.api.server.ws.WebService.Param.PAGE;","35","import static org.sonar.api.server.ws.WebService.Param.PAGE_SIZE;","43","import static org.sonar.db.permission.OrganizationPermission.PROVISION_PROJECTS;","64","    db.users().insertPermissionOnUser(user1, ADMINISTER_QUALITY_PROFILES);","231","  public void search_for_users_is_paginated() throws Exception {","232","    for (int i = 9; i >= 0; i--) {","233","      UserDto user = db.users().insertUser(newUserDto().setName(\"user-\" + i));","234","      db.organizations().addMember(db.getDefaultOrganization(), user);","235","      db.users().insertPermissionOnUser(user, ADMINISTER);","236","      db.users().insertPermissionOnUser(user, ADMINISTER_QUALITY_GATES);","237","    }","238","    loginAsAdmin(db.getDefaultOrganization());","239","","240","    assertJson(newRequest().setParam(PAGE, \"1\").setParam(PAGE_SIZE, \"2\").execute().getInput()).withStrictArrayOrder().isSimilarTo(\"{\\n\" +","241","      \"  \\\"paging\\\": {\\n\" +","242","      \"    \\\"pageIndex\\\": 1,\\n\" +","243","      \"    \\\"pageSize\\\": 2,\\n\" +","244","      \"    \\\"total\\\": 10\\n\" +","245","      \"  },\\n\" +","246","      \"  \\\"users\\\": [\\n\" +","247","      \"    {\\n\" +","248","      \"      \\\"name\\\": \\\"user-0\\\"\\n\" +","249","      \"    },\\n\" +","250","      \"    {\\n\" +","251","      \"      \\\"name\\\": \\\"user-1\\\"\\n\" +","252","      \"    }\\n\" +","253","      \"  ]\\n\" +","254","      \"}\");","255","    assertJson(newRequest().setParam(PAGE, \"3\").setParam(PAGE_SIZE, \"4\").execute().getInput()).withStrictArrayOrder().isSimilarTo(\"{\\n\" +","256","      \"  \\\"paging\\\": {\\n\" +","257","      \"    \\\"pageIndex\\\": 3,\\n\" +","258","      \"    \\\"pageSize\\\": 4,\\n\" +","259","      \"    \\\"total\\\": 10\\n\" +","260","      \"  },\\n\" +","261","      \"  \\\"users\\\": [\\n\" +","262","      \"    {\\n\" +","263","      \"      \\\"name\\\": \\\"user-8\\\"\\n\" +","264","      \"    },\\n\" +","265","      \"    {\\n\" +","266","      \"      \\\"name\\\": \\\"user-9\\\"\\n\" +","267","      \"    }\\n\" +","268","      \"  ]\\n\" +","269","      \"}\");","270","  }","271","","272","  @Test","273","  public void return_more_than_20_permissions() {","274","    loginAsAdmin(db.getDefaultOrganization());","275","    for (int i = 0; i < 30; i++) {","276","      UserDto user = db.users().insertUser(newUserDto().setLogin(\"user-\" + i));","277","      db.organizations().addMember(db.getDefaultOrganization(), user);","278","      db.users().insertPermissionOnUser(user, SCAN);","279","      db.users().insertPermissionOnUser(user, PROVISION_PROJECTS);","280","    }","281","","282","    String result = newRequest()","283","      .setParam(PAGE_SIZE, \"100\")","284","      .execute()","285","      .getInput();","286","","287","    assertThat(countMatches(result, \"scan\")).isEqualTo(30);","288","  }","289","","290","  @Test"],"delete":["62","    db.users().insertPermissionOnUser(user1, ADMINISTER_QUALITY_PROFILES);"]}],"server\/sonar-db-dao\/src\/test\/java\/org\/sonar\/db\/permission\/PermissionQueryTest.java":[{"add":[],"delete":[]}],"server\/sonar-server\/src\/test\/java\/org\/sonar\/server\/permission\/ws\/template\/BulkApplyTemplateActionTest.java":[{"add":["265","    return db.getDbClient().userPermissionDao().selectUserIdsByQuery(db.getSession(), query);"],"delete":["265","    return db.getDbClient().userPermissionDao().selectUserIds(db.getSession(), query);"]}],"server\/sonar-db-dao\/src\/main\/java\/org\/sonar\/db\/permission\/UserPermissionMapper.java":[{"add":["28","  List<UserPermissionDto> selectUserPermissionsByQueryAndUserIds(@Param(\"query\") PermissionQuery query, @Param(\"userIds\") Collection<Integer> userIds);","29","","30","  List<Integer> selectUserIdsByQuery(@Param(\"query\") PermissionQuery query);","33","   * Count the number of distinct users returned by {@link #selectUserIdsByQuery(PermissionQuery)}","36","  int countUsersByQuery(@Param(\"query\") PermissionQuery query);"],"delete":["24","import javax.annotation.Nullable;","26","import org.apache.ibatis.session.RowBounds;","30","  List<UserPermissionDto> selectByQuery(@Param(\"query\") PermissionQuery query, @Nullable @Param(\"userLogins\") Collection<String> userLogins, RowBounds rowBounds);","33","   * Count the number of distinct users returned by {@link #selectByQuery(PermissionQuery, Collection, RowBounds)}","35","   *","36","   * @param useNull must always be null. It is needed for using the sql of ","37","   * {@link #selectByQuery(PermissionQuery, Collection, RowBounds)}","39","  int countUsersByQuery(@Param(\"organizationUuid\") String organizationUuid, @Param(\"query\") PermissionQuery query,","40","    @Nullable @Param(\"userLogins\") Collection<String> useNull);"]}],"server\/sonar-server\/src\/test\/resources\/org\/sonar\/server\/permission\/ws\/UsersActionTest\/search_for_users_is_paginated.json":[{"add":[],"delete":[]}],"server\/sonar-db-dao\/src\/main\/java\/org\/sonar\/db\/permission\/UserPermissionDao.java":[{"add":["28","import org.sonar.db.Pagination;","38","   * List of user permissions ordered by alphabetical order of user names.","39","   * Pagination is NOT applied.","40","   * No sort is done.","41","   *","42","   * @param query non-null query including optional filters.","43","   * @param userIds Filter on user ids, including disabled users. Must not be empty and maximum size is {@link DatabaseUtils#PARTITION_SIZE_FOR_ORACLE}.","45","  public List<UserPermissionDto> selectUserPermissionsByQuery(DbSession dbSession, PermissionQuery query, Collection<Integer> userIds) {","46","    if (userIds.isEmpty()) {","47","      return emptyList();","49","    checkArgument(userIds.size() <= DatabaseUtils.PARTITION_SIZE_FOR_ORACLE, \"Maximum 1'000 users are accepted\");","50","    return mapper(dbSession).selectUserPermissionsByQueryAndUserIds(query, userIds);","53","  public List<Integer> selectUserIdsByQuery(DbSession dbSession, PermissionQuery query) {","54","    return mapper(dbSession).selectUserIdsByQuery(query)","55","      .stream()","56","      \/\/ Pagination is done in Java because it's too complex to use SQL pagination in Oracle and MsSQL with the distinct","57","      .skip(query.getPageOffset())","58","      .limit(query.getPageSize())","59","      .collect(MoreCollectors.toList());","62","  public int countUsersByQuery(DbSession dbSession, PermissionQuery query) {","63","    return mapper(dbSession).countUsersByQuery(query);"],"delete":["24","import javax.annotation.Nullable;","25","import org.apache.ibatis.session.RowBounds;","39","   * List of user permissions ordered by alphabetical order of user names","40","   *  @param query non-null query including optional filters.","41","   * @param userLogins if null, then filter on all active users. If not null, then filter on logins, including disabled users.","42","   *                   Must not be empty. If not null then maximum size is {@link DatabaseUtils#PARTITION_SIZE_FOR_ORACLE}.","44","  public List<UserPermissionDto> select(DbSession dbSession, PermissionQuery query, @Nullable Collection<String> userLogins) {","45","    if (userLogins != null) {","46","      if (userLogins.isEmpty()) {","47","        return emptyList();","48","      }","49","      checkArgument(userLogins.size() <= DatabaseUtils.PARTITION_SIZE_FOR_ORACLE, \"Maximum 1'000 users are accepted\");","51","","52","    RowBounds rowBounds = new RowBounds(query.getPageOffset(), query.getPageSize());","53","    return mapper(dbSession).selectByQuery(query, userLogins, rowBounds);","56","  \/**","57","   * Shortcut over {@link #select(DbSession, PermissionQuery, Collection)} to return only distinct user","58","   * ids, keeping the same order.","59","   *\/","60","  public List<Integer> selectUserIds(DbSession dbSession, PermissionQuery query) {","61","    List<UserPermissionDto> dtos = select(dbSession, query, null);","62","    return dtos.stream()","63","      .map(UserPermissionDto::getUserId)","64","      .distinct()","65","      .collect(MoreCollectors.toList(dtos.size()));","68","  \/**","69","   * @see UserPermissionMapper#countUsersByQuery(String, PermissionQuery, Collection)","70","   *\/","71","  public int countUsers(DbSession dbSession, String organizationUuid, PermissionQuery query) {","72","    return mapper(dbSession).countUsersByQuery(organizationUuid, query, null);"]}],"server\/sonar-db-dao\/src\/main\/resources\/org\/sonar\/db\/permission\/UserPermissionMapper.xml":[{"add":["5","  <select id=\"selectUserPermissionsByQueryAndUserIds\" parameterType=\"map\" resultType=\"org.sonar.db.permission.UserPermissionDto\">","11","    <include refid=\"sqlQueryJoins\" \/>","12","    <where>","13","      u.id in <foreach collection=\"userIds\" open=\"(\" close=\")\" item=\"userId\" separator=\",\">#{userId,jdbcType=INTEGER}<\/foreach>","14","      <include refid=\"sqlQueryFilters\" \/>","15","    <\/where>","16","  <\/select>","17","","18","  <select id=\"selectUserIdsByQuery\" parameterType=\"map\" resultType=\"int\">","19","    select","20","      distinct u.id, lower(u.name) as lowerName","21","      <include refid=\"sqlQueryJoins\" \/>","22","      <where>","23","        <include refid=\"sqlQueryFilters\" \/>","24","      <\/where>","25","    order by lowerName asc","30","    <include refid=\"sqlQueryJoins\" \/>","31","    <where>","32","      <include refid=\"sqlQueryFilters\" \/>","33","    <\/where>","36","  <sql id=\"sqlQueryJoins\">","41","  <\/sql>","43","  <sql id=\"sqlQueryFilters\">","44","    and u.active = ${_true}","45","    <if test=\"query.searchQueryToSql != null\">","46","      and (","47","      lower(u.name) like #{query.searchQueryToSqlLowercase,jdbcType=VARCHAR} ESCAPE '\/'","48","      or u.email like #{query.searchQueryToSql,jdbcType=VARCHAR} ESCAPE '\/'","49","      or u.login like #{query.searchQueryToSql,jdbcType=VARCHAR} ESCAPE '\/')","50","    <\/if>","51","    <!-- filter rows with user permissions -->","52","    <if test=\"query.withAtLeastOnePermission()\">","53","      and ur.organization_uuid = om.organization_uuid","54","      and ur.role is not null","55","      <if test=\"query.componentUuid==null\">","56","        and ur.resource_id is null","58","      <if test=\"query.componentUuid!=null\">","59","        and p.uuid = #{query.componentUuid,jdbcType=VARCHAR}","61","      <if test=\"query.permission!=null\">","62","        and ur.role = #{query.permission,jdbcType=VARCHAR}","63","      <\/if>","64","    <\/if>"],"delete":["5","  <select id=\"selectByQuery\" parameterType=\"map\" resultType=\"org.sonar.db.permission.UserPermissionDto\">","11","    <include refid=\"sqlQuery\" \/>","12","    order by lower(u.name), u.name, ur.role","17","    <include refid=\"sqlQuery\" \/>","20","  <sql id=\"sqlQuery\">","25","    <where>","26","      <if test=\"userLogins == null\">","27","        and u.active = ${_true}","28","      <\/if>","29","      <if test=\"userLogins != null\">","30","        and u.login in <foreach collection=\"userLogins\" open=\"(\" close=\")\" item=\"userLogin\" separator=\",\">#{userLogin,jdbcType=VARCHAR}<\/foreach>","31","      <\/if>","32","      <if test=\"query.searchQueryToSql != null\">","33","        and (","34","        lower(u.name) like #{query.searchQueryToSqlLowercase,jdbcType=VARCHAR} ESCAPE '\/'","35","        or u.email like #{query.searchQueryToSql,jdbcType=VARCHAR} ESCAPE '\/'","36","        or u.login like #{query.searchQueryToSql,jdbcType=VARCHAR} ESCAPE '\/')","39","      <!-- filter rows with user permissions -->","40","      <if test=\"query.withAtLeastOnePermission()\">","41","        and ur.organization_uuid = #{query.organizationUuid,jdbcType=VARCHAR}","42","        and ur.role is not null","43","        <if test=\"query.componentUuid==null\">","44","          and ur.resource_id is null","45","        <\/if>","46","        <if test=\"query.componentUuid!=null\">","47","          and p.uuid = #{query.componentUuid,jdbcType=VARCHAR}","48","        <\/if>","49","        <if test=\"query.permission!=null\">","50","          and ur.role = #{query.permission,jdbcType=VARCHAR}","51","        <\/if>","53","    <\/where>"]}],"server\/sonar-server\/src\/test\/java\/org\/sonar\/server\/permission\/ws\/template\/ApplyTemplateActionTest.java":[{"add":["226","    return db.getDbClient().userPermissionDao().selectUserIdsByQuery(db.getSession(), query);"],"delete":["226","    return db.getDbClient().userPermissionDao().selectUserIds(db.getSession(), query);"]}],"server\/sonar-db-dao\/src\/main\/java\/org\/sonar\/db\/permission\/PermissionQuery.java":[{"add":["136","    private Integer pageIndex;","137","    private Integer pageSize;"],"delete":["136","    private Integer pageIndex = DEFAULT_PAGE_INDEX;","137","    private Integer pageSize = DEFAULT_PAGE_SIZE;"]}]}}}